<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Git 图解 | Frontend Knowledge Base</title>
    <meta name="description" content="【前端学习+面试指南】 涵盖前端工程师必需的核心知识库">
    <link rel="icon" href="/Frontend-Knowledge-Base/knowledge-base.png">
  <link rel="manifest" href="/Frontend-Knowledge-Base/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/Frontend-Knowledge-Base/assets/css/0.styles.512f36c0.css" as="style"><link rel="preload" href="/Frontend-Knowledge-Base/assets/js/app.be30c89b.js" as="script"><link rel="preload" href="/Frontend-Knowledge-Base/assets/js/4.d5d74749.js" as="script"><link rel="preload" href="/Frontend-Knowledge-Base/assets/js/28.e889eaeb.js" as="script"><link rel="preload" href="/Frontend-Knowledge-Base/assets/js/9.1a9c75bd.js" as="script"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/10.14beec70.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/11.1baa7ffd.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/12.b25e3f14.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/13.5e243a3b.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/14.8c43e0ed.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/15.8b7ce3ce.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/16.8ab4ae66.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/17.fe99a1e3.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/18.3313bd50.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/19.de937db9.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/20.1836cb3d.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/21.65652483.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/22.fb27e07b.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/23.47c1ae4c.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/24.232a53b1.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/25.c6a72e25.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/26.0a0a2701.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/27.0fdc9a1a.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/29.46bd6339.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/30.7fef7b22.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/31.6d22a163.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/32.91863d2b.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/33.38e661a7.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/34.95d36277.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/35.4dcca28e.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/36.eff9b2db.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/37.83295d49.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/38.9dc5afb4.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/39.8d439768.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/40.ee0861ee.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/41.88810310.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/42.fc9b11e7.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/43.6c927e3a.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/44.f886a111.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/45.80ab5dac.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/46.3e9e3e75.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/47.0eda127c.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/48.44c82d8d.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/49.4607fb6a.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/5.2bf069a5.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/50.9f0623b6.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/51.f796f30a.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/52.14bba200.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/53.ffdc0ead.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/54.0a659db0.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/55.5742c9fa.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/56.65596741.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/57.307a563b.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/58.fae9ed04.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/59.aa64338b.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/6.90c6bd27.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/60.8ed25f8b.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/61.f7b0fdbd.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/62.8a215a5b.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/63.60ac3ff9.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/64.df85119c.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/65.f263abd9.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/66.c9dc87d6.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/67.6152f8ea.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/68.f8f9f63b.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/69.236ffdcc.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/7.567f554d.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/70.a508e7e0.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/71.a7032d11.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/72.a6250581.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/73.1a604c5b.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/74.fa6d0d2d.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/75.2839c2d3.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/76.786f0d39.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/77.6a25f56b.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/78.776f55f5.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/79.b69d3416.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/8.23699700.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/80.8a98d0eb.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/81.d9a21bed.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/82.6ac5eff6.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/83.f2c7eacb.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/click-prefetch.507fe4e7.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/vendors~docsearch.1829cd5d.js">
    <link rel="stylesheet" href="/Frontend-Knowledge-Base/assets/css/0.styles.512f36c0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Frontend-Knowledge-Base/" class="home-link router-link-active"><!----> <span class="site-name">Frontend Knowledge Base</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Frontend-Knowledge-Base/frontend/JavaScript/" class="nav-link">前端</a></div><div class="nav-item"><a href="/Frontend-Knowledge-Base/cs/linux/linux.html" class="nav-link">计算机基础</a></div><div class="nav-item"><a href="/Frontend-Knowledge-Base/book/" class="nav-link">书籍</a></div><div class="nav-item"><a href="/Frontend-Knowledge-Base/interview/" class="nav-link">面试</a></div><div class="nav-item"><a href="https://jinjun.wiki/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/jinjun1994/Frontend-Knowledge-Base" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Frontend-Knowledge-Base/frontend/JavaScript/" class="nav-link">前端</a></div><div class="nav-item"><a href="/Frontend-Knowledge-Base/cs/linux/linux.html" class="nav-link">计算机基础</a></div><div class="nav-item"><a href="/Frontend-Knowledge-Base/book/" class="nav-link">书籍</a></div><div class="nav-item"><a href="/Frontend-Knowledge-Base/interview/" class="nav-link">面试</a></div><div class="nav-item"><a href="https://jinjun.wiki/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/jinjun1994/Frontend-Knowledge-Base" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group first collapsable"><p class="sidebar-heading"><span>linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable"><p class="sidebar-heading"><span>nginx</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable"><p class="sidebar-heading open"><span>git</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/Frontend-Knowledge-Base/cs/git/git.html" class="sidebar-link">/cs/git/git.html</a></li><li><a href="/Frontend-Knowledge-Base/cs/git/1-果壳中的Git.html" class="sidebar-link">什么是 Git</a></li><li><a href="/Frontend-Knowledge-Base/cs/git/2.1-Git简易指南.html" class="sidebar-link">Git 简易指南(上)</a></li><li><a href="/Frontend-Knowledge-Base/cs/git/2.2-创建代码仓库.html" class="sidebar-link">创建代码仓库</a></li><li><a href="/Frontend-Knowledge-Base/cs/git/2.3-保存你的更改.html" class="sidebar-link">/cs/git/2.3-保存你的更改.html</a></li><li><a href="/Frontend-Knowledge-Base/cs/git/2.4-查看仓库状态.html" class="sidebar-link">检查仓库状态</a></li><li><a href="/Frontend-Knowledge-Base/cs/git/2.5-检出以前的提交.html" class="sidebar-link">检出之前的提交</a></li><li><a href="/Frontend-Knowledge-Base/cs/git/2.6-回滚错误的修改.html" class="sidebar-link">回滚错误的修改</a></li><li><a href="/Frontend-Knowledge-Base/cs/git/2.7-重写项目历史.html" class="sidebar-link">重写项目历史</a></li><li><a href="/Frontend-Knowledge-Base/cs/git/3.2-保持代码同步.html" class="sidebar-link">保持同步</a></li><li><a href="/Frontend-Knowledge-Base/cs/git/3.3-创建PullRequest.html" class="sidebar-link">创建Pull Request</a></li><li><a href="/Frontend-Knowledge-Base/cs/git/3.4-使用分支.html" class="sidebar-link">git使用分支</a></li><li><a href="/Frontend-Knowledge-Base/cs/git/3.5-常见工作流比较.html" class="sidebar-link">常见工作流比较</a></li><li><a href="/Frontend-Knowledge-Base/cs/git/4-Git图解.html" class="active sidebar-link">Git 图解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/cs/git/4-Git图解.html#基本用法" class="sidebar-link">基本用法</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/cs/git/4-Git图解.html#约定" class="sidebar-link">约定</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/cs/git/4-Git图解.html#命令详解" class="sidebar-link">命令详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/cs/git/4-Git图解.html#diff" class="sidebar-link">Diff</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/cs/git/4-Git图解.html#commit" class="sidebar-link">Commit</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/cs/git/4-Git图解.html#checkout" class="sidebar-link">Checkout</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/cs/git/4-Git图解.html#head-标识处于分离状态时的提交操作" class="sidebar-link">HEAD 标识处于分离状态时的提交操作</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/cs/git/4-Git图解.html#reset" class="sidebar-link">Reset</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/cs/git/4-Git图解.html#merge" class="sidebar-link">Merge</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/cs/git/4-Git图解.html#cherry-pick" class="sidebar-link">Cherry Pick</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/cs/git/4-Git图解.html#rebase" class="sidebar-link">Rebase</a></li></ul></li></ul></li><li><a href="/Frontend-Knowledge-Base/cs/git/5.1-代码合并Merge还是Rebase.html" class="sidebar-link">代码合并：Merge、Rebase 的选择</a></li><li><a href="/Frontend-Knowledge-Base/cs/git/5.2-回滚命令Reset、Checkout、Revert辨析.html" class="sidebar-link">代码回滚：Reset、Checkout、Revert 的选择</a></li><li><a href="/Frontend-Knowledge-Base/cs/git/5.3-Git_log高级用法.html" class="sidebar-link">Git log 高级用法</a></li><li><a href="/Frontend-Knowledge-Base/cs/git/5.4-Git钩子.html" class="sidebar-link">Git 钩子：自定义你的工作流</a></li><li><a href="/Frontend-Knowledge-Base/cs/git/5.5-Git提交引用.html" class="sidebar-link">Git提交引用和引用日志</a></li></ul></section></li></ul> </aside> <div class="back-to-ceiling" style="right:1rem;bottom:3rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;background-color:rgba(231, 234, 241,.5);display:none;" data-v-7efdea1b data-v-7efdea1b><i class="iconfont icon-rocket" data-v-7efdea1b></i></div> <main class="page"> <div class="page-none"></div> <div class="page-title"><h1>Git 图解</h1> <hr> <div class="pageInfo" data-v-3a11415e><i class="icon-author iconfont" data-v-3a11415e><span data-v-3a11415e>jinjun</span></i> <!----> <span id="/cs/git/4-Git%E5%9B%BE%E8%A7%A3.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-ea098484 data-v-3a11415e><i class="icon-eye" style="font-size:.9rem;font-weight:normal;color:#999;" data-v-ea098484></i> <a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;" data-v-ea098484></a></span></div></div> <div class="content default"><h1 id="git-图解"><a href="#git-图解" aria-hidden="true" class="header-anchor">#</a> Git 图解</h1> <blockquote><p>BY 童仲毅（<a href="https://github.com/geeeeeeeeek/git-recipes/" target="_blank" rel="noopener noreferrer">geeeeeeeeek@github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）</p> <p>这是一篇在<a href="http://marklodato.github.io/visual-git-guide/index-zh-cn.html" target="_blank" rel="noopener noreferrer">原文<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>基础上演绎的文章。原作者 <a href="lodatom@gmail.com">Mark Lodato</a>，译者 <a href="ellrywych@gmail.com">wych</a>。原文采用<a href="https://creativecommons.org/licenses/by-nc-sa/3.0/us/" target="_blank" rel="noopener noreferrer">创用 CC 姓名标示-非商业性-相同方式分享 3.0 美国授权条款<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>授权。</p></blockquote> <p>此页图解 git 中的最常用命令。如果你稍微理解 git 的工作原理，这篇文章能够让你理解的更透彻。</p> <h2 id="基本用法"><a href="#基本用法" aria-hidden="true" class="header-anchor">#</a> 基本用法</h2> <p><img src="http://marklodato.github.io/visual-git-guide/basic-usage.svg" alt="enter image description here"></p> <p>上面的四条命令在工作目录、stage 缓存(也叫做索引)和 commit 历史之间复制文件。</p> <ul><li><code>git add files</code> 把工作目录中的文件加入 stage 缓存</li> <li><code>git commit</code> 把 stage 缓存生成一次 commit，并加入 commit 历史</li> <li><code>git reset -- files</code> 撤销最后一次 <code>git add files</code>，你也可以用 <code>git reset</code> 撤销所有 stage 缓存文件</li> <li><code>git checkout -- files</code> 把文件从 stage 缓存复制到工作目录，用来丢弃本地修改</li></ul> <p>你可以用 <code>git reset -p</code>、<code>git checkout -p</code> 或 <code>git add -p</code> 进入交互模式，也可以跳过 stage 缓存直接从  commit历史取出文件或者直接提交代码。</p> <p><img src="http://marklodato.github.io/visual-git-guide/basic-usage-2.svg" alt="enter image description here"></p> <ul><li><code>git commit -a</code> 相当于运行 <code>git add</code> 把所有当前目录下的文件加入 stage 缓存再运行 <code>git commit</code>。</li> <li><code>git commit files</code> 进行一次包含最后一次提交加上工作目录中文件快照的提交，并且文件被添加到 stage 缓存。</li> <li><code>git checkout HEAD -- files</code> 回滚到复制最后一次提交。</li></ul> <h2 id="约定"><a href="#约定" aria-hidden="true" class="header-anchor">#</a> 约定</h2> <p>后文中以下面的形式使用图片：</p> <p><img src="http://marklodato.github.io/visual-git-guide/conventions.svg" alt="enter image description here"></p> <p>绿色的5位字符表示提交的 ID，分别指向父节点。分支用橙色显示，分别指向特定的提交。当前分支由附在其上的 <code>_HEAD_</code> 标识。</p> <p>这张图片里显示最后 5 次提交，<code>_ed489_</code> 是最新提交。 <code>_master_</code> 分支指向此次提交，另一个 <code>_maint_</code> 分支指向祖父提交节点。</p> <h2 id="命令详解"><a href="#命令详解" aria-hidden="true" class="header-anchor">#</a> 命令详解</h2> <h3 id="diff"><a href="#diff" aria-hidden="true" class="header-anchor">#</a> Diff</h3> <p>有许多种方法查看两次提交之间的变动，下面是其中一些例子。</p> <p><img src="http://marklodato.github.io/visual-git-guide/diff.svg" alt="enter image description here"></p> <h3 id="commit"><a href="#commit" aria-hidden="true" class="header-anchor">#</a> Commit</h3> <p>提交时，Git 用 stage 缓存中的文件创建一个新的提交，并把此时的节点设为父节点。然后把当前分支指向新的提交节点。下图中，当前分支是 <code>_master_</code>。</p> <p>在运行命令之前，<code>_master_</code> 指向 <code>_ed489_</code>，提交后，<code>_master_</code> 指向新的节点<code>_f0cec_</code> 并以 <code>_ed489_</code> 作为父节点。</p> <p><img src="http://marklodato.github.io/visual-git-guide/commit-master.svg" alt="enter image description here"></p> <p>即便当前分支是某次提交的祖父节点，Git 会同样操作。下图中，在 <code>_master_</code> 分支的祖父节点 <code>_maint_</code> 分支进行一次提交，生成了 <code>_1800b_</code>。</p> <p>这样，<code>_maint_</code>分支就不再是 <code>_master_</code> 分支的祖父节点。此时，<a href="#merge">merge</a> 或者 <a href="#rebase">rebase</a> 是必须的。</p> <p><img src="http://marklodato.github.io/visual-git-guide/commit-maint.svg" alt="enter image description here"></p> <p>如果想更改一次提交，使用 <code>git commit --amend</code>。Git 会使用与当前提交相同的父节点进行一次新提交，旧的提交会被取消。</p> <p><img src="http://marklodato.github.io/visual-git-guide/commit-amend.svg" alt="enter image description here"></p> <p>另一个例子是<a href="#detached">分离HEAD提交</a>，在后面的章节中介绍。</p> <h3 id="checkout"><a href="#checkout" aria-hidden="true" class="header-anchor">#</a> Checkout</h3> <p><code>git checkout</code> 命令用于从历史提交（或者 stage 缓存）中拷贝文件到工作目录，也可用于切换分支。</p> <p>当给定某个文件名（或者打开 <code>-p</code> 选项，或者文件名和-p选项同时打开）时，Git 会从指定的提交中拷贝文件到 stage 缓存和工作目录。比如，<code>git checkout HEAD~ foo.c</code> 会将提交节点 <code>_HEAD~_</code>（即当前提交节点的父节点）中的 <code>foo.c</code> 复制到工作目录并且加到 stage 缓存中。如果命令中没有指定提交节点，则会从 stage 缓存中拷贝内容。注意当前分支不会发生变化。</p> <p><img src="http://marklodato.github.io/visual-git-guide/checkout-files.svg" alt="enter image description here"></p> <p>当不指定文件名，而是给出一个（本地）分支时，那么 <code>_HEAD_</code> 标识会移动到那个分支（也就是说，我们「切换」到那个分支了），然后 stage 缓存和工作目录中的内容会和 <code>_HEAD_</code> 对应的提交节点一致。新提交节点（下图中的 <code>a47c3</code>）中的所有文件都会被复制（到 stage 缓存和工作目录中）；只存在于老的提交节点（<code>ed489</code>）中的文件会被删除；不属于上述两者的文件会被忽略，不受影响。</p> <p><img src="http://marklodato.github.io/visual-git-guide/checkout-branch.svg" alt="enter image description here"></p> <p>如果既没有指定文件名，也没有指定分支名，而是一个标签、远程分支、SHA-1 值或者是像 <code>_master~3_</code> 类似的东西，就得到一个匿名分支，称作 <code>_detached HEAD_</code>（被分离的 <code>_HEAD_</code> 标识）。这样可以很方便地在历史版本之间互相切换。比如说你想要编译 1.6.6.1 版本的 Git，你可以运行 <code>git checkout v1.6.6.1</code>（这是一个标签，而非分支名），编译，安装，然后切换回另一个分支，比如说 <code>git checkout master</code>。然而，当提交操作涉及到「分离的 HEAD」时，其行为会略有不同，详情见在<a href="#detached">下面</a>。</p> <p><img src="http://marklodato.github.io/visual-git-guide/checkout-detached.svg" alt="enter image description here"></p> <h3 id="head-标识处于分离状态时的提交操作"><a href="#head-标识处于分离状态时的提交操作" aria-hidden="true" class="header-anchor">#</a> HEAD 标识处于分离状态时的提交操作</h3> <p>当 <code>_HEAD_</code> 处于分离状态（不依附于任一分支）时，提交操作可以正常进行，但是不会更新任何已命名的分支。你可以认为这是在更新一个匿名分支。</p> <p><img src="http://marklodato.github.io/visual-git-guide/commit-detached.svg" alt="enter image description here"></p> <p>一旦此后你切换到别的分支，比如说 <code>_master_</code>，那么这个提交节点（可能）再也不会被引用到，然后就会被丢弃掉了。注意这个命令之后就不会有东西引用 <code>_2eecb_</code>。</p> <p><img src="http://marklodato.github.io/visual-git-guide/checkout-after-detached.svg" alt="enter image description here"></p> <p>但是，如果你想保存这个状态，可以用命令 <code>git checkout -b name</code> 来创建一个新的分支。</p> <p><img src="http://marklodato.github.io/visual-git-guide/checkout-b-detached.svg" alt="enter image description here"></p> <h3 id="reset"><a href="#reset" aria-hidden="true" class="header-anchor">#</a> Reset</h3> <p><code>git reset</code> 命令把当前分支指向另一个位置，并且有选择的变动工作目录和索引。也用来在从历史commit历史中复制文件到索引，而不动工作目录。</p> <p>如果不给选项，那么当前分支指向到那个提交。如果用 <code>--hard</code> 选项，那么工作目录也更新，如果用 <code>--soft</code> 选项，那么都不变。</p> <p><img src="http://marklodato.github.io/visual-git-guide/reset-commit.svg" alt="enter image description here"></p> <p>如果没有给出提交点的版本号，那么默认用 <code>_HEAD_</code>。这样，分支指向不变，但是索引会回滚到最后一次提交，如果用 <code>--hard</code> 选项，工作目录也同样。</p> <p><img src="http://marklodato.github.io/visual-git-guide/reset.svg" alt="enter image description here"></p> <p>如果给了文件名(或者 <code>-p</code> 选项), 那么工作效果和带文件名的<a href="#checkout">checkout</a>差不多，除了索引被更新。</p> <p><img src="http://marklodato.github.io/visual-git-guide/reset-files.svg" alt="enter image description here"></p> <h3 id="merge"><a href="#merge" aria-hidden="true" class="header-anchor">#</a> Merge</h3> <p><code>git merge</code> 命令把不同分支合并起来。合并前，索引必须和当前提交相同。如果另一个分支是当前提交的祖父节点，那么合并命令将什么也不做。</p> <p>另一种情况是如果当前提交是另一个分支的祖父节点，就导致 <code>_fast-forward_</code> 合并。指向只是简单的移动，并生成一个新的提交。</p> <p><img src="http://marklodato.github.io/visual-git-guide/merge-ff.svg" alt="enter image description here"></p> <p>否则就是一次真正的合并。默认把当前提交（<code>_ed489_</code> 如下所示）和另一个提交（<code>_33104_</code>）以及他们的共同祖父节点（<code>_b325c_</code>）进行一次<a href="http://en.wikipedia.org/wiki/Three-way_merge" target="_blank" rel="noopener noreferrer">三方合并<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。结果是先保存当前目录和索引，然后和父节点 <code>_33104_</code> 一起做一次新提交。</p> <p><img src="http://marklodato.github.io/visual-git-guide/merge.svg" alt="enter image description here"></p> <h3 id="cherry-pick"><a href="#cherry-pick" aria-hidden="true" class="header-anchor">#</a> Cherry Pick</h3> <p><code>git cherry-pick</code> 命令「复制」一个提交节点并在当前分支做一次完全一样的新提交。</p> <p><img src="http://marklodato.github.io/visual-git-guide/cherry-pick.svg" alt="enter image description here"></p> <h3 id="rebase"><a href="#rebase" aria-hidden="true" class="header-anchor">#</a> Rebase</h3> <p><code>git rebase</code> 是合并命令的另一种选择。合并把两个父分支合并进行一次提交，提交历史不是线性的。rebase 在当前分支上重演另一个分支的历史，提交历史是线性的。</p> <p>本质上，这是线性化的自动的 <a href="#cherry-pick">cherry-pick</a>。</p> <p><img src="http://marklodato.github.io/visual-git-guide/rebase.svg" alt="enter image description here"></p> <p>上面的命令都在 <code>_topic_</code> 分支中进行，而不是 <code>_master_</code> 分支，在 <code>_master_</code> 分支上重演，并且把分支指向新的节点。注意旧提交没有被引用，将被回收。</p> <p>要限制回滚范围，使用 <code>--onto</code> 选项。下面的命令在 <code>_master_</code> 分支上重演当前分支从 <code>_169a6_</code> 以来的最近几个提交，即 <code>_2c33a_</code>。</p> <p><img src="http://marklodato.github.io/visual-git-guide/rebase-onto.svg" alt="enter image description here"></p> <p>同样有 <code>git rebase --interactive</code> 让你更方便的完成一些复杂操作，比如丢弃、重排、修改、合并提交。</p> <blockquote><p>这篇文章是<a href="https://github.com/geeeeeeeeek/git-recipes/" target="_blank" rel="noopener noreferrer"><strong>「git-recipes」</strong><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的一部分，点击 <a href="https://github.com/geeeeeeeeek/git-recipes/wiki/" target="_blank" rel="noopener noreferrer"><strong>目录</strong><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 查看所有章节。</p> <p>如果你觉得文章对你有帮助，欢迎点击右上角的 <strong>Star</strong> 🌟 或 <strong>Fork</strong> 🍴。</p> <p>如果你发现了错误，或是想要加入协作，请参阅 <a href="https://github.com/geeeeeeeeek/git-recipes/issues/1" target="_blank" rel="noopener noreferrer">Wiki 协作说明<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p></blockquote></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/jinjun1994/Frontend-Knowledge-Base/edit/master/cs/git/4-Git图解.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2019/2/17 上午2:40:46</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Frontend-Knowledge-Base/cs/git/3.5-常见工作流比较.html" class="prev">
          常见工作流比较
        </a></span> <span class="next"><a href="/Frontend-Knowledge-Base/cs/git/5.1-代码合并Merge还是Rebase.html">
          代码合并：Merge、Rebase 的选择
        </a>
        →
      </span></p></div> </main> <div class="page"><section class="page-edit"><h3 style="display:;"><a href="javascript:;"></a>
      评 论：
    </h3> <div id="vcomments"></div></section></div></div><div class="global-ui"><!----></div></div>
    <script src="/Frontend-Knowledge-Base/assets/js/app.be30c89b.js" defer></script><script src="/Frontend-Knowledge-Base/assets/js/4.d5d74749.js" defer></script><script src="/Frontend-Knowledge-Base/assets/js/28.e889eaeb.js" defer></script><script src="/Frontend-Knowledge-Base/assets/js/9.1a9c75bd.js" defer></script>
  </body>
</html>
