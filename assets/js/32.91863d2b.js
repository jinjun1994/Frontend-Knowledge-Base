(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{92:function(s,e,a){"use strict";a.r(e);var t=a(3),n=Object(t.a)({},function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"git-é’©å­ï¼šè‡ªå®šä¹‰ä½ çš„å·¥ä½œæµ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-é’©å­ï¼šè‡ªå®šä¹‰ä½ çš„å·¥ä½œæµ","aria-hidden":"true"}},[s._v("#")]),s._v(" Git é’©å­ï¼šè‡ªå®šä¹‰ä½ çš„å·¥ä½œæµ")]),s._v(" "),a("blockquote",[a("p",[s._v("BY ç«¥ä»²æ¯…ï¼ˆ"),a("a",{attrs:{href:"https://github.com/geeeeeeeeek/git-recipes/",target:"_blank",rel:"noopener noreferrer"}},[s._v("geeeeeeeeek@github"),a("OutboundLink")],1),s._v("ï¼‰")]),s._v(" "),a("p",[s._v("è¿™æ˜¯ä¸€ç¯‡åœ¨"),a("a",{attrs:{href:"https://www.atlassian.com/git/tutorials/git-hooks",target:"_blank",rel:"noopener noreferrer"}},[s._v("åŸæ–‡ï¼ˆBY atlassianï¼‰"),a("OutboundLink")],1),s._v("åŸºç¡€ä¸Šæ¼”ç»çš„è¯‘æ–‡ã€‚é™¤éå¦è¡Œæ³¨æ˜ï¼Œé¡µé¢ä¸Šæ‰€æœ‰å†…å®¹é‡‡ç”¨çŸ¥è¯†å…±äº«-ç½²åï¼ˆ"),a("a",{attrs:{href:"http://creativecommons.org/licenses/by/2.5/au/deed.zh",target:"_blank",rel:"noopener noreferrer"}},[s._v("CC BY 2.5 AU"),a("OutboundLink")],1),s._v("ï¼‰åè®®å…±äº«ã€‚")])]),s._v(" "),a("p",[s._v("Git é’©å­æ˜¯åœ¨ Git ä»“åº“ä¸­ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶è‡ªåŠ¨è¿è¡Œçš„è„šæœ¬ã€‚å®ƒå¯ä»¥è®©ä½ è‡ªå®šä¹‰ Git å†…éƒ¨çš„è¡Œä¸ºï¼Œåœ¨å¼€å‘å‘¨æœŸä¸­çš„å…³é”®ç‚¹è§¦å‘è‡ªå®šä¹‰çš„è¡Œä¸ºã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://wac-cdn.atlassian.com/dam/jcr:ac22adee-d740-4216-a92a-33c14b5623e5/01.svg",alt:"enter image description here"}})]),s._v(" "),a("p",[s._v("Git é’©å­æœ€å¸¸è§çš„ä½¿ç”¨åœºæ™¯åŒ…æ‹¬æ¨è¡Œæäº¤è§„èŒƒï¼Œæ ¹æ®ä»“åº“çŠ¶æ€æ”¹å˜é¡¹ç›®ç¯å¢ƒï¼Œå’Œæ¥å…¥æŒç»­é›†æˆå·¥ä½œæµã€‚ä½†æ˜¯ï¼Œå› ä¸ºè„šæœ¬å¯ä»¥å®Œå…¨å®šåˆ¶ï¼Œä½ å¯ä»¥ç”¨ Git é’©å­æ¥è‡ªåŠ¨åŒ–æˆ–è€…ä¼˜åŒ–ä½ å¼€å‘å·¥ä½œæµä¸­ä»»æ„éƒ¨åˆ†ã€‚")]),s._v(" "),a("p",[s._v("åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¼šå…ˆç®€è¦ä»‹ç» Git é’©å­æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ç„¶åï¼Œæˆ‘ä»¬ä¼šå®¡è§†ä¸€äº›æœ¬åœ°å’Œè¿œç«¯ä»“åº“ä½¿ç”¨æœ€æµè¡Œçš„é’©å­ã€‚")]),s._v(" "),a("h1",{attrs:{id:"æ¦‚è¿°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ¦‚è¿°","aria-hidden":"true"}},[s._v("#")]),s._v(" æ¦‚è¿°")]),s._v(" "),a("p",[s._v("Git é’©å­æ˜¯ä»“åº“ä¸­ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶ Git è‡ªåŠ¨è¿è¡Œçš„æ™®é€šè„šæœ¬ã€‚å› æ­¤ï¼ŒGit é’©å­å®‰è£…å’Œé…ç½®ä¹Ÿéå¸¸å®¹æ˜“ã€‚")]),s._v(" "),a("p",[s._v("é’©å­åœ¨æœ¬åœ°æˆ–æœåŠ¡ç«¯ä»“åº“éƒ½å¯ä»¥éƒ¨ç½²ï¼Œä¸”åªä¼šåœ¨ä»“åº“ä¸­äº‹ä»¶å‘ç”Ÿæ—¶è¢«æ‰§è¡Œã€‚åœ¨æ–‡ç« åé¢æˆ‘ä»¬ä¼šå…·ä½“åœ°ç ”ç©¶å„ç§é’©å­ã€‚æ¥ä¸‹æ¥æ‰€è®²çš„é…ç½®å¯¹æœ¬åœ°å’ŒæœåŠ¡ç«¯é’©å­éƒ½èµ·ä½œç”¨ã€‚")]),s._v(" "),a("h3",{attrs:{id:"å®‰è£…é’©å­"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…é’©å­","aria-hidden":"true"}},[s._v("#")]),s._v(" å®‰è£…é’©å­")]),s._v(" "),a("p",[s._v("é’©å­å­˜åœ¨äºæ¯ä¸ª Git ä»“åº“çš„ "),a("code",[s._v(".git/hooks")]),s._v(" ç›®å½•ä¸­ã€‚å½“ä½ åˆå§‹åŒ–ä»“åº“æ—¶ï¼ŒGit è‡ªåŠ¨ç”Ÿæˆè¿™ä¸ªç›®å½•å’Œä¸€äº›ç¤ºä¾‹è„šæœ¬ã€‚å½“ä½ è§‚å¯Ÿ "),a("code",[s._v(".git/hooks")]),s._v(" æ—¶ï¼Œä½ ä¼šçœ‹åˆ°ä¸‹é¢è¿™äº›æ–‡ä»¶ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("applypatch-msg.sample       pre-push.sample\ncommit-msg.sample           pre-rebase.sample\npost-update.sample          prepare-commit-msg.sample\npre-applypatch.sample       update.sample\npre-commit.sample\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("è¿™é‡Œå·²ç»åŒ…å«äº†å¤§éƒ¨åˆ†å¯ç”¨çš„é’©å­äº†ï¼Œä½†æ˜¯ "),a("code",[s._v(".sample")]),s._v(" æ‹“å±•åé˜²æ­¢å®ƒä»¬é»˜è®¤è¢«æ‰§è¡Œã€‚ä¸ºäº†å®‰è£…ä¸€ä¸ªé’©å­ï¼Œä½ åªéœ€è¦å»æ‰ "),a("code",[s._v(".sample")]),s._v(" æ‹“å±•åã€‚æˆ–è€…ä½ è¦å†™ä¸€ä¸ªæ–°çš„è„šæœ¬ï¼Œä½ åªéœ€æ·»åŠ ä¸€ä¸ªæ–‡ä»¶åå’Œä¸Šè¿°åŒ¹é…çš„æ–°æ–‡ä»¶ï¼Œå»æ‰ "),a("code",[s._v(".sample")]),s._v(" æ‹“å±•åã€‚")]),s._v(" "),a("p",[s._v("æ¯”å¦‚è¯´ï¼Œè¯•è¯•å®‰è£…ä¸€ä¸ª "),a("code",[s._v("prepare-commit-msg")]),s._v(" é’©å­ã€‚å»æ‰è„šæœ¬çš„ "),a("code",[s._v(".sample")]),s._v(" æ‹“å±•åï¼Œåœ¨æ–‡ä»¶ä¸­åŠ ä¸Šä¸‹é¢è¿™ä¸¤è¡Œï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('#!/bin/sh\n\necho "# Please include a useful commit message!" > $1\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("é’©å­éœ€è¦èƒ½è¢«æ‰§è¡Œï¼Œæ‰€ä»¥å¦‚æœä½ åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„è„šæœ¬æ–‡ä»¶ï¼Œä½ éœ€è¦ä¿®æ”¹å®ƒçš„æ–‡ä»¶æƒé™ã€‚æ¯”å¦‚è¯´ï¼Œä¸ºäº†ç¡®ä¿ "),a("code",[s._v("prepare-commit-msg")]),s._v(" å¯æ‰§è¡Œï¼Œè¿è¡Œä¸‹é¢è¿™ä¸ªå‘½ä»¤ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("chmod +x prepare-commit-msg\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("æ¥ä¸‹æ¥ä½ æ¯æ¬¡è¿è¡Œ "),a("code",[s._v("git commit")]),s._v(" æ—¶ï¼Œä½ ä¼šçœ‹åˆ°é»˜è®¤çš„æäº¤ä¿¡æ¯éƒ½è¢«æ›¿æ¢äº†ã€‚æˆ‘ä»¬ä¼šåœ¨ã€Œå‡†å¤‡æäº¤ä¿¡æ¯ã€ä¸€èŠ‚ä¸­ç»†çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ç°åœ¨æˆ‘ä»¬å·²ç»å¯ä»¥å®šåˆ¶ Git çš„å†…éƒ¨åŠŸèƒ½ï¼Œä½ åªéœ€è¦åå’Œæ”¾å®½ã€‚")]),s._v(" "),a("p",[s._v("å†…ç½®çš„æ ·ä¾‹è„šæœ¬æ˜¯éå¸¸æœ‰ç”¨çš„å‚è€ƒèµ„æ–™ï¼Œå› ä¸ºæ¯ä¸ªé’©å­ä¼ å…¥çš„å‚æ•°éƒ½æœ‰éå¸¸è¯¦ç»†çš„è¯´æ˜ï¼ˆä¸åŒé’©å­ä¸ä¸€æ ·ï¼‰ã€‚")]),s._v(" "),a("h3",{attrs:{id:"è„šæœ¬è¯­è¨€"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è„šæœ¬è¯­è¨€","aria-hidden":"true"}},[s._v("#")]),s._v(" è„šæœ¬è¯­è¨€")]),s._v(" "),a("p",[s._v("å†…ç½®çš„è„šæœ¬å¤§å¤šæ˜¯  shellå’Œ PERL è¯­è¨€çš„ï¼Œä½†ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•è„šæœ¬è¯­è¨€ï¼Œåªè¦å®ƒä»¬æœ€åèƒ½ç¼–è¯‘åˆ°å¯æ‰§è¡Œæ–‡ä»¶ã€‚æ¯æ¬¡è„šæœ¬ä¸­çš„ "),a("code",[s._v("#!/bin/sh")]),s._v(" å®šä¹‰äº†ä½ çš„æ–‡ä»¶å°†è¢«å¦‚ä½•è§£é‡Šã€‚æ¯”å¦‚ï¼Œä½¿ç”¨å…¶ä»–è¯­è¨€æ—¶ä½ åªéœ€è¦å°† path æ”¹ä¸ºä½ çš„è§£é‡Šå™¨çš„è·¯å¾„ã€‚")]),s._v(" "),a("p",[s._v("æ¯”å¦‚è¯´ï¼Œä½ å¯ä»¥åœ¨ "),a("code",[s._v("prepare-commit-msg")]),s._v(" ä¸­å†™ä¸€ä¸ªå¯æ‰§è¡Œçš„ Python è„šæœ¬ã€‚ä¸‹é¢è¿™ä¸ªé’©å­å’Œä¸Šä¸€èŠ‚çš„ shell è„šæœ¬åšçš„äº‹å®Œå…¨ä¸€æ ·ã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#!/usr/bin/env python\n\nimport sys, os\n\ncommit_msg_filepath = sys.argv[1]\nwith open(commit_msg_filepath, 'w') as f:\n    f.write(\"# Please include a useful commit message!\")\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("æ³¨æ„ç¬¬ä¸€è¡Œæ”¹æˆäº† Python è§£é‡Šå™¨çš„è·¯å¾„ã€‚æ­¤å¤–ï¼Œè¿™é‡Œç”¨ "),a("code",[s._v("sys.argv[1]")]),s._v(" è€Œä¸æ˜¯ "),a("code",[s._v("$1")]),s._v(" æ¥è·å–ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆè¿™ä¸ªä¹Ÿåé¢å†è®²ï¼‰ã€‚")]),s._v(" "),a("p",[s._v("è¿™ä¸ªç‰¹æ€§éå¸¸å¼ºå¤§ï¼Œå› ä¸ºä½ å¯ä»¥ç”¨ä»»ä½•ä½ å–œæ¬¢çš„è¯­è¨€æ¥ç¼–å†™  Git é’©å­ã€‚")]),s._v(" "),a("h3",{attrs:{id:"é’©å­çš„ä½œç”¨åŸŸ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é’©å­çš„ä½œç”¨åŸŸ","aria-hidden":"true"}},[s._v("#")]),s._v(" é’©å­çš„ä½œç”¨åŸŸ")]),s._v(" "),a("p",[s._v("å¯¹äºä»»ä½• Git ä»“åº“æ¥è¯´é’©å­éƒ½æ˜¯æœ¬åœ°çš„ï¼Œè€Œä¸”å®ƒä¸ä¼šéšç€ "),a("code",[s._v("git clone")]),s._v(" ä¸€èµ·å¤åˆ¶åˆ°æ–°çš„ä»“åº“ã€‚è€Œä¸”ï¼Œå› ä¸ºé’©å­æ˜¯æœ¬åœ°çš„ï¼Œä»»ä½•èƒ½æ¥è§¦å¾—åˆ°ä»“åº“çš„äººéƒ½å¯ä»¥ä¿®æ”¹ã€‚")]),s._v(" "),a("p",[s._v("å¯¹äºå¼€å‘å›¢é˜Ÿæ¥è¯´ï¼Œè¿™æœ‰å¾ˆå¤§çš„å½±å“ã€‚é¦–å…ˆï¼Œä½ è¦ç¡®ä¿ä½ ä»¬æˆå‘˜ä¹‹é—´çš„é’©å­éƒ½æ˜¯æœ€æ–°çš„ã€‚å…¶æ¬¡ï¼Œä½ ä¹Ÿä¸èƒ½å¼ºè¡Œè®©å…¶ä»–äººç”¨ä½ å–œæ¬¢çš„æ–¹å¼æäº¤â€”â€”ä½ åªèƒ½é¼“åŠ±ä»–ä»¬è¿™æ ·åšã€‚")]),s._v(" "),a("p",[s._v("åœ¨å¼€å‘å›¢é˜Ÿä¸­ç»´æŠ¤é’©å­æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œå› ä¸º "),a("code",[s._v(".git/hooks")]),s._v(" ç›®å½•ä¸éšä½ çš„é¡¹ç›®ä¸€èµ·æ‹·è´ï¼Œä¹Ÿä¸å—ç‰ˆæœ¬æ§åˆ¶å½±å“ã€‚ä¸€ä¸ªç®€å•çš„è§£å†³åŠæ³•æ˜¯æŠŠä½ çš„é’©å­å­˜åœ¨é¡¹ç›®çš„å®é™…ç›®å½•ä¸­ï¼ˆåœ¨ "),a("code",[s._v(".git")]),s._v(" å¤–ï¼‰ã€‚è¿™æ ·ä½ å°±å¯ä»¥åƒå…¶ä»–æ–‡ä»¶ä¸€æ ·è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ã€‚ä¸ºäº†å®‰è£…é’©å­ï¼Œä½ å¯ä»¥åœ¨ "),a("code",[s._v(".git/hooks")]),s._v(" ä¸­åˆ›å»ºä¸€ä¸ªç¬¦å·é“¾æ¥ï¼Œæˆ–è€…ç®€å•åœ°åœ¨æ›´æ–°åæŠŠå®ƒä»¬å¤åˆ¶åˆ° "),a("code",[s._v(".git/hooks")]),s._v(" ç›®å½•ä¸‹ã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://wac-cdn.atlassian.com/dam/jcr:e068ea71-a552-4d07-9917-49104f4d382e/02.svg",alt:"enter image description here"}})]),s._v(" "),a("p",[s._v("ä½œä¸ºå¤‡é€‰æ–¹æ¡ˆï¼ŒGit åŒæ ·æä¾›äº†ä¸€ä¸ªæ¨¡æ¿ç›®å½•æœºåˆ¶æ¥æ›´ç®€å•åœ°è‡ªåŠ¨å®‰è£…é’©å­ã€‚æ¯æ¬¡ä½ ä½¿ç”¨ "),a("code",[s._v("git init")]),s._v(" æˆ– "),a("code",[s._v("git clone")]),s._v(" æ—¶ï¼Œæ¨¡æ¿ç›®å½•æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•éƒ½ä¼šè¢«å¤åˆ¶åˆ° "),a("code",[s._v(".git")]),s._v(" æ–‡ä»¶å¤¹ã€‚")]),s._v(" "),a("p",[s._v("æ‰€æœ‰çš„ä¸‹é¢è®²åˆ°çš„æœ¬åœ°é’©å­éƒ½å¯ä»¥è¢«æ›´æ”¹æˆ–è€…å½»åº•åˆ é™¤ï¼Œåªè¦ä½ æ˜¯é¡¹ç›®çš„å‚ä¸è€…ã€‚è¿™å®Œå…¨å–å†³äºä½ çš„å›¢é˜Ÿæˆå‘˜æƒ³ä¸æƒ³ç”¨è¿™ä¸ªé’©å­ã€‚æ‰€ä»¥è®°ä½ï¼Œæœ€å¥½æŠŠ Git é’©å­å½“æˆä¸€ä¸ªæ–¹ä¾¿çš„å¼€å‘è€…å·¥å…·è€Œä¸æ˜¯ä¸€ä¸ªä¸¥æ ¼å¼ºåˆ¶çš„å¼€å‘è§„èŒƒã€‚")]),s._v(" "),a("p",[s._v("ä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æœåŠ¡ç«¯é’©å­æ¥æ‹’ç»æ²¡æœ‰éµå®ˆè§„èŒƒçš„æäº¤æ˜¯å®Œå…¨å¯è¡Œçš„ã€‚åé¢æˆ‘ä»¬ä¼šå†è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚")]),s._v(" "),a("h2",{attrs:{id:"æœ¬åœ°é’©å­"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æœ¬åœ°é’©å­","aria-hidden":"true"}},[s._v("#")]),s._v(" æœ¬åœ°é’©å­")]),s._v(" "),a("p",[s._v("æœ¬åœ°é’©å­åªå½±å“å®ƒä»¬æ‰€åœ¨çš„ä»“åº“ã€‚å½“ä½ åœ¨è¯»è¿™ä¸€èŠ‚çš„æ—¶å€™ï¼Œè®°ä½å¼€å‘è€…å¯ä»¥ä¿®æ”¹ä»–ä»¬æœ¬åœ°çš„é’©å­ï¼Œæ‰€ä»¥ä¸è¦ç”¨å®ƒä»¬æ¥æ¨è¡Œå¼ºåˆ¶çš„æäº¤è§„èŒƒã€‚ä¸è¿‡ï¼Œå®ƒä»¬ç¡®å®å¯ä»¥è®©å¼€å‘è€…æ›´æ˜“äºæ¥å—è¿™äº›è§„èŒƒã€‚")]),s._v(" "),a("p",[s._v("åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¼šæ¢è®¨ 6 ä¸ªæœ€æœ‰ç”¨çš„æœ¬åœ°é’©å­ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("pre-commit")]),s._v(" "),a("li",[s._v("prepare-commit-msg")]),s._v(" "),a("li",[s._v("commit-msg")]),s._v(" "),a("li",[s._v("post-commit")]),s._v(" "),a("li",[s._v("post-checkout")]),s._v(" "),a("li",[s._v("pre-rebase")])]),s._v(" "),a("p",[s._v("å‰å››ä¸ªé’©å­è®©ä½ ä»‹å…¥å®Œæ•´çš„æäº¤ç”Ÿå‘½å‘¨æœŸï¼Œåä¸¤ä¸ªå…è®¸ä½ æ‰§è¡Œä¸€äº›é¢å¤–çš„æ“ä½œï¼Œåˆ†åˆ«ä¸º "),a("code",[s._v("git checkout")]),s._v(" å’Œ "),a("code",[s._v("git rebase")]),s._v(" çš„å®‰å…¨æ£€æŸ¥ã€‚")]),s._v(" "),a("p",[s._v("æ‰€æœ‰å¸¦ "),a("code",[s._v("pre-")]),s._v(" çš„é’©å­å…è®¸ä½ ä¿®æ”¹å³å°†å‘ç”Ÿçš„æ“ä½œï¼Œè€Œå¸¦ "),a("code",[s._v("post-")]),s._v(" çš„é’©å­åªèƒ½ç”¨äºé€šçŸ¥ã€‚")]),s._v(" "),a("p",[s._v("æˆ‘ä»¬ä¹Ÿä¼šçœ‹åˆ°å¤„ç†é’©å­çš„å‚æ•°å’Œç”¨åº•å±‚ Git å‘½ä»¤è·å–ä»“åº“ä¿¡æ¯çš„å®ç”¨æŠ€å·§ã€‚")]),s._v(" "),a("h3",{attrs:{id:"pre-commit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pre-commit","aria-hidden":"true"}},[s._v("#")]),s._v(" pre-commit")]),s._v(" "),a("p",[a("code",[s._v("pre-commit")]),s._v(" è„šæœ¬åœ¨æ¯æ¬¡ä½ è¿è¡Œ "),a("code",[s._v("git commit")]),s._v(" å‘½ä»¤æ—¶ï¼ŒGit å‘ä½ è¯¢é—®æäº¤ä¿¡æ¯æˆ–è€…ç”Ÿäº§æäº¤å¯¹è±¡æ—¶è¢«æ‰§è¡Œã€‚ä½ å¯ä»¥ç”¨è¿™ä¸ªé’©å­æ¥æ£€æŸ¥å³å°†è¢«æäº¤çš„ä»£ç å¿«ç…§ã€‚æ¯”å¦‚è¯´ï¼Œä½ å¯ä»¥è¿è¡Œä¸€äº›è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä¿è¯è¿™ä¸ªæäº¤ä¸ä¼šç ´åç°æœ‰çš„åŠŸèƒ½ã€‚")]),s._v(" "),a("p",[a("code",[s._v("pre-commit")]),s._v(" ä¸éœ€è¦ä»»ä½•å‚æ•°ï¼Œä»¥é0çŠ¶æ€é€€å‡ºæ—¶å°†æ”¾å¼ƒæ•´ä¸ªæäº¤ã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç®€åŒ–äº†çš„ï¼ˆå’Œæ›´è¯¦ç»†çš„ï¼‰å†…ç½® "),a("code",[s._v("pre-commit")]),s._v(" é’©å­ã€‚åªè¦æ£€æµ‹åˆ°ä¸ä¸€è‡´æ—¶è„šæœ¬å°±æ”¾å¼ƒè¿™ä¸ªæäº¤ï¼Œå°±åƒ "),a("code",[s._v("git diff-index")]),s._v(" å‘½ä»¤å®šä¹‰çš„é‚£æ ·ï¼ˆåªè¦è¯å°¾æœ‰ç©ºç™½å­—ç¬¦ã€åªæœ‰ç©ºç™½å­—ç¬¦çš„è¡Œã€è¡Œé¦–ä¸€ä¸ª tab åç´§æ¥ä¸€ä¸ªç©ºæ ¼å°±è¢«è®¤ä¸ºé”™è¯¯ï¼‰ã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('#!/bin/sh\n\n# æ£€æŸ¥è¿™æ˜¯å¦æ˜¯åˆå§‹æäº¤\nif git rev-parse --verify HEAD >/dev/null 2>&1\nthen\n    echo "pre-commit: About to create a new commit..."\n    against=HEAD\nelse\n    echo "pre-commit: About to create the first commit..."\n    against=4b825dc642cb6eb9a060e54bf8d69288fbee4904\nfi\n\n# ä½¿ç”¨git diff-indexæ¥æ£€æŸ¥ç©ºç™½å­—ç¬¦é”™è¯¯\necho "pre-commit: Testing for whitespace errors..."\nif ! git diff-index --check --cached $against\nthen\n    echo "pre-commit: Aborting commit due to whitespace errors"\n    exit 1\nelse\n    echo "pre-commit: No whitespace errors :)"\n    exit 0\nfi\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("p",[s._v("ä½¿ç”¨ "),a("code",[s._v("git diff-index")]),s._v(" æ—¶æˆ‘ä»¬è¦æŒ‡å‡ºå’Œå“ªæ¬¡æäº¤è¿›è¡Œæ¯”è¾ƒã€‚ä¸€èˆ¬æ¥è¯´æ˜¯ HEADï¼Œä½† HEAD åœ¨åˆ›å»ºç¬¬ä¸€æ¬¡æäº¤æ—¶ä¸å­˜åœ¨ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªä»»åŠ¡æ˜¯è§£å†³è¿™ä¸ªæç«¯æƒ…å½¢ã€‚æˆ‘ä»¬é€šè¿‡ "),a("code",[s._v("git rev-parse --verify")]),s._v(" æ¥æ£€æŸ¥ HEAD æ˜¯å¦æ˜¯ä¸€ä¸ªåˆæ³•çš„å¼•ç”¨ã€‚"),a("code",[s._v(">/dev/null 2>&1")]),s._v(" è¿™éƒ¨åˆ†å±è”½äº† "),a("code",[s._v("git rev-parse")]),s._v(" ä»»ä½•è¾“å‡ºã€‚HEAD æˆ–è€…ä¸€ä¸ªæ–°çš„æäº¤å¯¹è±¡è¢«å‚¨å­˜åœ¨ "),a("code",[s._v("against")]),s._v(" å˜é‡ä¸­ä¾› "),a("code",[s._v("git diff-index")]),s._v(" ä½¿ç”¨ã€‚"),a("code",[s._v("4b825d...")]),s._v(" è¿™ä¸ªå“ˆå¸Œå­—ä¸²ä»£è¡¨ä¸€ä¸ªç©ºç™½æäº¤çš„ IDã€‚")]),s._v(" "),a("p",[a("code",[s._v("git diff-index --cached")]),s._v(" å‘½ä»¤å°†æäº¤å’Œç¼“å­˜åŒºæ¯”è¾ƒã€‚é€šè¿‡ä¼ å…¥ "),a("code",[s._v("-check")]),s._v(" é€‰é¡¹ï¼Œæˆ‘ä»¬è¦æ±‚å®ƒåœ¨æ›´æ”¹å¼•å…¥ç©ºç™½å­—ç¬¦é”™è¯¯æ—¶è­¦å‘Šæˆ‘ä»¬ã€‚å¦‚æœå®ƒè¿™ä¹ˆåšäº†ï¼Œæˆ‘ä»¬è¿”å›çŠ¶æ€1æ¥æ”¾å¼ƒè¿™æ¬¡æäº¤ï¼Œå¦åˆ™è¿”å›çŠ¶æ€ 0ï¼Œæäº¤å·¥ä½œæµæ­£å¸¸è¿›è¡Œã€‚")]),s._v(" "),a("p",[s._v("è¿™åªæ˜¯ "),a("code",[s._v("pre-commit")]),s._v(" çš„å…¶ä¸­ä¸€ä¸ªä¾‹å­ã€‚å®ƒæ°å¥½ä½¿ç”¨äº†å·²æœ‰çš„ Git å‘½ä»¤æ¥æ ¹æ®æäº¤å¸¦æ¥çš„æ›´æ”¹è¿›è¡Œæµ‹è¯•ï¼Œä½†ä½ å¯ä»¥åœ¨ "),a("code",[s._v("pre-commit")]),s._v(" ä¸­åšä»»ä½•ä½ æƒ³åšçš„äº‹ï¼Œæ¯”å¦‚æ‰§è¡Œå…¶å®ƒè„šæœ¬ã€è¿è¡Œç¬¬ä¸‰æ–¹æµ‹è¯•é›†ã€ç”¨ Lint æ£€æŸ¥ä»£ç é£æ ¼ã€‚")]),s._v(" "),a("h3",{attrs:{id:"prepare-commit-msg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prepare-commit-msg","aria-hidden":"true"}},[s._v("#")]),s._v(" prepare-commit-msg")]),s._v(" "),a("p",[a("code",[s._v("prepare-commit-msg")]),s._v(" é’©å­åœ¨ "),a("code",[s._v("pre-commit")]),s._v(" é’©å­åœ¨æ–‡æœ¬ç¼–è¾‘å™¨ä¸­ç”Ÿæˆæäº¤ä¿¡æ¯ä¹‹åè¢«è°ƒç”¨ã€‚è¿™è¢«ç”¨æ¥æ–¹ä¾¿åœ°ä¿®æ”¹è‡ªåŠ¨ç”Ÿæˆçš„ squash æˆ– merge æäº¤ã€‚")]),s._v(" "),a("p",[a("code",[s._v("prepare-commit-msg")]),s._v(" è„šæœ¬çš„å‚æ•°å¯ä»¥æ˜¯ä¸‹åˆ—ä¸‰ä¸ªï¼š")]),s._v(" "),a("ul",[a("li",[s._v("åŒ…å«æäº¤ä¿¡æ¯çš„æ–‡ä»¶åã€‚ä½ å¯ä»¥åœ¨åŸåœ°æ›´æ”¹æäº¤ä¿¡æ¯ã€‚")]),s._v(" "),a("li",[s._v("æäº¤ç±»å‹ã€‚å¯ä»¥æ˜¯ä¿¡æ¯ï¼ˆ"),a("code",[s._v("-m")]),s._v(" æˆ– "),a("code",[s._v("-F")]),s._v(" é€‰é¡¹ï¼‰ï¼Œæ¨¡æ¿ï¼ˆ"),a("code",[s._v("-t")]),s._v(" é€‰é¡¹ï¼‰ï¼Œmergeï¼ˆå¦‚æœæ˜¯ä¸ªåˆå¹¶æäº¤ï¼‰æˆ– squashï¼ˆå¦‚æœè¿™ä¸ªæäº¤æ’å…¥äº†å…¶ä»–æäº¤ï¼‰ã€‚")]),s._v(" "),a("li",[s._v("ç›¸å…³æäº¤çš„ SHA1 å“ˆå¸Œå­—ä¸²ã€‚åªæœ‰å½“ "),a("code",[s._v("-c")]),s._v("ã€"),a("code",[s._v("-C")]),s._v(" æˆ– "),a("code",[s._v("--amend")]),s._v(" é€‰é¡¹å‡ºç°æ—¶æ‰éœ€è¦ã€‚")])]),s._v(" "),a("p",[s._v("å’Œ "),a("code",[s._v("pre-commit")]),s._v(" ä¸€æ ·ï¼Œä»¥é0çŠ¶æ€é€€å‡ºä¼šæ”¾å¼ƒæäº¤ã€‚")]),s._v(" "),a("p",[s._v("æˆ‘ä»¬å·²ç»çœ‹è¿‡ä¸€ä¸ªä¿®æ”¹æäº¤ä¿¡æ¯çš„ç®€å•ä¾‹å­ï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ›´æœ‰ç”¨çš„è„šæœ¬ã€‚ä½¿ç”¨ issue è·Ÿè¸ªå™¨æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸åœ¨å•ç‹¬çš„åˆ†æ”¯ä¸Šå¤„ç† issueã€‚å¦‚æœä½ åœ¨åˆ†æ”¯åä¸­åŒ…å«äº† issue ç¼–å·ï¼Œä½ å¯ä»¥ä½¿ç”¨ "),a("code",[s._v("prepare-commit-msg")]),s._v(" é’©å­æ¥è‡ªåŠ¨åœ°å°†å®ƒåŒ…æ‹¬åœ¨é‚£ä¸ªåˆ†æ”¯çš„æ¯ä¸ªæäº¤ä¿¡æ¯ä¸­ã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#!/usr/bin/env python\n\nimport sys, os, re\nfrom subprocess import check_output\n\n# æ”¶é›†å‚æ•°\ncommit_msg_filepath = sys.argv[1]\nif len(sys.argv) > 2:\n    commit_type = sys.argv[2]\nelse:\n    commit_type = ''\nif len(sys.argv) > 3:\n    commit_hash = sys.argv[3]\nelse:\n    commit_hash = ''\n\nprint \"prepare-commit-msg: File: %s\\nType: %s\\nHash: %s\" % (commit_msg_filepath, commit_type, commit_hash)\n\n# æ£€æµ‹æˆ‘ä»¬æ‰€åœ¨çš„åˆ†æ”¯\nbranch = check_output(['git', 'symbolic-ref', '--short', 'HEAD']).strip()\nprint \"prepare-commit-msg: On branch '%s'\" % branch\n\n# ç”¨issueç¼–å·ç”Ÿæˆæäº¤ä¿¡æ¯\nif branch.startswith('issue-'):\n    print \"prepare-commit-msg: Oh hey, it's an issue branch.\"\n    result = re.match('issue-(.*)', branch)\n    issue_number = result.group(1)\n\n    with open(commit_msg_filepath, 'r+') as f:\n        content = f.read()\n        f.seek(0, 0)\n        f.write(\"ISSUE-%s %s\" % (issue_number, content))\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br")])]),a("p",[s._v("é¦–å…ˆï¼Œä¸Šé¢çš„ "),a("code",[s._v("prepare-commit-msg")]),s._v(" é’©å­å‘Šè¯‰ä½ å¦‚ä½•æ”¶é›†ä¼ å…¥è„šæœ¬çš„æ‰€æœ‰å‚æ•°ã€‚æ¥ä¸‹æ¥ï¼Œå®ƒè°ƒç”¨äº† "),a("code",[s._v("git symbolic-ref --short HEAD")]),s._v(" æ¥è·å–å¯¹åº” HEAD çš„åˆ†æ”¯åã€‚å¦‚æœåˆ†æ”¯åä»¥ "),a("code",[s._v("issue-")]),s._v(" å¼€å¤´ï¼Œå®ƒä¼šé‡å†™æäº¤ä¿¡æ¯æ–‡ä»¶ï¼Œåœ¨ç¬¬ä¸€è¡ŒåŠ ä¸Š issue ç¼–å·ã€‚æ¯”å¦‚ä½ çš„åˆ†æ”¯å "),a("code",[s._v("issue-224")]),s._v("ï¼Œä¸‹é¢çš„æäº¤ä¿¡æ¯å°†ä¼šç”Ÿæˆï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ISSUE-224\n\n# Please enter the commit message for your changes. Lines starting\n# with '#' will be ignored, and an empty message aborts the commit.\n# On branch issue-224\n# Changes to be committed:\n#   modified:   test.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("æœ‰ä¸€ç‚¹è¦è®°ä½çš„æ˜¯å³ä½¿ç”¨æˆ·ç”¨ "),a("code",[s._v("-m")]),s._v(" ä¼ å…¥æäº¤ä¿¡æ¯ï¼Œ"),a("code",[s._v("prepare-commit-msg")]),s._v(" ä¹Ÿä¼šè¿è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šé¢è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨æ’å…¥ "),a("code",[s._v("ISSUE-[#]")]),s._v(" å­—ç¬¦ä¸²ï¼Œè€Œç”¨æˆ·æ— æ³•æ›´æ”¹ã€‚ä½ å¯ä»¥æ£€æŸ¥ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¦æ˜¯æäº¤ç±»å‹æ¥å¤„ç†è¿™ä¸ªæƒ…å†µã€‚")]),s._v(" "),a("p",[s._v("ä½†æ˜¯ï¼Œå¦‚æœæ²¡æœ‰ "),a("code",[s._v("-m")]),s._v(" é€‰é¡¹ï¼Œ"),a("code",[s._v("prepare-commit-msg")]),s._v(" é’©å­å…è®¸ç”¨æˆ·ä¿®æ”¹ç”Ÿæˆåçš„æäº¤ä¿¡æ¯ã€‚æ‰€ä»¥è„šæœ¬çš„ç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿ï¼Œè€Œä¸æ˜¯æ¨è¡Œå¼ºåˆ¶çš„æäº¤ä¿¡æ¯è§„èŒƒã€‚å¦‚æœä½ è¦è¿™ä¹ˆåšï¼Œä½ éœ€è¦ä¸‹ä¸€èŠ‚æ‰€è®²çš„ "),a("code",[s._v("commit-msg")]),s._v(" é’©å­ã€‚")]),s._v(" "),a("h3",{attrs:{id:"commit-msg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commit-msg","aria-hidden":"true"}},[s._v("#")]),s._v(" commit-msg")]),s._v(" "),a("p",[a("code",[s._v("commit-msg")]),s._v(" é’©å­å’Œ "),a("code",[s._v("prepare-commit-msg")]),s._v(" é’©å­å¾ˆåƒï¼Œä½†å®ƒä¼šåœ¨ç”¨æˆ·è¾“å…¥æäº¤ä¿¡æ¯ä¹‹åè¢«è°ƒç”¨ã€‚è¿™é€‚åˆç”¨æ¥æé†’å¼€å‘è€…ä»–ä»¬çš„æäº¤ä¿¡æ¯ä¸ç¬¦åˆä½ å›¢é˜Ÿçš„è§„èŒƒã€‚")]),s._v(" "),a("p",[s._v("ä¼ å…¥è¿™ä¸ªé’©å­å”¯ä¸€çš„å‚æ•°æ˜¯åŒ…å«æäº¤ä¿¡æ¯çš„æ–‡ä»¶åã€‚å¦‚æœå®ƒä¸å–œæ¬¢ç”¨æˆ·è¾“å…¥çš„æäº¤ä¿¡æ¯ï¼Œå®ƒå¯ä»¥åœ¨åŸåœ°ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ï¼ˆå’Œ "),a("code",[s._v("prepare-commit-msg")]),s._v(" ä¸€æ ·ï¼‰ï¼Œæˆ–è€…å®ƒä¼šä»¥é 0 çŠ¶æ€é€€å‡ºï¼Œæ”¾å¼ƒè¿™ä¸ªæäº¤ã€‚")]),s._v(" "),a("p",[s._v("æ¯”å¦‚è¯´ï¼Œä¸‹é¢è¿™ä¸ªè„šæœ¬ç¡®è®¤ç”¨æˆ·æ²¡æœ‰åˆ é™¤ "),a("code",[s._v("prepare-commit-msg")]),s._v(" è„šæœ¬è‡ªåŠ¨ç”Ÿæˆçš„ "),a("code",[s._v("ISSUE-[#]")]),s._v(" å­—ç¬¦ä¸²ã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#!/usr/bin/env python\n\nimport sys, os, re\nfrom subprocess import check_output\n\n# æ”¶é›†å‚æ•°\ncommit_msg_filepath = sys.argv[1]\n\n# æ£€æµ‹æ‰€åœ¨çš„åˆ†æ”¯\nbranch = check_output(['git', 'symbolic-ref', '--short', 'HEAD']).strip()\nprint \"commit-msg: On branch '%s'\" % branch\n\n# æ£€æµ‹æäº¤ä¿¡æ¯ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªissueæäº¤\nif branch.startswith('issue-'):\n    print \"commit-msg: Oh hey, it's an issue branch.\"\n    result = re.match('issue-(.*)', branch)\n    issue_number = result.group(1)\n    required_message = \"ISSUE-%s\" % issue_number\n\n    with open(commit_msg_filepath, 'r') as f:\n        content = f.read()\n        if not content.startswith(required_message):\n            print \"commit-msg: ERROR! The commit message must start with '%s'\" % required_message\n            sys.exit(1)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("p",[s._v("è™½ç„¶ç”¨æˆ·æ¯æ¬¡åˆ›å»ºæäº¤æ—¶ï¼Œè¿™ä¸ªè„šæœ¬éƒ½ä¼šè¿è¡Œã€‚ä½†ä½ è¿˜æ˜¯åº”è¯¥é¿å…åšæ£€æŸ¥æäº¤ä¿¡æ¯ä¹‹å¤–çš„äº‹æƒ…ã€‚å¦‚æœä½ éœ€è¦é€šçŸ¥å…¶ä»–æœåŠ¡ä¸€ä¸ªå¿«ç…§å·²ç»è¢«æäº¤äº†ï¼Œä½ åº”è¯¥ä½¿ç”¨ "),a("code",[s._v("post-commit")]),s._v(" è¿™ä¸ªé’©å­ã€‚")]),s._v(" "),a("h3",{attrs:{id:"post-commit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#post-commit","aria-hidden":"true"}},[s._v("#")]),s._v(" post-commit")]),s._v(" "),a("p",[a("code",[s._v("post-commit")]),s._v(" é’©å­åœ¨ "),a("code",[s._v("commit-msg")]),s._v(" é’©å­ä¹‹åç«‹å³è¢«è¿è¡Œ ã€‚å®ƒæ— æ³•æ›´æ”¹ "),a("code",[s._v("git commit")]),s._v(" çš„ç»“æœï¼Œæ‰€ä»¥è¿™ä¸»è¦ç”¨äºé€šçŸ¥ç”¨é€”ã€‚")]),s._v(" "),a("p",[s._v("è¿™ä¸ªè„šæœ¬æ²¡æœ‰å‚æ•°ï¼Œè€Œä¸”é€€å‡ºçŠ¶æ€ä¸ä¼šå½±å“æäº¤ã€‚å¯¹äºå¤§å¤šæ•° "),a("code",[s._v("post-commit")]),s._v(" è„šæœ¬æ¥è¯´ï¼Œä½ åªæ˜¯æƒ³è®¿é—®ä½ åˆšåˆšåˆ›å»ºçš„æäº¤ã€‚ä½ å¯ä»¥ç”¨ "),a("code",[s._v("git rev-parse HEAD")]),s._v(" æ¥è·å¾—æœ€è¿‘ä¸€æ¬¡æäº¤çš„SHA1å“ˆå¸Œå­—ä¸²ï¼Œæˆ–è€…ä½ å¯ä»¥ç”¨ "),a("code",[s._v("git log -l HEAD")]),s._v(" è·å–å®Œæ•´çš„ä¿¡æ¯ã€‚")]),s._v(" "),a("p",[s._v("æ¯”å¦‚è¯´ï¼Œå¦‚æœä½ éœ€è¦æ¯æ¬¡æäº¤å¿«ç…§æ—¶å‘è€æ¿å‘å°é‚®ä»¶ï¼ˆä¹Ÿè®¸å¯¹äºå¤§å¤šæ•°å·¥ä½œæµæ¥è¯´è¿™ä¸æ˜¯ä¸ªå¥½çš„æƒ³æ³•ï¼‰ï¼Œä½ å¯ä»¥åŠ ä¸Šä¸‹é¢è¿™ä¸ª "),a("code",[s._v("post-commit")]),s._v(" é’©å­ã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#!/usr/bin/env python\n\nimport smtplib\nfrom email.mime.text import MIMEText\nfrom subprocess import check_output\n\n# è·å¾—æ–°æäº¤çš„git log --statè¾“å‡º\nlog = check_output(['git', 'log', '-1', '--stat', 'HEAD'])\n\n# åˆ›å»ºä¸€ä¸ªçº¯æ–‡æœ¬çš„é‚®ä»¶å†…å®¹\nmsg = MIMEText(\"Look, I'm actually doing some work:\\n\\n%s\" % log)\n\nmsg['Subject'] = 'Git post-commit hook notification'\nmsg['From'] = 'mary@example.com'\nmsg['To'] = 'boss@example.com'\n\n# å‘é€ä¿¡æ¯\nSMTP_SERVER = 'smtp.example.com'\nSMTP_PORT = 587\n\nsession = smtplib.SMTP(SMTP_SERVER, SMTP_PORT)\nsession.ehlo()\nsession.starttls()\nsession.ehlo()\nsession.login(msg['From'], 'secretPassword')\n\nsession.sendmail(msg['From'], msg['To'], msg.as_string())\nsession.quit()\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br")])]),a("p",[s._v("ä½ è™½ç„¶å¯ä»¥ç”¨ "),a("code",[s._v("post-commit")]),s._v(" æ¥è§¦å‘æœ¬åœ°çš„æŒç»­é›†æˆç³»ç»Ÿï¼Œä½†å¤§å¤šæ•°æ—¶å€™ä½ æƒ³ç”¨çš„æ˜¯ "),a("code",[s._v("post-receive")]),s._v(" è¿™ä¸ªé’©å­ã€‚å®ƒè¿è¡Œåœ¨æœåŠ¡ç«¯è€Œä¸æ˜¯ç”¨æˆ·çš„æœ¬åœ°æœºå™¨ï¼Œå®ƒåŒæ ·åœ¨ä»»ä½•å¼€å‘è€…æ¨é€ä»£ç æ—¶è¿è¡Œã€‚é‚£é‡Œæ›´é€‚åˆä½ è¿›è¡ŒæŒç»­é›†æˆã€‚")]),s._v(" "),a("h3",{attrs:{id:"post-checkout"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#post-checkout","aria-hidden":"true"}},[s._v("#")]),s._v(" post-checkout")]),s._v(" "),a("p",[a("code",[s._v("post-checkout")]),s._v(" é’©å­å’Œ "),a("code",[s._v("post-commit")]),s._v(" é’©å­å¾ˆåƒï¼Œä½†å®ƒåœ¨ä½ ç”¨ "),a("code",[s._v("git checkout")]),s._v(" æŸ¥çœ‹å¼•ç”¨çš„æ—¶å€™è¢«è°ƒç”¨ã€‚è¿™æ˜¯ç”¨æ¥æ¸…ç†ä½ çš„å·¥ä½œç›®å½•ä¸­å¯èƒ½ä¼šä»¤äººå›°æƒ‘çš„ç”Ÿæˆæ–‡ä»¶ã€‚")]),s._v(" "),a("p",[s._v("è¿™ä¸ªé’©å­æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œå®ƒçš„è¿”å›çŠ¶æ€ä¸å½±å“ "),a("code",[s._v("git checkout")]),s._v(" å‘½ä»¤ã€‚")]),s._v(" "),a("ul",[a("li",[s._v("HEAD å‰ä¸€æ¬¡æäº¤çš„å¼•ç”¨")]),s._v(" "),a("li",[s._v("æ–°çš„ HEAD çš„å¼•ç”¨")]),s._v(" "),a("li",[s._v("1 æˆ– 0ï¼Œåˆ†åˆ«ä»£è¡¨æ˜¯åˆ†æ”¯ checkout è¿˜æ˜¯æ–‡ä»¶ checkoutã€‚")])]),s._v(" "),a("p",[s._v("Python ç¨‹åºå‘˜ç»å¸¸é‡åˆ°çš„é—®é¢˜æ˜¯åˆ‡æ¢åˆ†æ”¯åé‚£äº›ä¹‹å‰ç”Ÿæˆçš„ "),a("code",[s._v(".pyc")]),s._v(" æ–‡ä»¶ã€‚è§£é‡Šå™¨æœ‰æ—¶ä½¿ç”¨ "),a("code",[s._v(".pyc")]),s._v(" è€Œä¸æ˜¯ "),a("code",[s._v(".py")]),s._v(" æ–‡ä»¶ã€‚ä¸ºäº†é¿å…æ­§ä¹‰ï¼Œä½ å¯ä»¥åœ¨æ¯æ¬¡ç”¨ "),a("code",[s._v("post-checkout")]),s._v(" åˆ‡æ¢åˆ°æ–°çš„åˆ†æ”¯çš„æ—¶å€™ï¼Œåˆ é™¤æ‰€æœ‰ "),a("code",[s._v(".pyc")]),s._v(" æ–‡ä»¶ã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#!/usr/bin/env python\n\nimport sys, os, re\nfrom subprocess import check_output\n\n# æ”¶é›†å‚æ•°\nprevious_head = sys.argv[1]\nnew_head = sys.argv[2]\nis_branch_checkout = sys.argv[3]\n\nif is_branch_checkout == \"0\":\n    print \"post-checkout: This is a file checkout. Nothing to do.\"\n    sys.exit(0)\n\nprint \"post-checkout: Deleting all '.pyc' files in working directory\"\nfor root, dirs, files in os.walk('.'):\n    for filename in files:\n        ext = os.path.splitext(filename)[1]\n        if ext == '.pyc':\n            os.unlink(os.path.join(root, filename))\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("p",[s._v("é’©å­è„šæœ¬å½“å‰çš„å·¥ä½œç›®å½•æ€»æ˜¯ä½äºä»“åº“çš„æ ¹ç›®å½•ä¸‹ï¼Œæ‰€ä»¥ "),a("code",[s._v("os.walk('.')")]),s._v(" è°ƒç”¨éå†äº†ä»“åº“ä¸­æ‰€æœ‰æ–‡ä»¶ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ£€æŸ¥å®ƒçš„æ‹“å±•åï¼Œå¦‚æœæ˜¯ "),a("code",[s._v(".pyc")]),s._v(" å°±åˆ é™¤å®ƒã€‚")]),s._v(" "),a("p",[s._v("é€šè¿‡ "),a("code",[s._v("post-checkout")]),s._v(" é’©å­ï¼Œä½ è¿˜å¯ä»¥æ ¹æ®ä½ åˆ‡æ¢çš„åˆ†æ”¯æ¥æ¥æ›´æ”¹å·¥ä½œç›®å½•ã€‚æ¯”å¦‚è¯´ï¼Œä½ å¯ä»¥åœ¨ä»£ç åº“å¤–é¢ä½¿ç”¨ä¸€ä¸ªæ’ä»¶åˆ†æ”¯æ¥å‚¨å­˜ä½ æ‰€æœ‰çš„æ’ä»¶ã€‚å¦‚æœè¿™äº›æ’ä»¶éœ€è¦å¾ˆå¤šäºŒè¿›åˆ¶æ–‡ä»¶è€Œå…¶ä»–åˆ†æ”¯ä¸éœ€è¦ï¼Œä½ å¯ä»¥é€‰æ‹©åªåœ¨æ’ä»¶åˆ†æ”¯ä¸Š buildã€‚")]),s._v(" "),a("h3",{attrs:{id:"pre-rebase"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pre-rebase","aria-hidden":"true"}},[s._v("#")]),s._v(" pre-rebase")]),s._v(" "),a("p",[a("code",[s._v("pre-rebase")]),s._v(" é’©å­åœ¨ "),a("code",[s._v("git rebase")]),s._v(" å‘ç”Ÿæ›´æ”¹ä¹‹å‰è¿è¡Œï¼Œç¡®ä¿ä¸ä¼šæœ‰ä»€ä¹ˆç³Ÿç³•çš„äº‹æƒ…å‘ç”Ÿã€‚")]),s._v(" "),a("p",[s._v("è¿™ä¸ªé’©å­æœ‰ä¸¤ä¸ªå‚æ•°ï¼šfork ä¹‹å‰çš„ä¸Šæ¸¸åˆ†æ”¯ï¼Œå°†è¦ rebase çš„ä¸‹æ¸¸åˆ†æ”¯ã€‚å¦‚æœ rebase å½“å‰åˆ†æ”¯åˆ™ç¬¬äºŒä¸ªå‚æ•°ä¸ºç©ºã€‚ä»¥é 0 çŠ¶æ€é€€å‡ºä¼šæ”¾å¼ƒè¿™æ¬¡ rebaseã€‚")]),s._v(" "),a("p",[s._v("æ¯”å¦‚è¯´ï¼Œå¦‚æœä½ æƒ³å½»åº•ç¦ç”¨ rebase æ“ä½œï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ "),a("code",[s._v("pre-rebase")]),s._v(" è„šæœ¬ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('#!/bin/sh\n\n# ç¦ç”¨æ‰€æœ‰rebase\necho "pre-rebase: Rebasing is dangerous. Don\'t do it."\nexit 1\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("æ¯æ¬¡è¿è¡Œ "),a("code",[s._v("git rebase")]),s._v("ï¼Œä½ éƒ½ä¼šçœ‹åˆ°ä¸‹é¢çš„ä¿¡æ¯ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("pre-rebase: Rebasing is dangerous. Don't do it.\nThe pre-rebase hook refused to rebase.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("å†…ç½®çš„ "),a("code",[s._v("pre-rebase.sample")]),s._v(" è„šæœ¬æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­ã€‚å®ƒåœ¨ä½•æ—¶é˜»æ­¢ rebase è¿™æ–¹é¢æ›´åŠ æ™ºèƒ½ã€‚å®ƒä¼šæ£€æŸ¥ä½ å½“å‰çš„åˆ†æ”¯æ˜¯å¦å·²ç»åˆå¹¶åˆ°äº†ä¸‹ä¸€ä¸ªåˆ†æ”¯ä¸­å»ï¼ˆä¹Ÿå°±æ˜¯ä¸»åˆ†æ”¯ï¼‰ã€‚å¦‚æœæ˜¯çš„è¯ï¼Œrebase å¯èƒ½ä¼šé‡åˆ°é—®é¢˜ï¼Œè„šæœ¬ä¼šæ”¾å¼ƒè¿™æ¬¡ rebaseã€‚")]),s._v(" "),a("h1",{attrs:{id:"æœåŠ¡ç«¯é’©å­"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æœåŠ¡ç«¯é’©å­","aria-hidden":"true"}},[s._v("#")]),s._v(" æœåŠ¡ç«¯é’©å­")]),s._v(" "),a("p",[s._v("æœåŠ¡ç«¯é’©å­å’Œæœ¬åœ°é’©å­å‡ ä¹ä¸€æ ·ï¼Œåªä¸è¿‡å®ƒä»¬å­˜åœ¨äºæœåŠ¡ç«¯çš„ä»“åº“ä¸­ï¼ˆæ¯”å¦‚è¯´ä¸­å¿ƒä»“åº“ï¼Œæˆ–è€…å¼€å‘è€…çš„å…¬å…±ä»“åº“ï¼‰ã€‚å½“å’Œå®˜æ–¹ä»“åº“è¿æ¥æ—¶ï¼Œå…¶ä¸­ä¸€äº›å¯ä»¥ç”¨æ¥æ‹’ç»ä¸€äº›ä¸ç¬¦åˆè§„èŒƒçš„æäº¤ã€‚")]),s._v(" "),a("p",[s._v("è¿™èŠ‚ä¸­æˆ‘ä»¬è¦è®¨è®ºä¸‹é¢ä¸‰ä¸ªæœåŠ¡ç«¯é’©å­ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("pre-receive")]),s._v(" "),a("li",[s._v("update")]),s._v(" "),a("li",[s._v("post-receive")])]),s._v(" "),a("p",[s._v("è¿™äº›é’©å­éƒ½å…è®¸ä½ å¯¹ "),a("code",[s._v("git push")]),s._v(" çš„ä¸åŒé˜¶æ®µåšå‡ºå“åº”ã€‚")]),s._v(" "),a("p",[s._v("æœåŠ¡ç«¯é’©å­çš„è¾“å‡ºä¼šä¼ é€åˆ°å®¢æˆ·ç«¯çš„æ§åˆ¶å°ä¸­ï¼Œæ‰€ä»¥ç»™å¼€å‘è€…å‘é€ä¿¡æ¯æ˜¯å¾ˆå®¹æ˜“çš„ã€‚ä½†ä½ è¦è®°ä½è¿™äº›è„šæœ¬åœ¨ç»“æŸå®Œä¹‹å‰éƒ½ä¸ä¼šè¿”å›æ§åˆ¶å°çš„æ§åˆ¶æƒï¼Œæ‰€ä»¥ä½ è¦å°å¿ƒé‚£äº›é•¿æ—¶é—´è¿è¡Œçš„æ“ä½œã€‚")]),s._v(" "),a("h3",{attrs:{id:"pre-receive"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pre-receive","aria-hidden":"true"}},[s._v("#")]),s._v(" pre-receive")]),s._v(" "),a("p",[a("code",[s._v("pre-receive")]),s._v(" é’©å­åœ¨æœ‰äººç”¨ "),a("code",[s._v("git push")]),s._v(" å‘ä»“åº“æ¨é€ä»£ç æ—¶è¢«æ‰§è¡Œã€‚å®ƒåªå­˜åœ¨äºè¿œç«¯ä»“åº“ä¸­ï¼Œè€Œä¸æ˜¯åŸæ¥çš„ä»“åº“ä¸­ã€‚")]),s._v(" "),a("p",[s._v("è¿™ä¸ªé’©å­åœ¨ä»»æ„å¼•ç”¨è¢«æ›´æ–°å‰è¢«æ‰§è¡Œï¼Œæ‰€ä»¥è¿™æ˜¯å¼ºåˆ¶æ¨è¡Œå¼€å‘è§„èŒƒçš„å¥½åœ°æ–¹ã€‚å¦‚æœä½ ä¸å–œæ¬¢æ¨é€çš„é‚£ä¸ªäººï¼ˆå¤šå¤§ä»‡ = =ï¼‰ï¼Œæäº¤ä¿¡æ¯çš„æ ¼å¼ï¼Œæˆ–è€…æäº¤çš„æ›´æ”¹ï¼Œä½ éƒ½å¯ä»¥æ‹’ç»è¿™æ¬¡æäº¤ã€‚è™½ç„¶ä½ ä¸èƒ½é˜»æ­¢å¼€å‘è€…å†™å‡ºç³Ÿç³•çš„ä»£ç ï¼Œä½†ä½ å¯ä»¥ç”¨ "),a("code",[s._v("pre-receive")]),s._v(" é˜²æ­¢è¿™äº›ä»£ç æµå…¥å®˜æ–¹çš„ä»£ç åº“ã€‚")]),s._v(" "),a("p",[s._v("è¿™ä¸ªè„šæœ¬æ²¡æœ‰å‚æ•°ï¼Œä½†æ¯ä¸€ä¸ªæ¨é€ä¸Šæ¥çš„å¼•ç”¨éƒ½ä¼šä»¥ä¸‹é¢çš„æ ¼å¼ä¼ å…¥è„šæœ¬çš„å•ç‹¬ä¸€è¡Œï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<old-value> <new-value> <ref-name>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("ä½ å¯ä»¥çœ‹åˆ°è¿™ä¸ªé’©å­åšäº†éå¸¸ç®€å•çš„äº‹ï¼Œå°±æ˜¯è¯»å–æ¨é€ä¸Šæ¥çš„å¼•ç”¨å¹¶ä¸”æŠŠå®ƒä»¬æ‰“å°å‡ºæ¥ã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('#!/usr/bin/env python\n\nimport sys\nimport fileinput\n\n# è¯»å–ç”¨æˆ·è¯•å›¾æ›´æ–°çš„æ‰€æœ‰å¼•ç”¨\nfor line in fileinput.input():\n    print "pre-receive: Trying to push ref: %s" % line\n\n# æ”¾å¼ƒæ¨é€\n# sys.exit(1)\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("è¿™å’Œå…¶å®ƒé’©å­ç›¸æ¯”ç•¥å¾®æœ‰äº›ä¸åŒï¼Œå› ä¸ºä¿¡æ¯æ˜¯é€šè¿‡æ ‡å‡†è¾“å…¥è€Œä¸æ˜¯å‘½ä»¤è¡Œä¼ å…¥çš„ã€‚åœ¨è¿œç«¯ä»“åº“çš„ "),a("code",[s._v(".git/hooks")]),s._v(" ä¸­åŠ ä¸Šè¿™ä¸ªè„šæœ¬ï¼Œæ¨é€åˆ° master åˆ†æ”¯ï¼Œä½ ä¼šçœ‹åˆ°ä¸‹é¢è¿™äº›ä¿¡æ¯æ‰“å°å‡ºæ¥ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("b6b36c697eb2d24302f89aa22d9170dfe609855b 85baa88c22b52ddd24d71f05db31f4e46d579095 refs/heads/master\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("ä½ å¯ä»¥ç”¨ SHA1 å“ˆå¸Œå­—ä¸²ï¼Œæˆ–è€…åº•å±‚çš„ Git å‘½ä»¤ï¼Œæ¥æ£€æŸ¥å°†è¦å¼•å…¥çš„æ›´æ”¹ã€‚ä¸€äº›å¸¸è§çš„ä½¿ç”¨åŒ…æ‹¬ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("æ‹’ç»å°†ä¸Šæ¸¸åˆ†æ”¯ rebase çš„æ›´æ”¹")]),s._v(" "),a("li",[s._v("é˜²æ­¢é”™ç»¼å¤æ‚çš„åˆå¹¶ï¼ˆéå¿«é€Ÿå‘å‰ï¼Œä¼šé€ æˆé¡¹ç›®å†å²éçº¿æ€§ï¼‰")]),s._v(" "),a("li",[s._v("æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æ­£ç¡®çš„æƒé™æ¥åšè¿™äº›æ›´æ”¹ï¼ˆå¤§å¤šç”¨äºä¸­å¿ƒåŒ–çš„ Git å·¥ä½œæµä¸­ï¼‰")]),s._v(" "),a("li",[s._v("å¦‚æœå¤šä¸ªå¼•ç”¨è¢«æ¨é€ï¼Œåœ¨ "),a("code",[s._v("pre-receive")]),s._v(" ä¸­è¿”å›é 0 çŠ¶æ€ï¼Œæ‹’ç»æ‰€æœ‰æäº¤ã€‚å¦‚æœä½ æƒ³ä¸€ä¸ªä¸ªæ¥å—æˆ–æ‹’ç»åˆ†æ”¯ï¼Œä½ éœ€è¦ä½¿ç”¨ "),a("code",[s._v("update")]),s._v(" é’©å­")])]),s._v(" "),a("h3",{attrs:{id:"update"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#update","aria-hidden":"true"}},[s._v("#")]),s._v(" update")]),s._v(" "),a("p",[a("code",[s._v("update")]),s._v(" é’©å­åœ¨ "),a("code",[s._v("pre-receive")]),s._v(" ä¹‹åè¢«è°ƒç”¨ï¼Œç”¨æ³•ä¹Ÿå·®ä¸å¤šã€‚å®ƒä¹Ÿæ˜¯åœ¨å®é™…æ›´æ–°å‰è¢«è°ƒç”¨çš„ï¼Œä½†å®ƒå¯ä»¥åˆ†åˆ«è¢«æ¯ä¸ªæ¨é€ä¸Šæ¥çš„å¼•ç”¨åˆ†åˆ«è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœç”¨æˆ·å°è¯•æ¨é€åˆ°4ä¸ªåˆ†æ”¯ï¼Œ"),a("code",[s._v("update")]),s._v(" ä¼šè¢«æ‰§è¡Œ 4 æ¬¡ã€‚å’Œ "),a("code",[s._v("pre-receive")]),s._v(" ä¸ä¸€æ ·ï¼Œè¿™ä¸ªé’©å­ä¸éœ€è¦è¯»å–æ ‡å‡†è¾“å…¥ã€‚äº‹å®ä¸Šï¼Œå®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("æ›´æ–°çš„å¼•ç”¨åç§°")]),s._v(" "),a("li",[s._v("å¼•ç”¨ä¸­å­˜æ”¾çš„æ—§çš„å¯¹è±¡åç§°")]),s._v(" "),a("li",[s._v("å¼•ç”¨ä¸­å­˜æ”¾çš„æ–°çš„å¯¹è±¡åç§°")])]),s._v(" "),a("p",[s._v("è¿™äº›ä¿¡æ¯å’Œ "),a("code",[s._v("pre-receive")]),s._v(" ç›¸åŒï¼Œä½†å› ä¸ºæ¯æ¬¡å¼•ç”¨éƒ½ä¼šåˆ†åˆ«è§¦å‘æ›´æ–°ï¼Œä½ å¯ä»¥æ‹’ç»ä¸€äº›å¼•ç”¨è€Œæ¥å—å¦ä¸€äº›ã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#!/usr/bin/env python\n\nimport sys\n\nbranch = sys.argv[1]\nold_commit = sys.argv[2]\nnew_commit = sys.argv[3]\n\nprint \"Moving '%s' from %s to %s\" % (branch, old_commit, new_commit)\n\n# åªæ”¾å¼ƒå½“å‰åˆ†æ”¯çš„æ¨é€\n# sys.exit(1)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("ä¸Šé¢è¿™ä¸ªé’©å­ç®€å•åœ°è¾“å‡ºäº†åˆ†æ”¯å’Œæ–°æ—§æäº¤çš„å“ˆå¸Œå­—ä¸²ã€‚å½“ä½ å‘è¿œç¨‹ä»“åº“æ¨é€è¶…è¿‡ä¸€ä¸ªåˆ†æ”¯æ—¶ï¼Œä½ å¯ä»¥çœ‹åˆ°æ¯ä¸ªåˆ†æ”¯éƒ½æœ‰è¾“å‡ºã€‚")]),s._v(" "),a("h3",{attrs:{id:"post-receive"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#post-receive","aria-hidden":"true"}},[s._v("#")]),s._v(" post-receive")]),s._v(" "),a("p",[a("code",[s._v("post-receive")]),s._v(" é’©å­åœ¨æˆåŠŸæ¨é€åè¢«è°ƒç”¨ï¼Œé€‚åˆç”¨äºå‘é€é€šçŸ¥ã€‚å¯¹å¾ˆå¤šå·¥ä½œæµæ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¯” "),a("code",[s._v("post-commit")]),s._v(" æ›´å¥½çš„å‘é€é€šçŸ¥çš„åœ°æ–¹ï¼Œå› ä¸ºè¿™äº›æ›´æ”¹åœ¨å…¬å…±çš„æœåŠ¡å™¨è€Œä¸æ˜¯ç”¨æˆ·çš„æœ¬åœ°æœºå™¨ä¸Šã€‚ç»™å…¶ä»–å¼€å‘è€…å‘é€é‚®ä»¶æˆ–è€…è§¦å‘ä¸€ä¸ªæŒç»­é›†æˆç³»ç»Ÿéƒ½æ˜¯ "),a("code",[s._v("post-receive")]),s._v(" å¸¸ç”¨çš„æ“ä½œã€‚")]),s._v(" "),a("p",[s._v("è¿™ä¸ªè„šæœ¬æ²¡æœ‰å‚æ•°ï¼Œä½†å’Œ "),a("code",[s._v("pre-receive")]),s._v(" ä¸€æ ·é€šè¿‡æ ‡å‡†è¾“å…¥è¯»å–ã€‚")]),s._v(" "),a("h2",{attrs:{id:"æ€»ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“","aria-hidden":"true"}},[s._v("#")]),s._v(" æ€»ç»“")]),s._v(" "),a("p",[s._v("åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚æœç”¨ Git é’©å­æ¥ä¿®æ”¹å†…éƒ¨è¡Œä¸ºï¼Œå½“ä»“åº“ä¸­ç‰¹å®šçš„äº‹ä»¶å‘ç”Ÿæ—¶æ¥å—æ¶ˆæ¯ã€‚é’©å­æ˜¯å­˜åœ¨äº "),a("code",[s._v("git/hooks")]),s._v(" ä»“åº“ä¸­çš„æ™®é€šè„šæœ¬ï¼Œå› æ­¤ä¹Ÿéå¸¸å®¹æ˜“å®‰è£…å’Œå®šåˆ¶ã€‚")]),s._v(" "),a("p",[s._v("æˆ‘ä»¬è¿˜çœ‹äº†ä¸€äº›å¸¸ç”¨çš„æœ¬åœ°å’ŒæœåŠ¡ç«¯çš„é’©å­ã€‚è¿™ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿä»‹å…¥åˆ°æ•´ä¸ªå¼€å‘ç”Ÿå‘½å‘¨æœŸä¸­å»ã€‚æˆ‘ä»¬ç°åœ¨çŸ¥é“äº†å¦‚ä½•åœ¨åˆ›å»ºæäº¤æˆ–æ¨é€çš„æ¯ä¸ªé˜¶æ®µæ‰§è¡Œè‡ªå®šä¹‰çš„æ“ä½œã€‚æœ‰äº†è¿™äº›ç®€å•çš„è„šæœ¬çŸ¥è¯†ï¼Œä½ å°±å¯ä»¥å¯¹ Git ä»“åº“ä¸ºæ‰€æ¬²ä¸ºäº† :]")]),s._v(" "),a("blockquote",[a("p",[s._v("è¿™ç¯‡æ–‡ç« æ˜¯"),a("a",{attrs:{href:"https://github.com/geeeeeeeeek/git-recipes/",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[s._v("ã€Œgit-recipesã€")]),a("OutboundLink")],1),s._v("çš„ä¸€éƒ¨åˆ†ï¼Œç‚¹å‡» "),a("a",{attrs:{href:"https://github.com/geeeeeeeeek/git-recipes/wiki/",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[s._v("ç›®å½•")]),a("OutboundLink")],1),s._v(" æŸ¥çœ‹æ‰€æœ‰ç« èŠ‚ã€‚")]),s._v(" "),a("p",[s._v("å¦‚æœä½ è§‰å¾—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹å‡»å³ä¸Šè§’çš„ "),a("strong",[s._v("Star")]),s._v(" ğŸŒŸ æˆ– "),a("strong",[s._v("Fork")]),s._v(" ğŸ´ã€‚")]),s._v(" "),a("p",[s._v("å¦‚æœä½ å‘ç°äº†é”™è¯¯ï¼Œæˆ–æ˜¯æƒ³è¦åŠ å…¥åä½œï¼Œè¯·å‚é˜… "),a("a",{attrs:{href:"https://github.com/geeeeeeeeek/git-recipes/issues/1",target:"_blank",rel:"noopener noreferrer"}},[s._v("Wiki åä½œè¯´æ˜"),a("OutboundLink")],1),s._v("ã€‚")])])])},[],!1,null,null,null);e.default=n.exports}}]);