<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpacké€ŸæŸ¥ | Frontend Knowledge Base</title>
    <meta name="description" content="ã€å‰ç«¯å­¦ä¹ +é¢è¯•æŒ‡å—ã€‘ æ¶µç›–å‰ç«¯å·¥ç¨‹å¸ˆå¿…éœ€çš„æ ¸å¿ƒçŸ¥è¯†åº“">
    <link rel="icon" href="/Frontend-Knowledge-Base/knowledge-base.png">
  <link rel="manifest" href="/Frontend-Knowledge-Base/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/Frontend-Knowledge-Base/assets/css/0.styles.512f36c0.css" as="style"><link rel="preload" href="/Frontend-Knowledge-Base/assets/js/app.be30c89b.js" as="script"><link rel="preload" href="/Frontend-Knowledge-Base/assets/js/4.d5d74749.js" as="script"><link rel="preload" href="/Frontend-Knowledge-Base/assets/js/66.c9dc87d6.js" as="script"><link rel="preload" href="/Frontend-Knowledge-Base/assets/js/9.1a9c75bd.js" as="script"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/10.14beec70.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/11.1baa7ffd.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/12.b25e3f14.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/13.5e243a3b.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/14.8c43e0ed.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/15.8b7ce3ce.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/16.8ab4ae66.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/17.fe99a1e3.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/18.3313bd50.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/19.de937db9.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/20.1836cb3d.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/21.65652483.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/22.fb27e07b.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/23.47c1ae4c.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/24.232a53b1.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/25.c6a72e25.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/26.0a0a2701.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/27.0fdc9a1a.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/28.e889eaeb.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/29.46bd6339.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/30.7fef7b22.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/31.6d22a163.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/32.91863d2b.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/33.38e661a7.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/34.95d36277.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/35.4dcca28e.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/36.eff9b2db.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/37.83295d49.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/38.9dc5afb4.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/39.8d439768.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/40.ee0861ee.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/41.88810310.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/42.fc9b11e7.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/43.6c927e3a.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/44.f886a111.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/45.80ab5dac.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/46.3e9e3e75.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/47.0eda127c.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/48.44c82d8d.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/49.4607fb6a.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/5.2bf069a5.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/50.9f0623b6.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/51.f796f30a.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/52.14bba200.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/53.ffdc0ead.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/54.0a659db0.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/55.5742c9fa.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/56.65596741.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/57.307a563b.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/58.fae9ed04.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/59.aa64338b.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/6.90c6bd27.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/60.8ed25f8b.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/61.f7b0fdbd.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/62.8a215a5b.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/63.60ac3ff9.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/64.df85119c.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/65.f263abd9.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/67.6152f8ea.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/68.f8f9f63b.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/69.236ffdcc.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/7.567f554d.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/70.a508e7e0.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/71.a7032d11.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/72.a6250581.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/73.1a604c5b.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/74.fa6d0d2d.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/75.2839c2d3.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/76.786f0d39.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/77.6a25f56b.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/78.776f55f5.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/79.b69d3416.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/8.23699700.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/80.8a98d0eb.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/81.d9a21bed.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/82.6ac5eff6.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/83.f2c7eacb.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/click-prefetch.507fe4e7.js"><link rel="prefetch" href="/Frontend-Knowledge-Base/assets/js/vendors~docsearch.1829cd5d.js">
    <link rel="stylesheet" href="/Frontend-Knowledge-Base/assets/css/0.styles.512f36c0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Frontend-Knowledge-Base/" class="home-link router-link-active"><!----> <span class="site-name">Frontend Knowledge Base</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Frontend-Knowledge-Base/frontend/JavaScript/" class="nav-link">å‰ç«¯</a></div><div class="nav-item"><a href="/Frontend-Knowledge-Base/cs/linux/linux.html" class="nav-link">è®¡ç®—æœºåŸºç¡€</a></div><div class="nav-item"><a href="/Frontend-Knowledge-Base/book/" class="nav-link">ä¹¦ç±</a></div><div class="nav-item"><a href="/Frontend-Knowledge-Base/interview/" class="nav-link">é¢è¯•</a></div><div class="nav-item"><a href="https://jinjun.wiki/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  åšå®¢
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/jinjun1994/Frontend-Knowledge-Base" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Frontend-Knowledge-Base/frontend/JavaScript/" class="nav-link">å‰ç«¯</a></div><div class="nav-item"><a href="/Frontend-Knowledge-Base/cs/linux/linux.html" class="nav-link">è®¡ç®—æœºåŸºç¡€</a></div><div class="nav-item"><a href="/Frontend-Knowledge-Base/book/" class="nav-link">ä¹¦ç±</a></div><div class="nav-item"><a href="/Frontend-Knowledge-Base/interview/" class="nav-link">é¢è¯•</a></div><div class="nav-item"><a href="https://jinjun.wiki/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  åšå®¢
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/jinjun1994/Frontend-Knowledge-Base" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group first collapsable"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable"><p class="sidebar-heading"><span>css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable"><p class="sidebar-heading"><span>html</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable"><p class="sidebar-heading"><span>æµè§ˆå™¨</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable"><p class="sidebar-heading"><span>å‰ç«¯æ¡†æ¶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable"><p class="sidebar-heading"><span>æ€§èƒ½ä¼˜åŒ–</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable"><p class="sidebar-heading"><span>node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable"><p class="sidebar-heading"><span>æ•°æ®ç»“æ„ä¸ç®—æ³•</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable"><p class="sidebar-heading open"><span>å‰ç«¯å·¥ç¨‹åŒ–</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/frontend-engineering.html" class="sidebar-link">å‰ç«¯å·¥ç¨‹åŒ–</a></li><li><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html" class="active sidebar-link">webpacké€ŸæŸ¥</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#webpackçš„æ­£ç¡®å®‰è£…å§¿åŠ¿" class="sidebar-link">webpackçš„æ­£ç¡®å®‰è£…å§¿åŠ¿</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#ä½¿ç”¨webpackçš„é…ç½®æ–‡ä»¶" class="sidebar-link">ä½¿ç”¨webpackçš„é…ç½®æ–‡ä»¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#æµ…æwebpackæ‰“åŒ…è¾“å‡ºå†…å®¹" class="sidebar-link">æµ…æwebpackæ‰“åŒ…è¾“å‡ºå†…å®¹</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#ä»€ä¹ˆæ˜¯loader" class="sidebar-link">ä»€ä¹ˆæ˜¯loader</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#ä½¿ç”¨loaderæ‰“åŒ…é™æ€èµ„æºï¼ˆå›¾ç‰‡ç¯‡ï¼‰" class="sidebar-link">ä½¿ç”¨loaderæ‰“åŒ…é™æ€èµ„æºï¼ˆå›¾ç‰‡ç¯‡ï¼‰</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#placeholders" class="sidebar-link">placeholders</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#ext" class="sidebar-link">[ext]</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#hash" class="sidebar-link">[hash]</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#n" class="sidebar-link">[N]</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#name" class="sidebar-link">[name]</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#path" class="sidebar-link">[path]</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#hashes" class="sidebar-link">Hashes</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#digesttype" class="sidebar-link">digestType</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#hashtype" class="sidebar-link">hashType</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#length" class="sidebar-link">length</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#examples" class="sidebar-link">Examples</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#url-loader" class="sidebar-link">url-loader</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#image-webpack-loader" class="sidebar-link">image-webpack-loader</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#ä½¿ç”¨loaderæ‰“åŒ…é™æ€èµ„æºï¼ˆæ ·å¼ç¯‡ä¸Šï¼‰" class="sidebar-link">ä½¿ç”¨loaderæ‰“åŒ…é™æ€èµ„æºï¼ˆæ ·å¼ç¯‡ä¸Šï¼‰</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#ä½¿ç”¨loaderæ‰“åŒ…é™æ€èµ„æºï¼ˆæ ·å¼ç¯‡ä¸‹ï¼‰" class="sidebar-link">ä½¿ç”¨loaderæ‰“åŒ…é™æ€èµ„æºï¼ˆæ ·å¼ç¯‡ä¸‹ï¼‰</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#css-module" class="sidebar-link">css module</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#iconfont" class="sidebar-link">iconfont</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#ä½¿ç”¨pluginsä½¿æ‰“åŒ…æ›´ä¾¿æ·" class="sidebar-link">ä½¿ç”¨pluginsä½¿æ‰“åŒ…æ›´ä¾¿æ·</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#htmlwebpackplugin" class="sidebar-link">HtmlWebpackPlugin</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#clean-webpack-plugin" class="sidebar-link">clean-webpack-plugin</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#entryä¸outputçš„åŸºç¡€é…ç½®" class="sidebar-link">entryä¸outputçš„åŸºç¡€é…ç½®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#entry" class="sidebar-link">entry</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#sourcemapçš„é…ç½®" class="sidebar-link">sourceMapçš„é…ç½®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#å“è´¨è¯´æ˜-quality" class="sidebar-link">å“è´¨è¯´æ˜(quality)</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#å¯¹äºå¼€å‘ç¯å¢ƒ" class="sidebar-link">å¯¹äºå¼€å‘ç¯å¢ƒ</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#ä½¿ç”¨-webpackdevserver-æå‡å¼€å‘æ•ˆç‡" class="sidebar-link">ä½¿ç”¨ WebpackDevServer æå‡å¼€å‘æ•ˆç‡</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#æ–¹æ³•ä¸€" class="sidebar-link">æ–¹æ³•ä¸€</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#æ–¹æ³•äºŒï¼šwebpackdevserver" class="sidebar-link">æ–¹æ³•äºŒï¼šwebpackdevServer</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#æ–¹æ³•ä¸‰ï¼šmiddleware" class="sidebar-link">æ–¹æ³•ä¸‰ï¼šmiddleware</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#hot-module-replacement-çƒ­æ¨¡å—æ›´æ–°" class="sidebar-link">Hot Module Replacement çƒ­æ¨¡å—æ›´æ–°</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#ä½¿ç”¨-babel-å¤„ç†-es6-è¯­æ³•" class="sidebar-link">ä½¿ç”¨ Babel å¤„ç† ES6 è¯­æ³•</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#webpack-å®ç°å¯¹reactæ¡†æ¶ä»£ç çš„æ‰“åŒ…" class="sidebar-link">Webpack å®ç°å¯¹Reactæ¡†æ¶ä»£ç çš„æ‰“åŒ…</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#tree-shaking-æ¦‚å¿µè¯¦è§£" class="sidebar-link">Tree Shaking æ¦‚å¿µè¯¦è§£</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#æ·±åº¦tree-shakiing" class="sidebar-link">æ·±åº¦tree shakiing</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#ä»€ä¹ˆæ˜¯tree-shaking" class="sidebar-link">ä»€ä¹ˆæ˜¯Tree-shaking</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#tree-shadingåŸç†" class="sidebar-link">Tree-shadingåŸç†</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#webpack4çš„tree-shaking" class="sidebar-link">Webpack4çš„Tree-shaking</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#webpack-deep-scope-plugin" class="sidebar-link">webpack-deep-scope-plugin</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#å‰è¨€" class="sidebar-link">å‰è¨€</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#ä»å‰" class="sidebar-link">ä»å‰</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#å¼€ç«¯" class="sidebar-link">å¼€ç«¯</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#æˆ‘çš„æ’ä»¶åšäº†ä»€ä¹ˆ" class="sidebar-link">æˆ‘çš„æ’ä»¶åšäº†ä»€ä¹ˆ</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸ" class="sidebar-link">ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸ</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#æ’ä»¶çš„å·¥ä½œåŸç†" class="sidebar-link">æ’ä»¶çš„å·¥ä½œåŸç†</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#edge-cases" class="sidebar-link">Edge cases</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#æ ¹ä½œç”¨åŸŸçš„å¼•ç”¨" class="sidebar-link">æ ¹ä½œç”¨åŸŸçš„å¼•ç”¨</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#ç»™å˜é‡é‡æ–°èµ‹å€¼-ğŸ‘" class="sidebar-link">ç»™å˜é‡é‡æ–°èµ‹å€¼ ğŸ‘</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#çº¯å‡½æ•°è°ƒç”¨-ğŸ‘" class="sidebar-link">çº¯å‡½æ•°è°ƒç”¨ ğŸ‘</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#å®é™…ä½¿ç”¨çš„è¿‡ç¨‹ä¸­åº”è¯¥æ³¨æ„ä»€ä¹ˆ" class="sidebar-link">å®é™…ä½¿ç”¨çš„è¿‡ç¨‹ä¸­åº”è¯¥æ³¨æ„ä»€ä¹ˆ</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#æ€»ç»“" class="sidebar-link">æ€»ç»“</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#develoment-å’Œ-production-æ¨¡å¼çš„åŒºåˆ†æ‰“åŒ…" class="sidebar-link">Develoment å’Œ Production æ¨¡å¼çš„åŒºåˆ†æ‰“åŒ…</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#webpack-å’Œ-code-splitting" class="sidebar-link">Webpack å’Œ Code Splitting</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#å¼‚æ­¥ä»£ç åˆ†å‰²" class="sidebar-link">å¼‚æ­¥ä»£ç åˆ†å‰²</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#splitchunksplugin-é…ç½®å‚æ•°è¯¦è§£" class="sidebar-link">SplitChunksPlugin é…ç½®å‚æ•°è¯¦è§£</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#æ›´æ”¹æ‰“åŒ…æ–‡ä»¶å" class="sidebar-link">æ›´æ”¹æ‰“åŒ…æ–‡ä»¶å</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#lazy-loading-æ‡’åŠ è½½ï¼Œchunk-æ˜¯ä»€ä¹ˆï¼Ÿ" class="sidebar-link">Lazy Loading æ‡’åŠ è½½ï¼ŒChunk æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#æ‰“åŒ…åˆ†æï¼Œpreloading-prefetching" class="sidebar-link">æ‰“åŒ…åˆ†æï¼ŒPreloading,  Prefetching</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#æ‰“åŒ…åˆ†æ" class="sidebar-link">æ‰“åŒ…åˆ†æ</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#ä»£ç è¦†ç›–ç‡" class="sidebar-link">ä»£ç è¦†ç›–ç‡</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#é¢„å–-é¢„åŠ è½½æ¨¡å—-prefetch-preload-module" class="sidebar-link">é¢„å–/é¢„åŠ è½½æ¨¡å—(prefetch/preload module)</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#ä»£ç æ¼”ç¤º" class="sidebar-link">ä»£ç æ¼”ç¤º</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#cssæ–‡ä»¶çš„ä»£ç åˆ†å‰²" class="sidebar-link">cssæ–‡ä»¶çš„ä»£ç åˆ†å‰²</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#minicssextractplugin" class="sidebar-link">MiniCssExtractPlugin</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#webpackä¸æµè§ˆå™¨ç¼“å­˜" class="sidebar-link">webpackä¸æµè§ˆå™¨ç¼“å­˜</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#shimming" class="sidebar-link">shimming</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#ç¯å¢ƒå˜é‡çš„ä½¿ç”¨" class="sidebar-link">ç¯å¢ƒå˜é‡çš„ä½¿ç”¨</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#libraryçš„æ‰“åŒ…" class="sidebar-link">libraryçš„æ‰“åŒ…</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#åº“å¼•ç”¨å…¶ä»–åº“æ€ä¹ˆåŠ" class="sidebar-link">åº“å¼•ç”¨å…¶ä»–åº“æ€ä¹ˆåŠ</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#externals" class="sidebar-link">externals</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#å¦‚ä½•è®©åˆ«äººä½¿ç”¨åº“" class="sidebar-link">å¦‚ä½•è®©åˆ«äººä½¿ç”¨åº“</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#pwa-çš„æ‰“åŒ…é…ç½®" class="sidebar-link">PWA çš„æ‰“åŒ…é…ç½®</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#typescript-çš„æ‰“åŒ…é…ç½®" class="sidebar-link">TypeScript çš„æ‰“åŒ…é…ç½®</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#ä½¿ç”¨-webpackdevserver-å®ç°è¯·æ±‚è½¬å‘" class="sidebar-link">ä½¿ç”¨ WebpackDevServer å®ç°è¯·æ±‚è½¬å‘</a></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#webpackdevserver-è§£å†³å•é¡µé¢åº”ç”¨è·¯ç”±é—®é¢˜" class="sidebar-link">WebpackDevServer è§£å†³å•é¡µé¢åº”ç”¨è·¯ç”±é—®é¢˜</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#devserver-historyapifallback" class="sidebar-link">devServer.historyApiFallback</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/webpack.html#eslint-åœ¨-webpack-ä¸­çš„é…ç½®" class="sidebar-link">EsLint åœ¨ Webpack ä¸­çš„é…ç½®</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable"><p class="sidebar-heading"><span>å‰ç«¯å›¾å½¢å­¦</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable"><p class="sidebar-heading"><span>å¾®ä¿¡å°ç¨‹åº</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="back-to-ceiling" style="right:1rem;bottom:3rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;background-color:rgba(231, 234, 241,.5);display:none;" data-v-7efdea1b data-v-7efdea1b><i class="iconfont icon-rocket" data-v-7efdea1b></i></div> <main class="page"> <div class="page-none"></div> <div class="page-title"><h1>webpacké€ŸæŸ¥</h1> <hr> <div class="pageInfo" data-v-3a11415e><i class="icon-author iconfont" data-v-3a11415e><span data-v-3a11415e>jinjun</span></i> <i class="icon-time iconfont" data-v-3a11415e><span data-v-3a11415e>2019/3/10</span></i> <span id="/frontend/frontend-engineering/webpack.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-ea098484 data-v-3a11415e><i class="icon-eye" style="font-size:.9rem;font-weight:normal;color:#999;" data-v-ea098484></i> <a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;" data-v-ea098484></a></span></div></div> <div class="content default"><p>webpack æ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å·¥å…·</p> <p>æ¨¡å—åŒ–<a href="https://webpack.js.org/concepts/modules" target="_blank" rel="noopener noreferrer">https://webpack.js.org/concepts/modules<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://webpack.js.org/api/module-methods" target="_blank" rel="noopener noreferrer">æ¨¡å—åŒ–è¯­æ³•<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€<a href="https://webpack.js.org/api/module-variables" target="_blank" rel="noopener noreferrer">å˜é‡<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="webpackçš„æ­£ç¡®å®‰è£…å§¿åŠ¿"><a href="#webpackçš„æ­£ç¡®å®‰è£…å§¿åŠ¿" aria-hidden="true" class="header-anchor">#</a> webpackçš„æ­£ç¡®å®‰è£…å§¿åŠ¿</h2> <p>å®‰è£…æœ€æ–°node.js LTSç‰ˆæœ¬</p> <p><a href="http://nodejs.org/" target="_blank" rel="noopener noreferrer">http://nodejs.org<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>æŸ¥çœ‹nodeç‰ˆæœ¬</p> <div class="language-node line-numbers-mode"><pre class="language-text"><code>node -v
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>åˆ›å»ºæ–‡ä»¶å¤¹</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mkdir webpack-demo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>åˆå§‹åŒ–é¡¹ç›®</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm init 
npm init -y // é»˜è®¤é…ç½®
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ç›´æ¥å…¨éƒ¨å›è½¦</p> <p>ç”Ÿæˆpackage.json</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-demo&quot;</span><span class="token punctuation">,</span>   // nameä¸èƒ½ä¸ºwebpack<span class="token punctuation">,</span>å¦åˆ™ä¸èƒ½å®‰è£…webpack
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;private&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> // æ·»åŠ ç§æœ‰
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>   // å¯¹å¤–æš´éœ²ï¼Œåˆ é™¤
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.2.3&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>å…¨å±€å®‰è£…webpack</p> <p>æˆ‘ä»¬ä½¿ç”¨ npm æˆ–è€… yarn æ¥å®‰è£… webpackï¼Œå¯ä»¥ä½œä¸ºä¸€ä¸ªå…¨å±€çš„å‘½ä»¤æ¥ä½¿ç”¨ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install webpack webpack-cli -g 

# æˆ–è€…
yarn global add webpack webpack-cli

# ç„¶åå°±å¯ä»¥å…¨å±€æ‰§è¡Œå‘½ä»¤äº†
webpack --help
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>å¸è½½ å…¨å±€webpack</p> <p><code>npm uninstall webpack -g</code></p> <p>é¡¹ç›®å†…å®‰è£…</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install webpack webpack-cli -D  
npm install webpack webpack-cli --save-dev //ç­‰ä»·ä¸Šé¢
**#** æˆ–è€…
yarn add webpack -D

# é¡¹ç›®å†…è¿è¡Œ
npx webpack -v
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>å®‰è£…æŒ‡å®šç‰ˆæœ¬ webpack</p> <p>npm install webpack@4.0.0  -D</p> <p>æŸ¥çœ‹ä¸€ä¸ªåŒ…ç‰ˆæœ¬å·</p> <p><code>npm info webpack</code></p> <h2 id="ä½¿ç”¨webpackçš„é…ç½®æ–‡ä»¶"><a href="#ä½¿ç”¨webpackçš„é…ç½®æ–‡ä»¶" aria-hidden="true" class="header-anchor">#</a> ä½¿ç”¨webpackçš„é…ç½®æ–‡ä»¶</h2> <p>é¡¹ç›®æ–‡ä»¶å¤¹åˆ›å»ºwebpack.config.jsï¼Œå¦åˆ™ä¼šä½¿ç”¨æ¨¡å¼é…ç½®</p> <p>åˆ›å»ºsrcç›®å½•ï¼Œåœ¨å…¶ä¸­æ–°å»ºindex.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>       <span class="token comment">// å¼•å…¥nodeæ ¸å¿ƒæ¨¡å—path</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>  <span class="token comment">// æ‰“åŒ…å…¥å£</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>             <span class="token comment">// è¾“å‡ºä½ç½®</span>
        filename<span class="token punctuation">:</span>  <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>     <span class="token comment">// è¾“å‡ºæ–‡ä»¶å</span>
        path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>  
        <span class="token comment">// è°ƒç”¨pathæ¨¡å—resolveæ–¹æ³•  __dirnameè¡¨ç¤ºæ–‡ä»¶æ‰€åœ¨ç›®å½•è·¯å¾„,è¾“å‡ºåœ¨è¯¥ç›®å½•ä¸‹distç›®å½•</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ä½¿ç”¨å…¶ä»–é…ç½®æ–‡ä»¶åè¿è¡Œwebpack</p> <p><code>npx webpack --config webpackconfig.js</code></p> <p>è¿è¡Œwebpack</p> <p><code>npx webpack</code></p> <p>ä¿®æ”¹webpackè¿è¡Œå‘½ä»¤</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;bundle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>  // å…ˆå¯»æ‰¾é¡¹ç›®ä¸­çš„webpackï¼Œæ²¡æœ‰åˆ™ä½¿ç”¨å…¨å±€
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æ­¤æ—¶ ä½¿ç”¨ <code>npm run bundle</code> è¿è¡Œwebpack</p> <p>è¿è¡Œåç”Ÿæˆ ./dist/bundle.js</p> <p>åœ¨distç›®å½•ä¸‹æ–°å»ºindex.htmlï¼Œå¼•å…¥index.jså°±å¯ä»¥æ­£å¸¸ä½¿ç”¨</p> <p>å°çŸ¥è¯†ï¼š webpack-cliä¸ºwebpackå‘½ä»¤è¡Œå·¥å…·</p> <p>webpackå®˜æ–¹ä½¿ç”¨æŒ‡å—<a href="https://webpack.js.org/guides/getting-started" target="_blank" rel="noopener noreferrer">https://webpack.js.org/guides/getting-started<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="æµ…æwebpackæ‰“åŒ…è¾“å‡ºå†…å®¹"><a href="#æµ…æwebpackæ‰“åŒ…è¾“å‡ºå†…å®¹" aria-hidden="true" class="header-anchor">#</a> æµ…æwebpackæ‰“åŒ…è¾“å‡ºå†…å®¹</h3> <p><img src="https://img.amazingtm.com/201903/09075642.png" alt=""></p> <p>æ‰“åŒ…è¾“å‡ºä¿¡æ¯ï¼š</p> <p>hashä¸ºæœ¬æ¬¡æ‰“åŒ…å”¯ä¸€hashå€¼</p> <p>versionä¸ºæ‰“åŒ…ä½¿ç”¨webpackç‰ˆæœ¬</p> <p>timeä¸ºæ‰“åŒ…è€—æ—¶</p> <p>built at ä¸ºæ‰“åŒ…æ—¶é—´</p> <p>assetä¸ºè¾“å‡ºæ–‡ä»¶å</p> <p>sizeä¸ºæ–‡ä»¶å¤§å°</p> <p>chunksä¸ºæ–‡ä»¶åŠå…¶ä¾èµ–æ–‡ä»¶å”¯ä¸€idå€¼</p> <p>chunks nameä¸ºæ–‡ä»¶å¯¹åº”åå­—</p> <p>mainçš„ç”±æ¥ï¼šé…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨äº†ç®€å†™ï¼Œä¸ºentrypé…ç½®çš„main</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>  <span class="token comment">// æ‰“åŒ…å…¥å£</span>
 <span class="token comment">// ç­‰ä»·äº</span>
 entryï¼š <span class="token punctuation">{</span>
 main<span class="token punctuation">:</span><span class="token string">'./src/index.js'</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>Entrypoint main = bundle.js</code></p> <p>è¡¨ç¤ºæ‰“åŒ…å…¥å£ä¸º mainå…¥å£ï¼Œå³bundle.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token constant">WARNING</span> <span class="token keyword">in</span> configuration
The <span class="token string">'mode'</span> option has not been <span class="token keyword">set</span><span class="token punctuation">,</span> webpack will fallback to <span class="token string">'production'</span> <span class="token keyword">for</span> <span class="token keyword">this</span> value<span class="token punctuation">.</span> Set <span class="token string">'mode'</span> option to <span class="token string">'development'</span> or <span class="token string">'production'</span> to enable defaults <span class="token keyword">for</span> each environment<span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>è­¦å‘Šè¡¨ç¤º æ²¡æœ‰æŒ‡å®šæ‰“åŒ…æ¨¡å¼</p> <p>é»˜è®¤æ¨¡å¼ä¸ºï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    mode<span class="token punctuation">:</span> <span class="token string">'production'</span> <span class="token comment">// é»˜è®¤ä¸ºproductionï¼Œè¾“å‡ºä»£ç ä¼šå‹ç¼©ï¼Œè®¾ç½®ä¸ºdevelopment,ä»£ç ä¸ä¼šå‹ç¼©</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="ä»€ä¹ˆæ˜¯loader"><a href="#ä»€ä¹ˆæ˜¯loader" aria-hidden="true" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯loader</h2> <p>å¦‚ä½•å­¦ä¹ ï¼Œé…ç½®é¡¹ç›®å¤ªå¤šï¼Œloaderså’Œpluginsç‰¹åˆ«å¤šï¼Œæ˜¯è®°ä¸ä½æ‰€æœ‰é…ç½®çš„ã€‚æŒæ¡æ ¸å¿ƒçŸ¥è¯†ï¼Œä¸šåŠ¡åœºæ™¯ä½¿ç”¨ä¸­é‡åˆ°é—®é¢˜å†å»æŸ¥çœ‹ç›¸å…³æ–‡æ¡£ã€‚</p> <p>webpack ä¸­æä¾›ä¸€ç§å¤„ç†å¤šç§æ–‡ä»¶æ ¼å¼çš„æœºåˆ¶ï¼Œä¾¿æ˜¯ä½¿ç”¨ loaderã€‚æˆ‘ä»¬å¯ä»¥æŠŠ loader ç†è§£ä¸ºæ˜¯ä¸€ä¸ªè½¬æ¢å™¨ï¼Œè´Ÿè´£æŠŠæŸç§æ–‡ä»¶æ ¼å¼çš„å†…å®¹è½¬æ¢æˆ webpack å¯ä»¥æ”¯æŒæ‰“åŒ…çš„æ¨¡å—ã€‚</p> <p>é»˜è®¤è¯†åˆ«jsæ–‡ä»¶ï¼Œå…¶ä»–æ ¼å¼æ–‡ä»¶éœ€è¦loaderã€‚</p> <p>ä¸‹è½½ä¸€ä¸ªå›¾ç‰‡å‘½åä¸º1.jpgåˆ°srcç›®å½•</p> <p>åœ¨./src/index.jsä¸­å¼•å…¥å›¾ç‰‡</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import img from './1.jpg'
conslole.log(img)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å®‰è£… <a href="https://webpack.js.org/loaders/file-loader" target="_blank" rel="noopener noreferrer">file-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>é…ç½®loader</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>       <span class="token comment">// å¼•å…¥nodeæ ¸å¿ƒæ¨¡å—path</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    mode<span class="token punctuation">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
    entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>  <span class="token comment">// æ‰“åŒ…å…¥å£</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>                         <span class="token comment">// é…ç½®loader</span>
        rules<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
            test<span class="token punctuation">:</span> <span class="token regex">/\.jpg$/</span><span class="token punctuation">,</span>
            use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>             <span class="token comment">// è¾“å‡ºä½ç½®</span>
        filename<span class="token punctuation">:</span>  <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>     <span class="token comment">// è¾“å‡ºæ–‡ä»¶å</span>
        path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>   <span class="token comment">// è°ƒç”¨pathæ¨¡å—resolveæ–¹æ³•  __dirnameè¡¨ç¤ºæ–‡ä»¶æ‰€åœ¨ç›®å½•è·¯å¾„</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>è¿è¡Œ npm run bundle</p> <p>file-load ä¼šå°†1.jpgæ”¹åå¤åˆ¶åˆ°srcä¸‹ï¼Œå¹¶åœ¨jsæ–‡ä»¶ä¸­è¿”å›æ–‡ä»¶åœ°å€</p> <p>ç†è®ºä¸Šfile-load å¯ä»¥é…ç½®ä»»ä½•é™æ€æ–‡ä»¶</p> <p>æˆ‘ä»¬å°†å›¾ç‰‡è¾“å‡ºåˆ°html</p> <p>æ”¹å†™index.js</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> img <span class="token keyword">from</span> <span class="token string">'./1.jpg'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span>
<span class="token keyword">let</span>  img1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
img1<span class="token punctuation">.</span>src <span class="token operator">=</span> img

<span class="token keyword">let</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
root<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>img1<span class="token punctuation">)</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>æ”¹å†™/dist/index.html</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>æµè§ˆå™¨æ‰“å¼€index.htmlå¯ä»¥çœ‹è§å›¾ç‰‡å‡ºç°äº†</p> <p><img src="https://img.amazingtm.com/201903/09090735.png-sign" alt=""></p> <p>å¼€å‘vueæ—¶ä¼šå¼•å…¥vueæ–‡ä»¶å¦‚ä¸‹</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> header <span class="token keyword">from</span> <span class="token string">'./header.vue'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>webpackåŒæ ·ä¸èƒ½è¯†åˆ«ï¼Œéœ€è¦å®‰è£…é…ç½®<a href="https://vue-loader.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">vue-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>é…ç½®æ•™ç¨‹æŸ¥çœ‹<a href="https://vue-loader.vuejs.org/zh/guide/#vue-cli" target="_blank" rel="noopener noreferrer">https://vue-loader.vuejs.org/zh/guide/#vue-cli<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="ä½¿ç”¨loaderæ‰“åŒ…é™æ€èµ„æºï¼ˆå›¾ç‰‡ç¯‡ï¼‰"><a href="#ä½¿ç”¨loaderæ‰“åŒ…é™æ€èµ„æºï¼ˆå›¾ç‰‡ç¯‡ï¼‰" aria-hidden="true" class="header-anchor">#</a> ä½¿ç”¨loaderæ‰“åŒ…é™æ€èµ„æºï¼ˆå›¾ç‰‡ç¯‡ï¼‰</h2> <p>ä½¿ç”¨å ä½ç¬¦é…ç½®æ‰“åŒ…è¾“å‡ºå›¾ç‰‡å</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>       
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    mode<span class="token punctuation">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
    entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>  
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        rules<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
            test<span class="token punctuation">:</span> <span class="token regex">/\.jpg$/</span><span class="token punctuation">,</span>
            use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
                options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    <span class="token comment">//placeholder å ä½ç¬¦</span>
                    name<span class="token punctuation">:</span> <span class="token string">'[name].[ext]'</span>  <span class="token comment">// åŸå›¾ç‰‡åå­—.åŸåç¼€</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>             
        filename<span class="token punctuation">:</span>  <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>    
        path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>  
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>æ›´å¤šå ä½ç¬¦æŸ¥çœ‹<a href="https://webpack.js.org/loaders/file-loader" target="_blank" rel="noopener noreferrer">file-loadæ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://github.com/webpack/loader-utils#interpolatename" target="_blank" rel="noopener noreferrer">https://github.com/webpack/loader-utils#interpolatename<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="placeholders"><a href="#placeholders" aria-hidden="true" class="header-anchor">#</a> placeholders</h3> <h3 id="ext"><a href="#ext" aria-hidden="true" class="header-anchor">#</a> <code>[ext]</code></h3> <p>ç±»å‹ï¼š<code>String</code> é»˜è®¤ï¼š<code>file.extname</code></p> <p>ç›®æ ‡æ–‡ä»¶/èµ„æºçš„æ–‡ä»¶æ‰©å±•åã€‚</p> <h3 id="hash"><a href="#hash" aria-hidden="true" class="header-anchor">#</a> <code>[hash]</code></h3> <p>ç±»å‹ï¼š<code>String</code> é»˜è®¤ï¼š<code>'md5'</code></p> <p>æŒ‡å®šç”Ÿæˆæ–‡ä»¶å†…å®¹å“ˆå¸Œå€¼çš„å“ˆå¸Œæ–¹æ³•ã€‚ æŸ¥çœ‹ä¸‹é¢çš„ <a href="https://github.com/webpack-contrib/file-loader#hashes" target="_blank" rel="noopener noreferrer">Hashes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚</p> <h3 id="n"><a href="#n" aria-hidden="true" class="header-anchor">#</a> <code>[N]</code></h3> <p>ç±»å‹ï¼š<code>String</code> é»˜è®¤ï¼š<code>undefined</code></p> <p>å½“å‰æ–‡ä»¶åæŒ‰ç…§æŸ¥è¯¢å‚æ•° regExp åŒ¹é…åï¼Œè·å¾—åˆ°ç¬¬ N ä¸ªåŒ¹é…ç»“æœ</p> <h3 id="name"><a href="#name" aria-hidden="true" class="header-anchor">#</a> <code>[name]</code></h3> <p>ç±»å‹ï¼š<code>String</code> é»˜è®¤ï¼š<code>file.basename</code></p> <p>æ–‡ä»¶/èµ„æºçš„åŸºæœ¬åç§°ã€‚</p> <h3 id="path"><a href="#path" aria-hidden="true" class="header-anchor">#</a> <code>[path]</code></h3> <p>ç±»å‹ï¼š<code>String</code> é»˜è®¤ï¼š<code>file.dirname</code></p> <p>èµ„æºç›¸å¯¹äº webpack/config context çš„è·¯å¾„ã€‚</p> <h3 id="hashes"><a href="#hashes" aria-hidden="true" class="header-anchor">#</a> Hashes</h3> <p>Custom hashes can be used by specifying a hash with the following format: <code>[&lt;hashType&gt;:hash:&lt;digestType&gt;:&lt;length&gt;]</code>.</p> <h3 id="digesttype"><a href="#digesttype" aria-hidden="true" class="header-anchor">#</a> <code>digestType</code></h3> <p>ç±»å‹ï¼š<code>String</code> é»˜è®¤ï¼š<code>'hex'</code></p> <p>The <a href="https://en.wikipedia.org/wiki/Cryptographic_hash_function" target="_blank" rel="noopener noreferrer">digest<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> that the hash function should use. Valid values include: base26, base32, base36, base49, base52, base58, base62, base64, and hex.</p> <h3 id="hashtype"><a href="#hashtype" aria-hidden="true" class="header-anchor">#</a> <code>hashType</code></h3> <p>ç±»å‹ï¼š<code>String</code> é»˜è®¤ï¼š<code>'md5'</code></p> <p>The type of hash that the has function should use. Valid values include: md5, sha1, sha256, and sha512.</p> <h3 id="length"><a href="#length" aria-hidden="true" class="header-anchor">#</a> <code>length</code></h3> <p>ç±»å‹ï¼š<code>Number</code> é»˜è®¤ï¼š<code>9999</code></p> <p>Users may also specify a length for the computed hash.</p> <h3 id="examples"><a href="#examples" aria-hidden="true" class="header-anchor">#</a> Examples</h3> <p>The following examples show how one might use <code>file-loader</code> and what the result would be.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// bundle file</span>
<span class="token keyword">import</span> png <span class="token keyword">from</span> <span class="token string">'image.png'</span>
<span class="token comment">// webpack.config.js</span>
<span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'dirname/[hash].[ext]'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
# result
dirname<span class="token operator">/</span><span class="token number">0</span>dcbbaa701328ae351f<span class="token punctuation">.</span>png
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><hr> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
<span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'[sha512:hash:base64:7].[ext]'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
# result
gdyb21L<span class="token punctuation">.</span>png
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><hr> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// bundle file</span>
<span class="token keyword">import</span> png <span class="token keyword">from</span> <span class="token string">'path/to/file.png'</span>
<span class="token comment">// webpack.config.js</span>
<span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'[path][name].[ext]?[hash]'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
# result
path<span class="token operator">/</span>to<span class="token operator">/</span>file<span class="token punctuation">.</span>png<span class="token operator">?</span>e43b20c069c4a01867c31e98cbce33c9
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>æ·»åŠ æ‰“åŒ…å›¾ç‰‡ç§ç±»ï¼Œé…ç½®å›¾ç‰‡è¾“å‡ºç›®å½•</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>   module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        rules<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
            test<span class="token punctuation">:</span> <span class="token regex">/\.(jpg|png|gif)$/</span><span class="token punctuation">,</span>   <span class="token comment">// æ·»åŠ å›¾ç‰‡ç§ç±»</span>
            use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
                options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    <span class="token comment">//placeholder å ä½ç¬¦</span>
                    name<span class="token punctuation">:</span> <span class="token string">'[name]_[hash].[ext]'</span>ï¼Œ
                    outputPath<span class="token punctuation">:</span> <span class="token string">'images/'</span>  <span class="token comment">// æ‰“åŒ…åˆ°distç›®å½•ä¸‹imagesæ–‡ä»¶å¤¹</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>æ›´å¤šé…ç½®æŸ¥çœ‹file-loaderæ–‡æ¡£</p> <h3 id="url-loader"><a href="#url-loader" aria-hidden="true" class="header-anchor">#</a> url-loader</h3> <p>ç±»ä¼¼file-loader ï¼Œå¤šäº†limité…ç½®é¡¹</p> <p>å®‰è£… <code>npm i url-loader -D</code></p> <p>é…ç½®limit: 2048</p> <p>å¦‚æœå›¾ç‰‡å¤§äº2048bytesåˆ™æ‰“åŒ…åˆ° imagesæ–‡ä»¶å¤¹ä¸‹</p> <p>å°äºåˆ™ç”Ÿæˆbase64æ’å…¥htmlï¼Œå‡å°‘ç½‘ç»œè¯·æ±‚æé«˜æ€§èƒ½</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>   module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        rules<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
            test<span class="token punctuation">:</span> <span class="token regex">/\.(jpg|png|gif)$/</span><span class="token punctuation">,</span>   <span class="token comment">// æ·»åŠ å›¾ç‰‡ç§ç±»</span>
            use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                loader<span class="token punctuation">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span> <span class="token comment">// æ”¹ç”¨url-loader</span>
                options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    <span class="token comment">//placeholder å ä½ç¬¦</span>
                    name<span class="token punctuation">:</span> <span class="token string">'[name]_[hash].[ext]'</span>ï¼Œ
                    outputPath<span class="token punctuation">:</span> <span class="token string">'images/'</span><span class="token punctuation">,</span>  <span class="token comment">// æ‰“åŒ…åˆ°distç›®å½•ä¸‹imagesæ–‡ä»¶å¤¹</span>
                    limmit<span class="token punctuation">:</span> <span class="token number">2048</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><img src="https://img.amazingtm.com/201903/09095118.png-sign" alt=""></p> <p>é˜…è¯»<a href="https://webpack.js.org/loaders/file-loader" target="_blank" rel="noopener noreferrer">file-loaderæ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://www.webpackjs.com/loaders/file-loader/" target="_blank" rel="noopener noreferrer">ä¸­æ–‡<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://webpack.js.org/loaders/url-loader" target="_blank" rel="noopener noreferrer">url-loaderæ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://www.webpackjs.com/loaders/url-loader/" target="_blank" rel="noopener noreferrer">ä¸­æ–‡<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="image-webpack-loader"><a href="#image-webpack-loader" aria-hidden="true" class="header-anchor">#</a> image-webpack-loader</h3> <p>ä¹‹å‰æåŠä½¿ç”¨ file-loader æ¥å¤„ç†å›¾ç‰‡æ–‡ä»¶ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å†æ·»åŠ ä¸€ä¸ª <a href="https://link.juejin.im/?target=https%3A%2F%2Fgithub.com%2Ftcoopman%2Fimage-webpack-loader" target="_blank" rel="noopener noreferrer">image-webpack-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> æ¥å‹ç¼©å›¾ç‰‡æ–‡ä»¶ã€‚ç®€å•çš„é…ç½®å¦‚ä¸‹ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>module.exports = {
  // ...
  module: {
    rules: [
      {
        test: /.*\.(gif|png|jpe?g|svg|webp)$/i,
        use: [
          {
            loader: 'file-loader',
            options: {}
          },
          {
            loader: 'image-webpack-loader',
            options: {
              mozjpeg: { // å‹ç¼© jpeg çš„é…ç½®
                progressive: true,
                quality: 65
              },
              optipng: { // ä½¿ç”¨ imagemin-optipng å‹ç¼© pngï¼Œenable: false ä¸ºå…³é—­
                enabled: false,
              },
              pngquant: { // ä½¿ç”¨ imagemin-pngquant å‹ç¼© png
                quality: '65-90',
                speed: 4
              },
              gifsicle: { // å‹ç¼© gif çš„é…ç½®
                interlaced: false,
              },
              webp: { // å¼€å¯ webpï¼Œä¼šæŠŠ jpg å’Œ png å›¾ç‰‡å‹ç¼©ä¸º webp æ ¼å¼
                quality: 75
              },
          },
        ],
      },
    ],
  },
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>image-webpack-loader çš„å‹ç¼©æ˜¯ä½¿ç”¨ <a href="https://link.juejin.im/?target=https%3A%2F%2Fgithub.com%2Fimagemin" target="_blank" rel="noopener noreferrer">imagemin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> æä¾›çš„ä¸€ç³»åˆ—å›¾ç‰‡å‹ç¼©ç±»åº“æ¥å¤„ç†çš„ï¼Œå¦‚æœéœ€è¦è¿›ä¸€æ­¥äº†è§£è¯¦ç»†çš„é…ç½®ï¼Œå¯ä»¥æŸ¥çœ‹å¯¹åº”ç±»åº“çš„å®˜æ–¹æ–‡æ¡£ <a href="https://link.juejin.im/?target=https%3A%2F%2Fgithub.com%2Ftcoopman%2Fimage-webpack-loader%23usage" target="_blank" rel="noopener noreferrer">usage of image-webpack-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚</p> <h2 id="ä½¿ç”¨loaderæ‰“åŒ…é™æ€èµ„æºï¼ˆæ ·å¼ç¯‡ä¸Šï¼‰"><a href="#ä½¿ç”¨loaderæ‰“åŒ…é™æ€èµ„æºï¼ˆæ ·å¼ç¯‡ä¸Šï¼‰" aria-hidden="true" class="header-anchor">#</a> ä½¿ç”¨loaderæ‰“åŒ…é™æ€èµ„æºï¼ˆæ ·å¼ç¯‡ä¸Šï¼‰</h2> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/02-03%20%E4%BD%BF%E7%94%A8%20Loader%20%E6%89%93%E5%8C%85%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%EF%BC%88%E6%A0%B7%E5%BC%8F%E7%AF%87%20-%20%E4%B8%8A%EF%BC%89/02-03/lesson" target="_blank" rel="noopener noreferrer">æœ¬èŠ‚å®Œæ•´ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>å®‰è£… <a href="https://webpack.js.org/loaders/css-loader" target="_blank" rel="noopener noreferrer">css-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://webpack.js.org/loaders/style-loader" target="_blank" rel="noopener noreferrer">style-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> å¤„ç†cssæ–‡ä»¶</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i css-loader style-loader -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>css-loaderå¤„ç†æ–‡ä»¶ä¾èµ– style-loaderæŒ‚è½½cssåˆ°html</p> <p>é…ç½®æ–‡ä»¶</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
	entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		main<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
			test<span class="token punctuation">:</span> <span class="token regex">/\.(jpg|png|gif)$/</span><span class="token punctuation">,</span>
			use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
				loader<span class="token punctuation">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
				options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
					name<span class="token punctuation">:</span> <span class="token string">'[name]_[hash].[ext]'</span><span class="token punctuation">,</span>
					outputPath<span class="token punctuation">:</span> <span class="token string">'images/'</span><span class="token punctuation">,</span>
					limit<span class="token punctuation">:</span> <span class="token number">10240</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span> 
		<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
			test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
			use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
				<span class="token string">'style-loader'</span><span class="token punctuation">,</span>   <span class="token comment">// loaderæ‰§è¡Œé¡ºåºä»ä¸‹åˆ°ä¸Šï¼Œä»å³åˆ°å·¦</span>
				<span class="token string">'css-loader'</span><span class="token punctuation">,</span> 
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
		path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>index.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> avatar <span class="token keyword">from</span> <span class="token string">'./avatar.jpg'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> style <span class="token keyword">from</span> <span class="token string">'./index.scss'</span><span class="token punctuation">;</span>


<span class="token function">createAvatar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> avatar<span class="token punctuation">;</span> 
img<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>style<span class="token punctuation">.</span>avatar<span class="token punctuation">)</span><span class="token punctuation">;</span>  æ·»åŠ æ ·å¼

<span class="token keyword">var</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>å®‰è£…<a href="https://webpack.js.org/loaders/sass-loader" target="_blank" rel="noopener noreferrer">scss-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>å¤„ç†scss</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> sass-loader node-sass  -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>é…ç½®æ–‡ä»¶</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
	entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		main<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
			test<span class="token punctuation">:</span> <span class="token regex">/\.(jpg|png|gif)$/</span><span class="token punctuation">,</span>
			use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
				loader<span class="token punctuation">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
				options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
					name<span class="token punctuation">:</span> <span class="token string">'[name]_[hash].[ext]'</span><span class="token punctuation">,</span>
					outputPath<span class="token punctuation">:</span> <span class="token string">'images/'</span><span class="token punctuation">,</span>
					limit<span class="token punctuation">:</span> <span class="token number">10240</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span> 
		<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
			test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
			use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
				<span class="token string">'style-loader'</span><span class="token punctuation">,</span> 
				<span class="token string">'css-loader'</span><span class="token punctuation">,</span> 
				<span class="token string">'sass-loader'</span><span class="token punctuation">,</span>   
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
		path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>loaderæ‰§è¡Œé¡ºåºä»ä¸‹åˆ°ä¸Šï¼Œä»å³åˆ°å·¦ï¼Œæ‰“åŒ…scssé¦–å…ˆä½¿ç”¨sass-loaderç¿»è¯‘ï¼Œå°†cssç»™åˆ°css-loaderï¼Œæœ€åç»™åˆ°style-loaderæŒ‚è½½åˆ°é¡µé¢</p> <p>ä½¿ç”¨<a href="https://webpack.js.org/loaders/postcss-loader" target="_blank" rel="noopener noreferrer">postcss-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>  è‡ªåŠ¨æ·»åŠ æµè§ˆå™¨å‰ç¼€</p> <p>å®‰è£…</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i -D postcss-loader
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å®‰è£…æ’ä»¶</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i -D autoprefixer
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>åˆ›å»ºé…ç½®æ–‡ä»¶</p> <p><strong>postcss.config.js</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token function">requre</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
			test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
			use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
				<span class="token string">'style-loader'</span><span class="token punctuation">,</span>   
				<span class="token string">'css-loader'</span><span class="token punctuation">,</span> 
				<span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
				<span class="token string">'postcss-loader'</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>loaderæ‰§è¡Œé¡ºåºä»ä¸‹åˆ°ä¸Šï¼Œä»å³åˆ°å·¦ï¼Œæ‰“åŒ… ,é¦–å…ˆpostcssä½¿ç”¨autoprefixeræ’ä»¶ï¼Œå†ä½¿ç”¨sass-loaderç¿»è¯‘ï¼Œå°†cssç»™åˆ°css-loaderï¼Œæœ€åç»™åˆ°style-loaderæŒ‚è½½åˆ°é¡µé¢</p> <h2 id="ä½¿ç”¨loaderæ‰“åŒ…é™æ€èµ„æºï¼ˆæ ·å¼ç¯‡ä¸‹ï¼‰"><a href="#ä½¿ç”¨loaderæ‰“åŒ…é™æ€èµ„æºï¼ˆæ ·å¼ç¯‡ä¸‹ï¼‰" aria-hidden="true" class="header-anchor">#</a> ä½¿ç”¨loaderæ‰“åŒ…é™æ€èµ„æºï¼ˆæ ·å¼ç¯‡ä¸‹ï¼‰</h2> <h3 id="css-module"><a href="#css-module" aria-hidden="true" class="header-anchor">#</a> css module</h3> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/02-04%20%E4%BD%BF%E7%94%A8%20Loader%20%E6%89%93%E5%8C%85%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%EF%BC%88%E6%A0%B7%E5%BC%8F%E7%AF%87%EF%BC%89/css-modules/lesson" target="_blank" rel="noopener noreferrer">css moduleå®Œæ•´ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>é…ç½®css-loaderå¸¸ç”¨é…ç½®é¡¹</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
			test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
			use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
				<span class="token string">'style-loader'</span><span class="token punctuation">,</span> 
				<span class="token punctuation">{</span>
					loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
					options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
						importLoaders<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
						modules<span class="token punctuation">:</span> <span class="token boolean">true</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
				<span class="token string">'postcss-loader'</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>importLoaders: 2</p> <p>ä»jså¼•å…¥scss1æ–‡ä»¶ï¼Œscss1ä¸­@import scss2ï¼Œscss2æ–‡ä»¶ä¸ä¼šå†èµ° sass-loaderå’Œpostcss-loaderï¼Œç›´æ¥è¿›å…¥css-loader</p> <p>é…ç½® importLoaders: 2 ç¡®ä¿scssæ–‡ä»¶ éƒ½æ‰§è¡Œ'sass-loader','postcss-loader'</p> <p>modules: true</p> <p>å¼€å¯cssæ¨¡å—åŒ–ä½¿cssåªåœ¨æ¨¡å—ä¸­æœ‰æ•ˆé¿å…å…¨å±€æ±¡æŸ“</p> <p>ä¿®æ”¹ä»£ç </p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token keyword">import</span> avatar <span class="token keyword">from</span> <span class="token string">'./avatar.jpg'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> style <span class="token keyword">from</span> <span class="token string">'./index.scss'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> createAvatar <span class="token keyword">from</span> <span class="token string">'./createAvatar'</span><span class="token punctuation">;</span>

<span class="token function">createAvatar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> avatar<span class="token punctuation">;</span>
img<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>style<span class="token punctuation">.</span>avatar<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ·»åŠ æ¨¡å—å‰ç¼€</span>

<span class="token keyword">var</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="iconfont"><a href="#iconfont" aria-hidden="true" class="header-anchor">#</a> iconfont</h3> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/02-04%20%E4%BD%BF%E7%94%A8%20Loader%20%E6%89%93%E5%8C%85%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%EF%BC%88%E6%A0%B7%E5%BC%8F%E7%AF%87%EF%BC%89/font/lesson" target="_blank" rel="noopener noreferrer">å®Œæ•´ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>åœ¨<a href="%5Bhttps://www.iconfont.cn%5D(https://www.iconfont.cn/)">é˜¿é‡Œå·´å·´çŸ¢é‡å›¾åº“</a>ç”Ÿæˆå­—ä½“æ–‡ä»¶</p> <p>æœ¬æ–‡ç”¨åˆ°å­—ä½“<a href="https://github.com/jinjun1994/example/tree/master/webpack4/02-04%20%E4%BD%BF%E7%94%A8%20Loader%20%E6%89%93%E5%8C%85%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%EF%BC%88%E6%A0%B7%E5%BC%8F%E7%AF%87%EF%BC%89/inconfont/font_936922_gumrsanrref" target="_blank" rel="noopener noreferrer">åœ°å€<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>é…ç½® file-loaderæ‰“åŒ…å­—ä½“æ–‡ä»¶</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		rules<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span>
			test<span class="token punctuation">:</span> <span class="token regex">/\.(eot|ttf|svg)$/</span><span class="token punctuation">,</span>
			use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
				loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span>
			<span class="token punctuation">}</span> 
		<span class="token punctuation">}</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ä½œä¸šï¼š</p> <p>é˜…è¯»ä¸‹åˆ—æ–‡æ¡£</p> <p><a href="https://webpack.js.org/loaders/postcss-loader" target="_blank" rel="noopener noreferrer">postcss-load<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://webpack.js.org/loaders/scss-loader" target="_blank" rel="noopener noreferrer">scss-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://webpack.js.org/loaders/style-loader" target="_blank" rel="noopener noreferrer">style-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://webpack.js.org/loaders/css-loader" target="_blank" rel="noopener noreferrer">css-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://webpack.js.org/loaders/file-loader" target="_blank" rel="noopener noreferrer">file-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://webpack.js.org/guides/asset-management" target="_blank" rel="noopener noreferrer">æ–‡ä»¶èµ„æºç®¡ç†<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="ä½¿ç”¨pluginsä½¿æ‰“åŒ…æ›´ä¾¿æ·"><a href="#ä½¿ç”¨pluginsä½¿æ‰“åŒ…æ›´ä¾¿æ·" aria-hidden="true" class="header-anchor">#</a> ä½¿ç”¨pluginsä½¿æ‰“åŒ…æ›´ä¾¿æ·</h2> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/02-05%20%E4%BD%BF%E7%94%A8%20plugins%20%E8%AE%A9%E6%89%93%E5%8C%85%E6%9B%B4%E4%BE%BF%E6%8D%B7/02-05/lesson" target="_blank" rel="noopener noreferrer">å®Œæ•´ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>ä¹‹å‰æˆ‘ä»¬ /dist ç›®å½•ä¸‹index.htmlæ–‡ä»¶æ˜¯æ‰‹åŠ¨æ·»åŠ ï¼Œç°åœ¨é…ç½®è‡ªåŠ¨ç”Ÿæˆ</p> <h3 id="htmlwebpackplugin"><a href="#htmlwebpackplugin" aria-hidden="true" class="header-anchor">#</a> <a href="https://webpack.js.org/plugins/html-webpack-plugin" target="_blank" rel="noopener noreferrer">HtmlWebpackPlugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>Installation</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev html-webpack-plugin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>é…ç½®</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">/</span> webpack<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
<span class="token keyword">var</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//å¼•å…¥æ’ä»¶</span>
<span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'index.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">'index_bundle.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>           <span class="token comment">// å®ä¾‹åŒ–æ’ä»¶</span>
		template<span class="token punctuation">:</span> <span class="token string">'src/index.html'</span>          <span class="token comment">// é…ç½®æ¨¡æ¿</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span>   
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>è¯¥æ’ä»¶åœ¨æ‰“åŒ…ç»“æŸåè‡ªåŠ¨ç”Ÿæˆhtmlæ–‡ä»¶ï¼Œå¹¶æŠŠæ‰“åŒ…ç”Ÿæˆçš„jsè‡ªåŠ¨å¼•å…¥è¯¥htmlæ–‡ä»¶ï¼Œé…ç½®templateå¯ä»¥æŒ‡å®šhtmlæ¨¡æ¿ï¼Œ</p> <p>pluginå¯ä»¥åœ¨webpackè¿è¡Œåˆ°æŸä¸ªæ—¶åˆ»çš„æ—¶å€™ï¼Œå¸®ä½ åšæœ‰ä¸€äº›äº‹æƒ…ï¼Œå¾ˆåƒç”Ÿå‘½å‘¨æœŸå‡½æ•°</p> <h3 id="clean-webpack-plugin"><a href="#clean-webpack-plugin" aria-hidden="true" class="header-anchor">#</a> clean-webpack-plugin</h3> <p>å®ç°æ‰“åŒ…æ—¶æ¸…é™¤ä¸Šæ¬¡æ‰“åŒ…æ–‡ä»¶åŠŸèƒ½</p> <p>å®‰è£…</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i clean-webpack-plugin -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">/</span> webpack<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
<span class="token keyword">var</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//å¼•å…¥html-webpack-plugin</span>
<span class="token keyword">const</span> CleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¼•å…¥clean-webpack-plugin</span>

<span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'index.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">'index_bundle.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>           <span class="token comment">// å®ä¾‹åŒ–æ’ä»¶</span>
		template<span class="token punctuation">:</span> <span class="token string">'src/index.html'</span>          <span class="token comment">// é…ç½®æ¨¡æ¿</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'dist'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>   <span class="token comment">// å®ä¾‹åŒ–æ’ä»¶ï¼Œé…ç½®æ¸…é™¤ç›®å½•dist</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>æ‰“åŒ…æµç¨‹ï¼šè¿è¡Œ npm run bundleå</p> <p>é¦–å…ˆæ¸…é™¤distç›®å½• ï¼Œåœ¨æ‰“åŒ…ï¼Œæœ€åè¿è¡Œhtml-webpack-plugin</p> <p>å®˜ç½‘<a href="https://webpack.js.org/plugins" target="_blank" rel="noopener noreferrer">plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>pluginå¾ˆå¤šï¼Œä¸šåŠ¡åœºæ™¯é‡åˆ°æŸäº›éœ€æ±‚æœç´¢é…ç½®ï¼Œå†çœ‹æ–‡æ¡£ä½¿ç”¨å³å¯</p> <h2 id="entryä¸outputçš„åŸºç¡€é…ç½®"><a href="#entryä¸outputçš„åŸºç¡€é…ç½®" aria-hidden="true" class="header-anchor">#</a> entryä¸outputçš„åŸºç¡€é…ç½®</h2> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/02-06%20Entry%20%E4%B8%8E%20Output%20%E7%9A%84%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/02-06/lesson" target="_blank" rel="noopener noreferrer">å…¨éƒ¨ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="entry"><a href="#entry" aria-hidden="true" class="header-anchor">#</a> entry</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span> 
<span class="token comment">// ç­‰ä»·äº</span>
entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		main<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span>     <span class="token comment">// åˆ é™¤è¿™è¡Œï¼Œåˆ™ä¼šæ‰“åŒ…è¾“å‡º main.js</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>æ‰“åŒ…å¤šæ¬¡</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		main<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
		sub<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    publicPath<span class="token punctuation">:</span> <span class="token string">'http://cnd.com.cn'</span>  <span class="token comment">// é…ç½®cdnåœ°å€</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">'[name].js'</span>     <span class="token comment">// éœ€è¦ä½¿ç”¨å ä½ç¬¦,[name]è¡¨ç¤ºentryçš„keyå€¼</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ä¼šè¾“å‡º main.js sub.js</p> <p><a href="https://webpack.js.org/configuration/output#outputpublicpath" target="_blank" rel="noopener noreferrer">publiPathæ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>html-webpack-plugin ä¼šæ³¨å…¥ main.js,sub.js</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://cdn.com.cn/main.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://cdn.com.cn/sub.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä½œä¸šï¼š</p> <p>æŸ¥çœ‹<a href="https://webpack.js.org/configuration/output" target="_blank" rel="noopener noreferrer">outputæ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://webpack.js.org/configuration/entry-context" target="_blank" rel="noopener noreferrer">entry<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://webpack.js.org/guides/output-management" target="_blank" rel="noopener noreferrer">output management<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://webpack.js.org/plugins/html-webpack-plugin" target="_blank" rel="noopener noreferrer">html-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://github.com/jantimon/html-webpack-plugin#options" target="_blank" rel="noopener noreferrer">https://github.com/jantimon/html-webpack-plugin#options<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="sourcemapçš„é…ç½®"><a href="#sourcemapçš„é…ç½®" aria-hidden="true" class="header-anchor">#</a> sourceMapçš„é…ç½®</h2> <p>æˆ‘ä»¬å…ˆå…³é—­sourceMap</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
	devtool<span class="token punctuation">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>åœ¨index.jsè¾“å…¥ <code>consele.log('hellow word')</code></p> <p>æ‰“åŒ…æ‰“å¼€htmlæ§åˆ¶å°ä¼šæŠ¥é”™</p> <p><img src="https://img.amazingtm.com/201903/10013350.png" alt=""></p> <p>å¼€å¯sourceMap</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
	devtool<span class="token punctuation">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æ‰“åŒ…æ‰“å¼€htmlæŠ¥é”™å¦‚ä¸‹</p> <p><img src="https://img.amazingtm.com/201903/10014041.png" alt=""></p> <p>sourceMap ä»–æ˜¯ä¸€ä¸ªæ˜ å°„å…³ç³»ï¼Œç›®æ ‡ä»£ç å’Œæºä»£ç çš„æ˜ å°„ï¼Œä»–çŸ¥é“distç›®å½•ä¸‹main.jsæ–‡ä»¶ 96è¡Œï¼Œå®é™…ä¸Šå¯¹åº”srcç›®å½•ä¸‹index.jsç¬¬ä¸€è¡Œ</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
	<span class="token comment">// development devtool: 'cheap-module-eval-source-map',  </span>
	<span class="token comment">// production devtool: 'cheap-module-source-map',</span>
	devtool<span class="token punctuation">:</span> <span class="token string">'cheap-module-eval-source-map'</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><a href="https://webpack.js.org/configuration/devtool" target="_blank" rel="noopener noreferrer">devtoolæ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://www.webpackjs.com/configuration/devtool/" target="_blank" rel="noopener noreferrer">ä¸­æ–‡æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>é…ç½®sourceMapå®é™…ä¸Šé…ç½®devtool</p> <p><img src="https://img.amazingtm.com/201903/10014833.png-sign" alt=""></p> <h3 id="å“è´¨è¯´æ˜-quality"><a href="#å“è´¨è¯´æ˜-quality" aria-hidden="true" class="header-anchor">#</a> å“è´¨è¯´æ˜(quality)</h3> <p><code>æ‰“åŒ…åçš„ä»£ç </code> - å°†æ‰€æœ‰ç”Ÿæˆçš„ä»£ç è§†ä¸ºä¸€å¤§å—ä»£ç ã€‚ä½ çœ‹ä¸åˆ°ç›¸äº’åˆ†ç¦»çš„æ¨¡å—ã€‚</p> <p><code>ç”Ÿæˆåçš„ä»£ç </code> - æ¯ä¸ªæ¨¡å—ç›¸äº’åˆ†ç¦»ï¼Œå¹¶ç”¨æ¨¡å—åç§°è¿›è¡Œæ³¨é‡Šã€‚å¯ä»¥çœ‹åˆ° webpack ç”Ÿæˆçš„ä»£ç ã€‚ç¤ºä¾‹ï¼šä½ ä¼šçœ‹åˆ°ç±»ä¼¼ <code>var module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(42); module__WEBPACK_IMPORTED_MODULE_1__.a();</code>ï¼Œè€Œä¸æ˜¯ <code>import {test} from &quot;module&quot;; test();</code>ã€‚</p> <p><code>è½¬æ¢è¿‡çš„ä»£ç </code> - æ¯ä¸ªæ¨¡å—ç›¸äº’åˆ†ç¦»ï¼Œå¹¶ç”¨æ¨¡å—åç§°è¿›è¡Œæ³¨é‡Šã€‚å¯ä»¥çœ‹åˆ° webpack è½¬æ¢å‰ã€loader è½¬è¯‘åçš„ä»£ç ã€‚ç¤ºä¾‹ï¼šä½ ä¼šçœ‹åˆ°ç±»ä¼¼ <code>import {test} from &quot;module&quot;; var A = function(_test) { ... }(test);</code>ï¼Œè€Œä¸æ˜¯ <code>import {test} from &quot;module&quot;; class A extends test {}</code>ã€‚</p> <p><code>åŸå§‹æºä»£ç </code> - æ¯ä¸ªæ¨¡å—ç›¸äº’åˆ†ç¦»ï¼Œå¹¶ç”¨æ¨¡å—åç§°è¿›è¡Œæ³¨é‡Šã€‚ä½ ä¼šçœ‹åˆ°è½¬è¯‘ä¹‹å‰çš„ä»£ç ï¼Œæ­£å¦‚ç¼–å†™å®ƒæ—¶ã€‚è¿™å–å†³äº loader æ”¯æŒã€‚</p> <p><code>æ— æºä»£ç å†…å®¹</code> - source map ä¸­ä¸åŒ…å«æºä»£ç å†…å®¹ã€‚æµè§ˆå™¨é€šå¸¸ä¼šå°è¯•ä» web æœåŠ¡å™¨æˆ–æ–‡ä»¶ç³»ç»ŸåŠ è½½æºä»£ç ã€‚ä½ å¿…é¡»ç¡®ä¿æ­£ç¡®è®¾ç½® <a href="https://www.webpackjs.com/configuration/output/#output-devtoolmodulefilenametemplate" target="_blank" rel="noopener noreferrer"><code>output.devtoolModuleFilenameTemplate</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼Œä»¥åŒ¹é…æºä»£ç çš„ urlã€‚</p> <p><code>ï¼ˆä»…é™è¡Œï¼‰</code> - source map è¢«ç®€åŒ–ä¸ºæ¯è¡Œä¸€ä¸ªæ˜ å°„ã€‚è¿™é€šå¸¸æ„å‘³ç€æ¯ä¸ªè¯­å¥åªæœ‰ä¸€ä¸ªæ˜ å°„ï¼ˆå‡è®¾ä½ ä½¿ç”¨è¿™ç§æ–¹å¼ï¼‰ã€‚è¿™ä¼šå¦¨ç¢ä½ åœ¨è¯­å¥çº§åˆ«ä¸Šè°ƒè¯•æ‰§è¡Œï¼Œä¹Ÿä¼šå¦¨ç¢ä½ åœ¨æ¯è¡Œçš„ä¸€äº›åˆ—ä¸Šè®¾ç½®æ–­ç‚¹ã€‚ä¸å‹ç¼©åçš„ä»£ç ç»„åˆåï¼Œæ˜ å°„å…³ç³»æ˜¯ä¸å¯èƒ½å®ç°çš„ï¼Œå› ä¸ºå‹ç¼©å·¥å…·é€šå¸¸åªä¼šè¾“å‡ºä¸€è¡Œã€‚</p> <h3 id="å¯¹äºå¼€å‘ç¯å¢ƒ"><a href="#å¯¹äºå¼€å‘ç¯å¢ƒ" aria-hidden="true" class="header-anchor">#</a> å¯¹äºå¼€å‘ç¯å¢ƒ</h3> <p>ä»¥ä¸‹é€‰é¡¹éå¸¸é€‚åˆå¼€å‘ç¯å¢ƒï¼š</p> <p><code>eval</code> - æ¯ä¸ªæ¨¡å—éƒ½ä½¿ç”¨ <code>eval()</code> æ‰§è¡Œï¼Œå¹¶ä¸”éƒ½æœ‰ <code>//@ sourceURL</code>ã€‚æ­¤é€‰é¡¹ä¼šéå¸¸å¿«åœ°æ„å»ºã€‚ä¸»è¦ç¼ºç‚¹æ˜¯ï¼Œç”±äºä¼šæ˜ å°„åˆ°è½¬æ¢åçš„ä»£ç ï¼Œè€Œä¸æ˜¯æ˜ å°„åˆ°åŸå§‹ä»£ç ï¼ˆæ²¡æœ‰ä» loader ä¸­è·å– source mapï¼‰ï¼Œæ‰€ä»¥ä¸èƒ½æ­£ç¡®çš„æ˜¾ç¤ºè¡Œæ•°ã€‚</p> <p><code>eval-source-map</code> - æ¯ä¸ªæ¨¡å—ä½¿ç”¨ <code>eval()</code> æ‰§è¡Œï¼Œå¹¶ä¸” source map è½¬æ¢ä¸º DataUrl åæ·»åŠ åˆ° <code>eval()</code> ä¸­ã€‚åˆå§‹åŒ– source map æ—¶æ¯”è¾ƒæ…¢ï¼Œä½†æ˜¯ä¼šåœ¨é‡æ–°æ„å»ºæ—¶æä¾›æ¯”è¾ƒå¿«çš„é€Ÿåº¦ï¼Œå¹¶ä¸”ç”Ÿæˆå®é™…çš„æ–‡ä»¶ã€‚è¡Œæ•°èƒ½å¤Ÿæ­£ç¡®æ˜ å°„ï¼Œå› ä¸ºä¼šæ˜ å°„åˆ°åŸå§‹ä»£ç ä¸­ã€‚å®ƒä¼šç”Ÿæˆç”¨äºå¼€å‘ç¯å¢ƒçš„æœ€ä½³å“è´¨çš„ source mapã€‚</p> <p><code>cheap-eval-source-map</code> - ç±»ä¼¼ <code>eval-source-map</code>ï¼Œæ¯ä¸ªæ¨¡å—ä½¿ç”¨ <code>eval()</code> æ‰§è¡Œã€‚è¿™æ˜¯ &quot;cheap(ä½å¼€é”€)&quot; çš„ source mapï¼Œå› ä¸ºå®ƒæ²¡æœ‰ç”Ÿæˆåˆ—æ˜ å°„(column mapping)ï¼Œåªæ˜¯æ˜ å°„è¡Œæ•°ã€‚å®ƒä¼šå¿½ç•¥æºè‡ª loader çš„ source mapï¼Œå¹¶ä¸”ä»…æ˜¾ç¤ºè½¬è¯‘åçš„ä»£ç ï¼Œå°±åƒ <code>eval</code> devtoolã€‚</p> <p><code>cheap-module-eval-source-map</code> - ç±»ä¼¼ <code>cheap-eval-source-map</code>ï¼Œå¹¶ä¸”ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæºè‡ª loader çš„ source map ä¼šå¾—åˆ°æ›´å¥½çš„å¤„ç†ç»“æœã€‚ç„¶è€Œï¼Œloader source map ä¼šè¢«ç®€åŒ–ä¸ºæ¯è¡Œä¸€ä¸ªæ˜ å°„(mapping)ã€‚</p> <p>è¯´æ˜ï¼š</p> <p>æ·»åŠ  inline ä¼šå°†è¦æ˜ å°„å…³ç³»æ–‡ä»¶åŠ è½½åˆ°jsæ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯ç”Ÿæˆ.mapæ–‡ä»¶</p> <p>æ·»åŠ cheapåªç²¾ç¡®åˆ°è¡Œï¼Œåªç®¡ä¸šåŠ¡ä»£ç è‡ªå·±å†™çš„ä»£ç ï¼Œä¸ç®¡loaderçš„ï¼Œä¾‹å¦‚cheap-eval-source-mapï¼Œæ·»åŠ moduleåˆ™ç®¡loaderï¼Œç¬¬ä¸‰æ–¹æ¨¡å—ç­‰çš„é”™è¯¯</p> <p>eval åˆ™ä¸æ‰“åŒ…mapæ–‡ä»¶ï¼Œç›´æ¥ç”¨evalè¾“å‡ºé”™è¯¯æ˜ å°„ï¼Œæ•ˆç‡æœ€å¿«ï¼Œä½†æ˜¯è¾ƒå¤æ‚ä»£ç ä¸å…¨é¢</p> <p>å¼€å‘ç¯å¢ƒä¸‹å»ºè®®ä½¿ç”¨</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
	devtool<span class="token punctuation">:</span> <span class="token string">'cheap-module-eval-source-map'</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æ”¾åˆ°ç”Ÿäº§ç¯å¢ƒ</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	mode<span class="token punctuation">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
	devtool<span class="token punctuation">:</span> <span class="token string">'cheap-module-source-map'</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>sourceMapåŸç†</p> <h2 id="ä½¿ç”¨-webpackdevserver-æå‡å¼€å‘æ•ˆç‡"><a href="#ä½¿ç”¨-webpackdevserver-æå‡å¼€å‘æ•ˆç‡" aria-hidden="true" class="header-anchor">#</a> ä½¿ç”¨ WebpackDevServer æå‡å¼€å‘æ•ˆç‡</h2> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/02-08%20%E4%BD%BF%E7%94%A8%20WebpackDevServer%20%E6%8F%90%E5%8D%87%E5%BC%80%E5%8F%91%E6%95%88%E7%8E%87/02-08/lesson" target="_blank" rel="noopener noreferrer">å…¨éƒ¨ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>å®ç°æ–‡ä»¶æ›´æ–°è‡ªåŠ¨æ‰“åŒ…</p> <h3 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" aria-hidden="true" class="header-anchor">#</a> æ–¹æ³•ä¸€</h3> <p>ä¿®æ”¹scriptæ–‡ä»¶</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>  // package.json

  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;watch&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --watch&quot;</span><span class="token punctuation">,</span>        // ç›‘æ§æ‰“åŒ…æ–‡ä»¶å˜åŒ–ï¼Œè‡ªåŠ¨æ‰“åŒ…
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="æ–¹æ³•äºŒï¼šwebpackdevserver"><a href="#æ–¹æ³•äºŒï¼šwebpackdevserver" aria-hidden="true" class="header-anchor">#</a> æ–¹æ³•äºŒï¼šwebpackdevServer</h3> <p>é…ç½®devServer    vue-cli 3 reactæ–°ç‰ˆéƒ½ä½¿ç”¨</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
<span class="token operator">...</span>
	devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		contentBase<span class="token punctuation">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>  <span class="token comment">// æœåŠ¡å™¨å¯åŠ¨ç›®å½•</span>
		open<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>             <span class="token comment">// å¯åŠ¨æ—¶è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®æœåŠ¡å™¨åœ°å€</span>
		port<span class="token punctuation">:</span> <span class="token number">8080</span>             <span class="token comment">// æœåŠ¡å™¨ç«¯å£ é»˜è®¤8080</span>
	<span class="token punctuation">}</span>
<span class="token operator">...</span>    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-json line-numbers-mode"><pre class="language-json"><code>  // package.json

  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;watch&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --watch&quot;</span><span class="token punctuation">,</span>        
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server&quot;</span><span class="token punctuation">,</span>       // æ·»åŠ  devServeå¯åŠ¨å‘½ä»¤
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>å®‰è£… devServer</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i webpack-dev-server -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å¯åŠ¨</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> run start
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æ‰©å±•çŸ¥è¯†ï¼šdevserverå¯ä»¥é…ç½®è·¨åŸŸ</p> <p><a href="https://webpack.js.org/configuration/dev-server#devserverproxy" target="_blank" rel="noopener noreferrer">æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
<span class="token operator">...</span>
	devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		contentBase<span class="token punctuation">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>  <span class="token comment">// æœåŠ¡å™¨å¯åŠ¨ç›®å½•</span>
		open<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>             <span class="token comment">// å¯åŠ¨æ—¶è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®æœåŠ¡å™¨åœ°å€</span>
		port<span class="token punctuation">:</span> <span class="token number">8080</span> <span class="token punctuation">,</span>            <span class="token comment">// æœåŠ¡å™¨ç«¯å£ é»˜è®¤8080</span>
        proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token string">'http://localhost:3000'</span>
       <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token operator">...</span>    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>distç›®å½•ä¼šæ”¾åˆ°å†…å­˜ä¸­ï¼ŒåŠ å¿«é€Ÿåº¦</p> <h3 id="æ–¹æ³•ä¸‰ï¼šmiddleware"><a href="#æ–¹æ³•ä¸‰ï¼šmiddleware" aria-hidden="true" class="header-anchor">#</a> æ–¹æ³•ä¸‰ï¼šmiddleware</h3> <p>è€ç‰ˆæœ¬devServerä¸ç¨³å®šï¼Œvueç­‰è„šæ‰‹æ¶ä½¿ç”¨ node server</p> <p>å®‰è£… koa æˆ–expresså¿«é€Ÿæ­å»ºæœåŠ¡å™¨ï¼ŒåŠwebpack-dev-middlewareä¸­é—´ä»¶ç›‘æ§webpackæ–‡ä»¶å˜åŒ–</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i express webpack-dev-middleware -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä¿®æ”¹package.json</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>  // package.json

  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node server.js&quot;</span>   // å¯åŠ¨å‘½ä»¤
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ä¿®æ”¹webpacké…ç½®</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        piblicPath<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>             <span class="token comment">// æ·»åŠ è¿™è¡Œç¡®ä¿è·¯å¾„æ­£ç¡®</span>
		filename<span class="token punctuation">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
		path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æ–°å»ºserver.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å¼•å…¥ express</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å¼•å…¥webpack</span>
<span class="token keyword">const</span> webpackDevMiddleware <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-dev-middleware'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.config.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¼•å…¥webpacké…ç½®æ–‡ä»¶</span>
<span class="token comment">// åœ¨nodeä¸­ç›´æ¥ä½¿ç”¨webpack</span>
<span class="token comment">// åœ¨å‘½ä»¤è¡Œé‡Œä½¿ç”¨webpack</span>
<span class="token keyword">const</span> complier <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// webpackç¼–è¯‘å™¨ï¼Œè¿è¡Œä¸€æ¬¡å°±ä¼šæ‰“åŒ…ä»£ç ä¸€æ¬¡</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//åˆ›å»ºåº”ç”¨</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">webpackDevMiddleware</span><span class="token punctuation">(</span>complier<span class="token punctuation">,</span> <span class="token punctuation">{</span>
     piblicPath<span class="token punctuation">:</span> config<span class="token punctuation">.</span>output<span class="token punctuation">.</span>piblicPath  <span class="token comment">//ä½¿ç”¨ä¹‹å‰é…ç½®çš„è·¯å¾„</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä½¿ç”¨ç¼–è¯‘å™¨ä¸­é—´ä»¶ï¼Œ</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server is running'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>è¿è¡Œ <code>npm run server</code>å³å¯</p> <p>æ²¡æœ‰devserveræ™ºèƒ½ï¼Œæ¯”å¦‚ä¸èƒ½è‡ªåŠ¨åˆ·æ–°ï¼Œéœ€è¦é…ç½®å¾ˆå¤šä¸œè¥¿æ‰èƒ½è¾¾åˆ°å‰è€…æ•ˆæœï¼ŒçŸ¥é“æœ‰è¿™ä¸ªæ–¹æ³•å³å¯</p> <p><a href="https://webpack.js.org/api/cli#usage-with-config-file" target="_blank" rel="noopener noreferrer">å‘½ä»¤è¡Œä½¿ç”¨webpack<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://webpack.js.org/api/node" target="_blank" rel="noopener noreferrer">nodeä¸­ä½¿ç”¨webpack<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>ä½œä¸šé˜…è¯»æ–‡æ¡£</p> <p><a href="https://webpack.js.org/guides/development" target="_blank" rel="noopener noreferrer">Development<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://webpack.js.org/configuration/dev-server" target="_blank" rel="noopener noreferrer">DevServer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://webpack.js.org/configuration/devtool" target="_blank" rel="noopener noreferrer">devtool<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="hot-module-replacement-çƒ­æ¨¡å—æ›´æ–°"><a href="#hot-module-replacement-çƒ­æ¨¡å—æ›´æ–°" aria-hidden="true" class="header-anchor">#</a> Hot Module Replacement çƒ­æ¨¡å—æ›´æ–°</h2> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/02-09%20Hot%20Module%20Replacement%20%E7%83%AD%E6%A8%A1%E5%9D%97%E6%9B%B4%E6%96%B0/02-09/lesson" target="_blank" rel="noopener noreferrer">å…¨éƒ¨ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>ç®€å†™ä¸º HMR</p> <p>é¦–å…ˆæ·»åŠ cssæ”¯æŒ</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>

	module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		rules<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span>
			test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
			use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
				<span class="token string">'style-loader'</span><span class="token punctuation">,</span> 
				<span class="token punctuation">{</span>
					loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
					options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
						importLoaders<span class="token punctuation">:</span> <span class="token number">2</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
				<span class="token string">'postcss-loader'</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>           <span class="token comment">// æ·»åŠ cssæ–‡ä»¶æ”¯æŒ</span>
			use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
				<span class="token string">'style-loader'</span><span class="token punctuation">,</span>
				<span class="token string">'css-loader'</span><span class="token punctuation">,</span>
				<span class="token string">'postcss-loader'</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>ä¿®æ”¹index.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'./style.css'</span><span class="token punctuation">;</span>
 <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
btn<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'æ–°å¢'</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>btn<span class="token punctuation">)</span><span class="token punctuation">;</span>

 btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'item'</span><span class="token punctuation">;</span>
	document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>æ·»åŠ  style.css</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">div:nth-of-type(odd)</span> <span class="token punctuation">{</span>
	<span class="token property">background</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span>   // å¶æ•°å˜è‰²
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å¯åŠ¨ devserver  <code>npm run start</code></p> <p>æ•ˆæœ,ç‚¹å‡»ç”Ÿæˆdivï¼Œå¶æ•°ä¸ºé»„è‰²</p> <p><img src="https://img.amazingtm.com/201903/10041005.png-sign" alt=""></p> <p>ç„¶è€Œå½“æˆ‘ä»¬ä¿®æ”¹cssä»£ç </p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">div:nth-of-type(odd)</span> <span class="token punctuation">{</span>
	<span class="token property">background</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>   // å¶æ•°å˜è‰²
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>devServerä¼šè‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨ï¼Œitemä¼šæ¶ˆå¤±ï¼Œéœ€è¦é‡æ–°ç‚¹å‡»ç”Ÿæˆitemæ‰èƒ½çœ‹åˆ°æ•ˆæœ</p> <p>HMRå°±æ˜¯æ¨¡å—çƒ­æ›¿æ¢åŠŸèƒ½,ä¼šåœ¨åº”ç”¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­æ›¿æ¢ã€æ·»åŠ æˆ–åˆ é™¤æ¨¡å—ï¼Œè€Œæ— éœ€é‡æ–°åŠ è½½é¡µé¢ã€‚è¿™ä½¿å¾—ä½ å¯ä»¥åœ¨ç‹¬ç«‹æ¨¡å—å˜æ›´åï¼Œæ— éœ€åˆ·æ–°æ•´ä¸ªé¡µé¢ï¼Œå°±å¯ä»¥æ›´æ–°è¿™äº›æ¨¡å—ï¼Œæå¤§åœ°åŠ é€Ÿäº†å¼€å‘æ—¶é—´ã€‚</p> <p>é…ç½®</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å¼•å…¥webpackï¼Œä¸ºwebpackæ’ä»¶</span>
<span class="token operator">...</span>
devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		contentBase<span class="token punctuation">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
		open<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		port<span class="token punctuation">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
		hot<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>     <span class="token comment">// å¼€å¯HRMåŠŸèƒ½</span>
		hotOnly<span class="token punctuation">:</span> <span class="token boolean">true</span>  <span class="token comment">//å³ä½¿HRMæœªç”Ÿæ•ˆä¹Ÿä¸åˆ·æ–°æµè§ˆå™¨</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">...</span>
plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			template<span class="token punctuation">:</span> <span class="token string">'src/index.html'</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
		<span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'dist'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// æ·»åŠ HRMæ’ä»¶</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>é…ç½®æˆåŠŸï¼Œé‡å¯å‘½ä»¤ <code>npm run start</code></p> <p>æ­¤æ—¶æˆ‘ä»¬ä¿®æ”¹cssä»£ç ï¼Œhtmlé¡µé¢ä¸Šçš„itemä¸ä¼šæ¶ˆå¤±ï¼Œå®æ—¶æ›´æ–°</p> <p>HRMå¯¹jsçš„ä½œç”¨</p> <p>æˆ‘ä»¬å…ˆå…³é—­HRMåŠŸèƒ½ï¼Œæ³¨é‡Šæ‰é…ç½®æ–‡ä»¶å³å¯</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>	<span class="token comment">//	hot: true,     // å¼€å¯HRMåŠŸèƒ½</span>
	<span class="token comment">//	hotOnly: true  //å³ä½¿HRMæœªç”Ÿæ•ˆä¹Ÿä¸åˆ·æ–°æµè§ˆå™¨</span>
	<span class="token comment">//	new webpack.HotModuleReplacementPlugin()    // æ·»åŠ HRMæ’ä»¶</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä¿®æ”¹index.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> counter <span class="token keyword">from</span> <span class="token string">'./counter'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> number <span class="token keyword">from</span> <span class="token string">'./number'</span><span class="token punctuation">;</span>

<span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æ·»åŠ counter.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	div<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token string">'counter'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	div<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>innerHTML<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>
	<span class="token punctuation">}</span>
	document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> counter<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>æ·»åŠ number.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	div<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token string">'number'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token number">3000</span><span class="token punctuation">;</span>
	document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> number<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><img src="https://img.amazingtm.com/201903/10043101.png-sign" alt=""></p> <p>å½“æˆ‘ä»¬ç‚¹å‡»ç¬¬ä¸€ä¸ªdivæ•°å­—ä¼š+1</p> <p>æˆ‘ä»¬ä¿®æ”¹number.js çš„<code>div.innerHTML = 3000;</code>æ”¹ä¸ºå…¶ä»–æ•°å­—ï¼Œå‘ç°ç¬¬ä¸€ä¸ªdivä¼šé‡ç½®ä¸º1</p> <p>æˆ‘ä»¬éœ€è¦å®ç°ä¿®æ”¹number.jsä¸ä¼šå½±å“ç¬¬ä¸€ä¸ªdiv</p> <p>è¿™å°±æ˜¯HRMçš„åŠŸèƒ½ã€‚</p> <p>æˆ‘ä»¬åˆ é™¤åˆšæ‰çš„æ³¨é‡Šï¼Œé‡æ–°å¼€å¯HRMåŠŸèƒ½ã€‚</p> <p>æ­¤æ—¶æˆ‘ä»¬æ›´æ”¹number.js çš„<code>div.innerHTML = 3000;</code>ä¸ºå…¶ä»–æ•°å­—ï¼Œä½†æ˜¯å‘ç°ï¼Œæ­¤æ—¶ç¬¬ä¸€ä¸ªdivä¸ä¼šé‡ç½®ä¸º1ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªdicvæ•°å­—ä»ä¸º3000ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ç‚¹ä»£ç </p> <p>å½“numberå˜åŒ–æ—¶ï¼Œnumberé‡æ–°æ‰§è¡Œä¸€æ¬¡ï¼Œcounterä¸å˜</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> counter <span class="token keyword">from</span> <span class="token string">'./counter'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> number <span class="token keyword">from</span> <span class="token string">'./number'</span><span class="token punctuation">;</span>

<span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>                  <span class="token comment">// å¦‚æœHRMå¼€å¯ </span>
	module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">'./number'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    
		document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//åˆ é™¤div</span>
		<span class="token function">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// é‡æ–°æ‰§è¡Œnumber</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><code>module.hot.accept</code> æ–¹æ³•æ¥å—ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä¾èµ–çš„æ–‡ä»¶åï¼Œå¦‚æœnumberæ–‡ä»¶å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šæ‰§è¡Œåé¢çš„å‡½æ•°</p> <p>è¿™æ ·æˆ‘ä»¬å°±å®ç°äº†jsä¸­HRMåŠŸèƒ½</p> <p>ä¸ºä»€ä¹ˆcssä¸éœ€è¦å†™è¿™æ®µä»£ç ï¼Œå…¶å®æ˜¯css-loaderå·²ç»å†™å¥½äº†</p> <p>vue-loaderä¹Ÿä¼šå†™å¥½ reactæ˜¯babel preset</p> <p><a href="https://juejin.im/post/5b363b576fb9a00e6f660f45#comment" target="_blank" rel="noopener noreferrer">å‚è€ƒæ–‡ç« <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>ä½œä¸š</p> <p><a href="https://webpack.js.org/guides/hot-module-replacement" target="_blank" rel="noopener noreferrer">HRMæŒ‡å—<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://www.webpackjs.com/guides/hot-module-replacement/" target="_blank" rel="noopener noreferrer">ä¸­æ–‡<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://webpack.js.org/api/hot-module-replacement" target="_blank" rel="noopener noreferrer">HRMapi<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><a href="https://www.webpackjs.com/api/hot-module-replacement/" target="_blank" rel="noopener noreferrer">ä¸­æ–‡<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://webpack.js.org/concepts/hot-module-replacement" target="_blank" rel="noopener noreferrer">HRMæ¦‚å¿µ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><a href="https://www.webpackjs.com/concepts/hot-module-replacement/" target="_blank" rel="noopener noreferrer">ä¸­æ–‡<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="ä½¿ç”¨-babel-å¤„ç†-es6-è¯­æ³•"><a href="#ä½¿ç”¨-babel-å¤„ç†-es6-è¯­æ³•" aria-hidden="true" class="header-anchor">#</a> ä½¿ç”¨ Babel å¤„ç† ES6 è¯­æ³•</h2> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/02-10%20Webpack%E4%B8%AD%E4%BD%BF%E7%94%A8babel%E8%A7%A3%E6%9E%90ES6%E8%AF%AD%E6%B3%95/02-10/lesson" target="_blank" rel="noopener noreferrer">æ‰€æœ‰ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://babeljs.io/" target="_blank" rel="noopener noreferrer">bableå®˜ç½‘<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>æ‰“å¼€å®˜ç½‘ ç‚¹å‡»<a href="https://babeljs.io/setup#installation" target="_blank" rel="noopener noreferrer">set up<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> é€‰æ‹©webpack</p> <p>Installation</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install --save-dev babel-loader @babel/core
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>é…ç½®js</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>// webpack.config.js
module: <span class="token punctuation">{</span>
  rules: <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> test: /\.js$/,          // åŒ¹é…js
    exclude: /node_modules/,  // ä¸è½¬æ¢æ­¤ç›®å½•ä¸‹ï¼Œç¬¬ä¸‰æ–¹ä¸€èˆ¬å·²ç»è½¬æ¢è¿‡äº†
    loader: <span class="token string">&quot;babel-loader&quot;</span> <span class="token punctuation">}</span>   
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>æ·»åŠ é…ç½®æ–‡ä»¶</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> @babel/preset-env --save-dev  // è¯­æ³•è½¬æ¢
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-json line-numbers-mode"><pre class="language-json"><code>module<span class="token operator">:</span> <span class="token punctuation">{</span>
  rules<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> test<span class="token operator">:</span> /\.js$/<span class="token punctuation">,</span>          // åŒ¹é…js
    exclude<span class="token operator">:</span> /node_modules/<span class="token punctuation">,</span>  // ä¸è½¬æ¢æ­¤ç›®å½•ä¸‹ï¼Œç¬¬ä¸‰æ–¹ä¸€èˆ¬å·²ç»è½¬æ¢è¿‡äº†
    loader<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
    options<span class="token operator">:</span><span class="token punctuation">{</span>
        presets<span class="token operator">:</span> <span class="token punctuation">[</span>'@babel/preset-env'<span class="token punctuation">]</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ä½ç‰ˆæœ¬æµè§ˆå™¨ç¼ºå¤±çš„ç‰¹æ€§éœ€è¦è…»å­ <a href="https://babeljs.io/docs/en/babel-polyfill" target="_blank" rel="noopener noreferrer">@babel/polyfill<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>å®‰è£…</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> --save @babel/polyfill
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>åœ¨ä¸šåŠ¡ä»£ç æœ€é¡¶éƒ¨å¼•å…¥å³å¯</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">&quot;@babel/polyfill&quot;</span><span class="token punctuation">;</span>  <span class="token comment">// useBuiltIns: 'usage' å¼€å¯ä¸éœ€è¦è¿™è¡Œ</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>è¿™æ ·ä¼šå…¨éƒ¨å¼•å…¥ï¼Œéå¸¸å¤§</p> <p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œåªä½¿ç”¨ç”¨åˆ°çš„ç‰¹æ€§ <a href="https://babeljs.io/docs/en/usage" target="_blank" rel="noopener noreferrer">æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-JS line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>          <span class="token comment">// åŒ¹é…js</span>
    exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>  <span class="token comment">// ä¸è½¬æ¢æ­¤ç›®å½•ä¸‹ï¼Œç¬¬ä¸‰æ–¹ä¸€èˆ¬å·²ç»è½¬æ¢è¿‡äº†</span>
    loader<span class="token punctuation">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
    options<span class="token punctuation">:</span><span class="token punctuation">{</span>
        presets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    	targets<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        chrome<span class="token punctuation">:</span> <span class="token string">&quot;67&quot;</span><span class="token punctuation">,</span>            <span class="token comment">//å…¼å®¹å¤§äºchrome67</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
     	useBuiltIns<span class="token punctuation">:</span> <span class="token string">'usage'</span>    <span class="token comment">// åªæ‰“åŒ…ç”¨åˆ°çš„ç‰¹æ€§è…»å­è„šæœ¬ï¼Œé…ç½®è¿™ä¸ªä¸éœ€è¦å¼•å…¥</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
     <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>   
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>ä¸šåŠ¡ä»£ç  é…ç½®ä¸Šé¢ä¸¤å¤„å³å¯</p> <p>ä½†æ˜¯ç»„ä»¶ç­‰åº“ä»£ç éœ€è¦ä½¿ç”¨<a href="https://babeljs.io/docs/en/babel-plugin-transform-runtime" target="_blank" rel="noopener noreferrer">babel-plugin-transform-runtime<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>ä¼šä»¥é—­åŒ…çš„å½¢å¼ï¼Œä¸ä¼šæ±¡æŸ“å…¨å±€</p> <p>å®‰è£…</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev @babel/plugin-transform-runtime
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> --save @babel/runtime-corejs2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>é…ç½®</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>          <span class="token comment">// åŒ¹é…js</span>
    exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>  <span class="token comment">// ä¸è½¬æ¢æ­¤ç›®å½•ä¸‹ï¼Œç¬¬ä¸‰æ–¹ä¸€èˆ¬å·²ç»è½¬æ¢è¿‡äº†</span>
    loader<span class="token punctuation">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
    options<span class="token punctuation">:</span><span class="token punctuation">{</span>
	<span class="token string">&quot;plugins&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;@babel/plugin-transform-runtime&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> 
		<span class="token string">&quot;corejs&quot;</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>         <span class="token comment">// æ”¹ä¸º2 éœ€è¦runtime-corejs2æ”¯æŒ</span>
        <span class="token string">&quot;helpers&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string">&quot;regenerator&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
       <span class="token string">&quot;useESModules&quot;</span><span class="token punctuation">:</span> <span class="token boolean">false</span>
	<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>   
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>å¯ä»¥å•ç‹¬åˆ›å»ºBabelé…ç½®æ–‡ä»¶  .babelrc,å°†webpack.config.jsä¸­çš„optionsåˆ é™¤ï¼Œç§»åˆ°æ–‡ä»¶ä¸­</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
	<span class="token string">&quot;plugins&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;@babel/plugin-transform-runtime&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;corejs&quot;</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string">&quot;helpers&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string">&quot;regenerator&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string">&quot;useESModules&quot;</span><span class="token punctuation">:</span> <span class="token boolean">false</span>
	<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="webpack-å®ç°å¯¹reactæ¡†æ¶ä»£ç çš„æ‰“åŒ…"><a href="#webpack-å®ç°å¯¹reactæ¡†æ¶ä»£ç çš„æ‰“åŒ…" aria-hidden="true" class="header-anchor">#</a> Webpack å®ç°å¯¹Reactæ¡†æ¶ä»£ç çš„æ‰“åŒ…</h2> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/02-11%20Webpack%20%E5%AE%9E%E7%8E%B0%E5%AF%B9React%E6%A1%86%E6%9E%B6%E4%BB%A3%E7%A0%81%E7%9A%84%E6%89%93%E5%8C%85/02-11/lesson" target="_blank" rel="noopener noreferrer">æ‰€æœ‰ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>é¦–å…ˆæŒ‰ä¸ŠèŠ‚é…ç½®ä¸šåŠ¡ä»£ç ä¸­çš„Babel</p> <p>åˆ›å»º.babelrcæ–‡ä»¶</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
	presets<span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">[</span>
			<span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    
				targets<span class="token operator">:</span> <span class="token punctuation">{</span>
					chrome<span class="token operator">:</span> <span class="token string">&quot;67&quot;</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				useBuiltIns<span class="token operator">:</span> 'usage'
			<span class="token punctuation">}</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;@babel/preset-react&quot;</span>  // è½¬æ¢reactä»£ç   ä»ä¸‹åˆ°ä¸Šæ‰§è¡Œï¼Œä¸èƒ½æ›´æ¢é¡ºåº
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>ä¸šåŠ¡ä»£ç ä¸­å¼•å…¥è…»å­</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token keyword">import</span> <span class="token string">&quot;@babel/polyfill&quot;</span><span class="token punctuation">;</span>  	<span class="token comment">// é…ç½® useBuiltIns: 'usage' æ—¶ä¸éœ€è¦å¼•å…¥</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>è¿˜éœ€è¦å®‰è£…<a href="https://babeljs.io/docs/en/babel-preset-react" target="_blank" rel="noopener noreferrer">reactè½¬æ¢å™¨<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev @babel/preset-react
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å®‰è£… react</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i react react-dom --save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä¹¦å†™reactä»£ç </p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">&quot;@babel/polyfill&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDom <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Hello World<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

ReactDom<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="tree-shaking-æ¦‚å¿µè¯¦è§£"><a href="#tree-shaking-æ¦‚å¿µè¯¦è§£" aria-hidden="true" class="header-anchor">#</a> Tree Shaking æ¦‚å¿µè¯¦è§£</h2> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/03-01%20Tree%20Shaking%20%E6%A6%82%E5%BF%B5%E8%AF%A6%E8%A7%A3/03-01/lesson" target="_blank" rel="noopener noreferrer">å…¨éƒ¨ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// math.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a <span class="token operator">+</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">minus</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a <span class="token operator">-</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token comment">// Tree Shaking åªæ”¯æŒ ES Module</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> add <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./math.js'</span><span class="token punctuation">;</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ä»math.jså¼•å…¥addï¼Œå´åŒæ—¶æ‰“åŒ…äº†minuså‡½æ•°</p> <p>å®ç°æŒ‰éœ€å¼•å…¥ï¼Œwebpack2.0æä¾›äº†tree shaking æ‘‡æ ‘</p> <p>Tree Shaking åªæ”¯æŒ ES Moduleï¼Œå› ä¸ºes é™æ€å¼•å…¥ï¼Œcommont.jsä¸ºåŠ¨æ€å¼•å…¥</p> <p>é…ç½®æ–¹æ³•ï¼š</p> <p>mode: 'development'é»˜è®¤æ²¡æœ‰tree shaking</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
   mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
   plugins<span class="token punctuation">:</span> <span class="token operator">...</span>
   <span class="token operator">...</span>
	optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>        <span class="token comment">// åœ¨pluginsä¸‹é¢é…ç½®å¼€å¯</span>
		usedExports<span class="token punctuation">:</span> <span class="token boolean">true</span>  
	<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-json line-numbers-mode"><pre class="language-json"><code>// package.json
<span class="token punctuation">{</span>
  <span class="token property">&quot;sideEffects&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>&quot;sideEffects&quot;: false</p> <p>å¦‚æœå¼€å¯tree shaking ä¸å¯¼å…¥å†…å®¹çš„æ¨¡å—ï¼Œä¾‹å¦‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import &quot;@babel/polyfill&quot;  // ä¼šåœ¨windowä¸‹ç»‘å®šå…¨é¢å˜é‡ promiseç­‰
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä¼šè¢«æŠ–æ‰ï¼Œ</p> <p>éœ€è¦è®¾ç½®</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>// package.json
<span class="token punctuation">{</span>
  <span class="token property">&quot;sideEffects&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/polyfill&quot;</span><span class="token punctuation">]</span>   //è¿™æ ·å°±ä¸ä¼šæŠ–æ‰è¯¥æ¨¡å—ï¼Œå€¼ä¸º<span class="token boolean">false</span>ï¼Œåˆ™å…¨éƒ¨å¼€å¯
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ä¸€èˆ¬ä¼šè®¾ç½®</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>// package.json
<span class="token punctuation">{</span>
  <span class="token property">&quot;sideEffects&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;*.css&quot;</span><span class="token punctuation">]</span>   //è¿™æ ·å°±ä¸ä¼šæŠ–æ‰è¯¥æ¨¡å—ï¼Œå€¼ä¸º<span class="token boolean">false</span>ï¼Œåˆ™å…¨éƒ¨å¼€å¯
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>mode: 'development' æ¨¡å¼ä¸‹ä¸ä¼šå®é™…åˆ é™¤ä»£ç ï¼ŒåªåŠ äº†å¤‡æ³¨éœ€è¦çš„ä»£ç ï¼Œæ–¹ä¾¿è°ƒè¯•</p> <p>æ”¹ä¸ºmode: 'production' ï¼Œä¼šè‡ªåŠ¨å¯åŠ¨tree shakingï¼Œç”šè‡³ä¸éœ€è¦é…ç½®  optimization</p> <p>ä½†æ˜¯ä»éœ€è¦é…ç½® sideEffectsï¼Œåˆ‡æ¢æ¨¡å¼è®°å¾—æ›´æ”¹devtoolæ¨¡å¼</p> <p><a href="https://webpack.docschina.org/guides/tree-shaking/" target="_blank" rel="noopener noreferrer">ä¸­æ–‡æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="æ·±åº¦tree-shakiing"><a href="#æ·±åº¦tree-shakiing" aria-hidden="true" class="header-anchor">#</a> æ·±åº¦tree shakiing</h2> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/%E6%B7%B1%E5%BA%A6treeshaking" target="_blank" rel="noopener noreferrer">ä»£ç åœ°å€<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="ä»€ä¹ˆæ˜¯tree-shaking"><a href="#ä»€ä¹ˆæ˜¯tree-shaking" aria-hidden="true" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯Tree-shaking</h3> <p>æ‰€è°“Tree-shakingå°±æ˜¯â€˜æ‘‡â€™çš„æ„æ€ï¼Œä½œç”¨æ˜¯æŠŠé¡¹ç›®ä¸­æ²¡å¿…è¦çš„æ¨¡å—å…¨éƒ¨æŠ–æ‰ï¼Œç”¨äºåœ¨ä¸åŒçš„æ¨¡å—ä¹‹é—´æ¶ˆé™¤æ— ç”¨çš„ä»£ç ï¼Œå¯åˆ—ä¸ºæ€§èƒ½ä¼˜åŒ–çš„èŒƒç•´ã€‚</p> <p>Tree-shakingæ—©æœŸç”±rollupå®ç°ï¼Œåæ¥webpack2ä¹Ÿå®ç°äº†Tree-shakingçš„åŠŸèƒ½ï¼Œä½†æ˜¯è‡³ä»Šè¿˜ä¸æ˜¯å¾ˆå®Œå¤‡ã€‚è‡³äºä¸ºä»€ä¹ˆä¸å®Œå¤‡ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹<a href="https://juejin.im/post/5a4dc842518825698e7279a9" target="_blank" rel="noopener noreferrer">ç™¾åº¦å¤–å–çš„Tree-shakingåŸç†<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="tree-shadingåŸç†"><a href="#tree-shadingåŸç†" aria-hidden="true" class="header-anchor">#</a> Tree-shadingåŸç†</h3> <p>Tree-shakingçš„æœ¬è´¨ç”¨äºæ¶ˆé™¤é¡¹ç›®ä¸€äº›ä¸å¿…è¦çš„ä»£ç ã€‚æ—©åœ¨ç¼–è¯‘åŸç†ä¸­å°±æœ‰æåˆ°DCE(dead code eliminnation)ï¼Œä½œç”¨æ˜¯æ¶ˆé™¤ä¸å¯èƒ½æ‰§è¡Œçš„ä»£ç ï¼Œå®ƒçš„å·¥ä½œæ˜¯ä½¿ç”¨ç¼–è¾‘å™¨åˆ¤æ–­å‡ºæŸäº›ä»£ç æ˜¯ä¸å¯èƒ½æ‰§è¡Œçš„ï¼Œç„¶åæ¸…é™¤ã€‚</p> <p>Tree-shakingåŒæ ·çš„ä¹Ÿæ˜¯æ¶ˆé™¤é¡¹ç›®ä¸­ä¸å¿…è¦çš„ä»£ç ï¼Œä½†æ˜¯å’ŒDCEåˆæœ‰ç•¥ä¸ç›¸åŒã€‚å¯ä»¥è¯´æ˜¯DCEçš„ä¸€ç§å®ç°ï¼Œå®ƒçš„ä¸»è¦å·¥ä½œæ˜¯åº”ç”¨äºæ¨¡å—é—´ï¼Œåœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­æŠ½å‡ºæœ‰ç”¨çš„éƒ¨åˆ†ï¼Œç”¨äºå®ŒæˆDCEã€‚</p> <p>Tree-shakingæ˜¯ä¾èµ–ES6æ¨¡å—é™æ€åˆ†æçš„ï¼ŒES6 moduleçš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p> <ol><li>åªèƒ½ä½œä¸ºæ¨¡å—é¡¶å±‚çš„è¯­å¥å‡ºç°</li> <li>import çš„æ¨¡å—ååªèƒ½æ˜¯å­—ç¬¦ä¸²å¸¸é‡</li> <li>import binding æ˜¯ immutableçš„</li></ol> <p>ä¾èµ–å…³ç³»ç¡®å®šï¼Œä¸è¿è¡Œæ—¶æ— å…³ï¼Œé™æ€åˆ†æã€‚æ­£å¼å› ä¸ºES6 moduleçš„è¿™äº›ç‰¹ç‚¹ï¼Œæ‰è®©Tree-shakingæ›´åŠ æµè¡Œã€‚</p> <p>ä¸»è¦ç‰¹ç‚¹è¿˜æ˜¯ä¾èµ–äºES6çš„é™æ€åˆ†æï¼Œåœ¨ç¼–è¯‘æ—¶ç¡®å®šæ¨¡å—ã€‚å¦‚æœæ˜¯requireï¼Œåœ¨è¿è¡Œæ—¶ç¡®å®šæ¨¡å—ï¼Œé‚£ä¹ˆå°†æ— æ³•å»åˆ†ææ¨¡å—æ˜¯å¦å¯ç”¨ï¼Œåªæœ‰åœ¨ç¼–è¯‘æ—¶åˆ†æï¼Œæ‰ä¸ä¼šå½±å“è¿è¡Œæ—¶çš„çŠ¶æ€ã€‚</p> <h3 id="webpack4çš„tree-shaking"><a href="#webpack4çš„tree-shaking" aria-hidden="true" class="header-anchor">#</a> Webpack4çš„Tree-shaking</h3> <p>webpackä»ç¬¬2ç‰ˆæœ¬å°±å¼€å§‹æ”¯æŒTree-shakingçš„åŠŸèƒ½ï¼Œä½†æ˜¯è‡³ä»Šä¹Ÿå¹¶ä¸èƒ½å®ç°çš„é‚£ä¹ˆå®Œç¾ã€‚å‡¡æ˜¯å…·æœ‰å‰¯ä½œç”¨çš„æ¨¡å—ï¼Œwebpackçš„Tree-shakingå°±æ­‡èœäº†ã€‚</p> <h4 id="å‰¯ä½œç”¨"><a href="#å‰¯ä½œç”¨" aria-hidden="true" class="header-anchor">#</a> å‰¯ä½œç”¨</h4> <p>å‰¯ä½œç”¨åœ¨æˆ‘ä»¬é¡¹ç›®ä¸­ï¼Œä¹ŸåŒæ ·æ˜¯é¢‘ç¹çš„å‡ºç°ã€‚çŸ¥é“å‡½æ•°å¼ç¼–ç¨‹çš„æœ‹å‹éƒ½ä¼šçŸ¥é“è¿™ä¸ªåè¯ã€‚æ‰€è°“æ¨¡å—(è¿™é‡Œæ¨¡å—å¯ç§°ä¸ºä¸€ä¸ªå‡½æ•°)å…·æœ‰å‰¯ä½œç”¨ï¼Œå°±æ˜¯è¯´è¿™ä¸ªæ¨¡å—æ˜¯ä¸çº¯çš„ã€‚è¿™é‡Œå¯ä»¥å¼•å…¥çº¯å‡½æ•°çš„æ¦‚å¿µã€‚</p> <blockquote><p>å¯¹äºç›¸åŒçš„è¾“å…¥å°±æœ‰ç›¸åŒçš„è¾“å‡ºï¼Œä¸ä¾èµ–å¤–éƒ¨ç¯å¢ƒï¼Œä¹Ÿä¸æ”¹å˜å¤–éƒ¨ç¯å¢ƒã€‚</p></blockquote> <p>ç¬¦åˆä¸Šè¿°å°±å¯ä»¥ç§°ä¸ºçº¯å‡½æ•°ï¼Œä¸ç¬¦åˆå°±æ˜¯ä¸çº¯çš„ï¼Œæ˜¯å…·æœ‰å‰¯ä½œç”¨çš„ï¼Œæ˜¯å¯èƒ½å¯¹å¤–ç•Œé€ æˆå½±å“çš„ã€‚</p> <p>webpackè‡ªèº«çš„Tree-shakingä¸èƒ½åˆ†æå‰¯ä½œç”¨çš„æ¨¡å—ã€‚ä»¥lodash-esè¿™ä¸ªæ¨¡å—æ¥ä¸¾ä¸ªä¾‹å­</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>//test.js
import _ from &quot;lodash-es&quot;;

const func1 = function(value){
    return _.isArray(value);
}
const func2 = function(value){
    return value=null;
}

export {
    func1,
    func2,
}
//index.js
import {func2} from './test.js'
func2()
å¤åˆ¶ä»£ç 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>ä¸Šè¿°ä»£ç åœ¨test.jsä¸­å¼•å…¥lodash-es,åœ¨func1ä¸­ä½¿ç”¨äº†loadshï¼Œå¹¶ä¸”è¿™é‡Œä¸ç¬¦åˆçº¯å‡½æ•°çš„æ¦‚å¿µï¼Œå®ƒæ˜¯å…·æœ‰å‰¯ä½œç”¨çš„ã€‚func2æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ã€‚</p> <p>åœ¨index.jsä¸­åªå¼•å…¥äº†func2ï¼Œå¹¶ä¸”ä½¿ç”¨äº†func2ï¼Œå¯è§æ•´ä¸ªä»£ç çš„æ‰§è¡Œæ˜¯å’Œfunc1æ˜¯æ²¡æœ‰ä»»ä½•å…³ç³»çš„ã€‚æˆ‘ä»¬é€šè¿‡ç”Ÿäº§ç¯å¢ƒæ‰“åŒ…ä¸€ä¸‹è¯•è¯•çœ‹(Tree-shakingåªåœ¨ç”Ÿäº§ç¯å¢ƒç”Ÿæ•ˆ)</p> <p><img src="https://user-gold-cdn.xitu.io/2019/2/15/168eeff584fcb43d?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img"></p> <p>main.js 91.7KBï¼Œå¯è§è¿™ä¸ªç»“æœæ˜¯ç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸçš„ï¼Œå› ä¸ºfunc1å‡½æ•°çš„å‰¯ä½œç”¨ï¼Œwebpackè‡ªèº«çš„Tree-shakingå¹¶æ²¡æœ‰æ£€æµ‹åˆ°è¿™é‡Œæœ‰æ²¡å¿…è¦çš„æ¨¡å—ã€‚è§£å†³åŠæ³•è¿˜æ˜¯ç”¨çš„ï¼Œwebpackçš„æ’ä»¶ç³»ç»Ÿæ˜¯å¾ˆå¼ºå¤§çš„ã€‚</p> <p>webpackæ²¡æœ‰æ·±åº¦js treeshaking æ²¡æœ‰css tree shakingï¼Œscopeå†…åˆ†æä¸äº†ï¼Œ ç±»ã€å‡½æ•°ä»¥åŠæ¨¡å—ç­‰ç­‰ï¼Œ treeshakingä¸èƒ½shakingåˆ°å‡½æ•°scoopå†…ä¸œè¥¿ï¼Œ ä½¿ç”¨æ’ä»¶ å°†scoopæŠ“å‡ºæ¥ ä½¿webpack tree shakingå¢æ•ˆï¼Œ</p> <h3 id="webpack-deep-scope-plugin"><a href="#webpack-deep-scope-plugin" aria-hidden="true" class="header-anchor">#</a> webpack-deep-scope-plugin</h3> <p>webpack-deep-scope-pluginæ˜¯ä¸€ä½ä¸­å›½åŒèƒ(å­¦ç”Ÿ)åœ¨Googleå¤ä»¤è¥ï¼Œåœ¨å¯¼å¸ˆTobiaså¸¦é¢†ä¸‹å†™çš„ä¸€ä¸ªwebpackæ’ä»¶ã€‚</p> <p>è¿™ä¸ªæ’ä»¶ä¸»è¦ç”¨äºå¡«å……webpackè‡ªèº«Tree-shakingçš„ä¸è¶³ï¼Œé€šè¿‡ä½œç”¨åŸŸåˆ†ææ¥æ¶ˆé™¤æ— ç”¨çš„ä»£ç ã€‚</p> <p>// webpack-scope-plugin  https://github.com/vincentdchan/webpack-deep-scope-analysis-plugin  https://diverse.space/2018/05/better-tree-shaking-with-scope-analysis</p> <p><a href="https://diverse.space/2018/05/better-tree-shaking-with-scope-analysis" target="_blank" rel="noopener noreferrer">webpack å¦‚ä½•é€šè¿‡ä½œç”¨åŸŸåˆ†ææ¶ˆé™¤æ— ç”¨ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Posted at 2018-05-25</p> <blockquote><p>GSoC 2018 ä¸­ï¼Œæˆ‘çš„é¡¹ç›®å°±åœ¨äºç»™ webpack å®ç°æ·±ä½œç”¨åŸŸåˆ†æï¼ˆDeep Scope Analysisï¼‰ï¼Œä¸»è¦è¿˜æ˜¯ä¸ºäº†æ”¹è¿› webpack çš„ tree-shaking å·¥ä½œã€‚</p></blockquote> <h3 id="å‰è¨€"><a href="#å‰è¨€" aria-hidden="true" class="header-anchor">#</a> å‰è¨€</h3> <p>JS çš„ tree-shaking ä¸€ç›´æ˜¯å‰ç«¯å¼€å‘ä¸­çš„ç—›ç‚¹ï¼Œå¤§å®¶éƒ½åœ¨æƒ³å°½åŠæ³•å‡å°‘æ‰“åŒ…çš„ä»£ç ä½“ç§¯ã€‚Tree shaking æ˜¯ä¸€ä¸ªå¸®åŠ©åœ¨ä¸åŒæ¨¡å—ä¹‹é—´æ¶ˆé™¤æ— ç”¨ä»£ç çš„ featureã€‚åœ¨ç¼–è¯‘åŸç†ä¸­ï¼Œæˆ‘ä»¬æŠŠè¿™é¡¹æŠ€æœ¯å«åš DCE(dead code elimination)ã€‚ä½†æ˜¯ DCE å’Œ tree shaking æœ‰äº›è®¸ä¸åŒï¼ŒæŒ‰ç…§ Tobias çš„è¯´æ³•ï¼Œtree shaking ä¸»è¦åº”ç”¨äºäºæ¨¡å—ï¼ˆmoduleï¼‰ä¹‹é—´ï¼Œç”¨äºå¸®åŠ©è¿›è¡Œ DCEï¼ˆwebpack çš„ DEC é€šè¿‡ uglify å®Œæˆï¼‰ï¼Œrollup çš„ä½œè€…ä¹Ÿæ›¾ç»æåˆ°ï¼Œ tree shaking æ˜¯æ‰“åŒ…çš„è¿‡ç¨‹ä¸­æŠ½å–æœ‰ç”¨çš„éƒ¨åˆ†ï¼Œåˆ«çš„éƒ¨åˆ†åƒæ ‘å¶ä¸€æ ·è½ä¸‹ï¼Œæ‰€ä»¥å« tree shakingã€‚</p> <p><a href="https://github.com/vincentdchan/webpack-deep-scope-analysis-plugin" target="_blank" rel="noopener noreferrer">é¡¹ç›®åœ°å€<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="ä»å‰"><a href="#ä»å‰" aria-hidden="true" class="header-anchor">#</a> ä»å‰</h3> <p>webpack æœ¬èº«çš„ tree shaking æ¯”è¾ƒç®€å•ï¼Œä¸»è¦æ˜¯æ‰¾ä¸€ä¸ª import è¿›æ¥çš„å˜é‡æ˜¯å¦åœ¨è¿™ä¸ªæ¨¡å—å†…å‡ºç°è¿‡ï¼Œéå¸¸ç®€å•ç²—æš´ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼å¾€å¾€ä½œç”¨ä¸å¤§ï¼Œå› ä¸ºä¸€èˆ¬äººä¸ä¼šå» import ä¸€ä¸ªæ²¡æœ‰ç”¨åˆ°çš„å˜é‡ã€‚æ¯”è¾ƒå¤šçš„æƒ…å†µæ˜¯å¯èƒ½æ›¾ç»å¼•ç”¨è¿‡ï¼Œä½†æ˜¯å¿˜äº†åˆ æ‰ã€‚ç°åœ¨çš„ç¼–è¾‘å™¨å’Œ lint å·¥å…·éƒ½ä¼šæç¤ºä½ å»åˆ æ‰æ— ç”¨çš„å˜é‡ï¼Œæ‰€ä»¥ webpack æœ¬èº«çš„ tree shaking åŠŸèƒ½æ˜¯ä¸å¤Ÿå¼ºå¤§çš„ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> isNumber<span class="token punctuation">,</span> isNull <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lodash-es'</span><span class="token punctuation">;</span>


<span class="token keyword">export</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// do nothing</span>
<span class="token punctuation">}</span>


<span class="token keyword">export</span> <span class="token function">isNull</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">isNull</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå˜é‡ <em>isNumber</em> å¹¶æ²¡æœ‰è¢«å¼•ç”¨åˆ°ï¼Œæ‰€ä»¥ä¼šè¢«æ¶ˆå»ã€‚</p> <h3 id="å¼€ç«¯"><a href="#å¼€ç«¯" aria-hidden="true" class="header-anchor">#</a> å¼€ç«¯</h3> <p>åœ¨ä»Šå¹´å¹´åˆï¼Œwebpack é¡¹ç›®ä¸‹é¢æœ‰ä¸€ä¸ª <a href="https://github.com/webpack/webpack/issues/6264" target="_blank" rel="noopener noreferrer">issue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> æåˆ°äº† webpack æ‰“åŒ…äº†å¤šä½™çš„ä»£ç å’Œæ¨¡å—ã€‚ä½†æ˜¯è¿™ä¹Ÿä¸ºä¼˜åŒ– tree-shaking æä¾›äº†ä¸€ä¸ªæ€è·¯ï¼Œå°±æ˜¯æ‰¾åˆ°ä½œç”¨åŸŸä¹‹é—´çš„å…³ç³»ï¼Œæ¥è¿›è¡Œä¼˜åŒ–ã€‚</p> <p><img src="https://user-images.githubusercontent.com/3199950/34681428-28df7576-f49c-11e7-942d-12caa6e905b8.png" alt="img"></p> <p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå…¶å® <em>function2</em> å’Œæ•´ä¸ª <em>external2</em> éƒ½å¯ä»¥è¢«æ¶ˆå»ï¼Œå› ä¸º <em>function2</em>å¹¶æ²¡æœ‰è¢« <em>entry</em> å¼•ç”¨åˆ°ã€‚ä½†æ˜¯ç›®å‰ webpack çš„æœºåˆ¶ä¸èƒ½åšåˆ°è¿™ä¸€ç‚¹ã€‚å€ŸåŠ©äº webpack å¼ºå¤§çš„æ’ä»¶æè‡´ï¼Œæˆ‘çš„æ’ä»¶å°±å¯ä»¥å¸®åŠ© webpack åšåˆ°ã€‚</p> <h3 id="æˆ‘çš„æ’ä»¶åšäº†ä»€ä¹ˆ"><a href="#æˆ‘çš„æ’ä»¶åšäº†ä»€ä¹ˆ" aria-hidden="true" class="header-anchor">#</a> æˆ‘çš„æ’ä»¶åšäº†ä»€ä¹ˆ</h3> <p>æ’ä»¶åŒ…æ‹¬äº†ä¸€ä¸ªä½œç”¨åŸŸåˆ†æå™¨ï¼Œå¯ä»¥åˆ†æä¸€ä¸ªæ¨¡å—é‡Œé¢çš„ä½œç”¨åŸŸï¼Œä»æ­¤æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸åŒä½œç”¨åŸŸä¹‹é—´å˜é‡çš„å¼•ç”¨å…³ç³»ã€‚å½“æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªä½œç”¨åŸŸæ˜¯å¦ä¼šè¢«ä½¿ç”¨ï¼Œå°±å¯ä»¥å› æ­¤è€Œæ¨æ–­å‡ºè¿™ä¸ªä½œç”¨åŸŸåšå¼•ç”¨çš„å…¶ä»–ä½œç”¨åŸŸæ˜¯å¦ä¹Ÿä¼šè¢«ä½¿ç”¨ã€‚è¿™å°±æ˜¯ä½œç”¨åŸŸåˆ†æå™¨å¸®åŠ©æ¶ˆé™¤æ— ç”¨ä»£ç çš„åŸç†ã€‚</p> <h3 id="ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸ"><a href="#ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸ" aria-hidden="true" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸ</h3> <p>ä¸‹é¢çš„ä»£ç åˆ—ä¸¾äº† JS ä¸­ä¼š<strong>æ–°å»º</strong>ä¸€ä¸ªä½œç”¨åŸŸçš„ä»£ç ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// module scope start</span>


<span class="token comment">// Block</span>


<span class="token punctuation">{</span> <span class="token comment">// &lt;- scope start</span>
<span class="token punctuation">}</span> <span class="token comment">// &lt;- scope end</span>


<span class="token comment">// Class</span>


<span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span> <span class="token comment">// &lt;- scope start</span>


<span class="token punctuation">}</span> <span class="token comment">// &lt;- scope end</span>


<span class="token comment">// If else</span>


<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// &lt;- scope start</span>
   
<span class="token punctuation">}</span> <span class="token comment">/* &lt;- scope end */</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// &lt;- scope start</span>
  
<span class="token punctuation">}</span> <span class="token comment">// &lt;- scope end</span>


<span class="token comment">// For</span>


<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// &lt;- scope start</span>
<span class="token punctuation">}</span> <span class="token comment">// &lt;- scope end</span>


<span class="token comment">// Catch</span>


<span class="token keyword">try</span> <span class="token punctuation">{</span>


<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// &lt;- scope start</span>


<span class="token punctuation">}</span> <span class="token comment">// &lt;- scope end</span>


<span class="token comment">// Function</span>


<span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// &lt;- scope start</span>
<span class="token punctuation">}</span> <span class="token comment">// &lt;- scope end</span>


<span class="token comment">// Scope</span>


<span class="token keyword">switch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// &lt;- scope start</span>
<span class="token punctuation">}</span> <span class="token comment">// &lt;- scope end</span>


<span class="token comment">// module scope end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div><p>å¯¹äº ES6 æ¨¡å—æ¥è¯´ï¼Œmodule scope æ˜¯æœ€åº•å±‚çš„ä½œç”¨åŸŸã€‚è€Œå¯¹äºä¸€ä¸ªæ¨¡å—æ¥è¯´ï¼Œ<strong>åªæœ‰ class å’Œ function çš„ä½œç”¨åŸŸæ˜¯å¯ä»¥å¯¼å‡ºåˆ°å…¶ä»–æ¨¡å—çš„</strong>ã€‚æ‰€ä»¥åœ¨è¿™å¼ éœ€è¦éå†çš„å›¾é‡Œé¢ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ä½œç”¨åŸŸéƒ½å¯ä»¥è¢«å½“ä½œä¸€ä¸ªç‹¬ç«‹çš„éå†ç»“ç‚¹ï¼Œåƒ if-else ä½œç”¨åŸŸå…¶å®æ˜¯å½’å±äºçˆ¶ä½œç”¨åŸŸçš„ã€‚</p> <h3 id="æ’ä»¶çš„å·¥ä½œåŸç†"><a href="#æ’ä»¶çš„å·¥ä½œåŸç†" aria-hidden="true" class="header-anchor">#</a> æ’ä»¶çš„å·¥ä½œåŸç†</h3> <p>åœ¨æˆ‘ä»¬å»åˆ†æä½œç”¨åŸŸä¹‹é—´çš„å¼•ç”¨å…³ç³»ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆéœ€è¦å»åˆ†æä»£ç çš„ä½œç”¨åŸŸã€‚ä»£ç çš„ä½œç”¨åŸŸåˆ†æå»ºç«‹åœ¨ AST(Abstract Syntax Tree) ä¹‹ä¸Šã€‚åœ¨è¿™é‡Œï¼Œæˆ‘å€ŸåŠ©äº†ä¸€ä¸ªå« <a href="https://github.com/estools/escope" target="_blank" rel="noopener noreferrer">escope<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> çš„å·¥å…·ã€‚</p> <p>è§£æå®Œä¹‹åï¼Œå…¶å®å°±æ˜¯å›¾çš„æ·±åº¦éå†ï¼Œæ‰¾åˆ°é‚£äº›ä½œç”¨åŸŸæ˜¯ä¼šè¢«ä½¿ç”¨åˆ°äº†ï¼Œå“ªäº›æ˜¯å¯ä»¥æ¶ˆå»çš„ã€‚</p> <p><img src="https://diverse.space/images/tree-shaking.png" alt="img"></p> <p>å› ä¸ºè¿™ä¸ªæ’ä»¶å¯ä»¥ä»å¯¼å‡ºçš„ä½œç”¨åŸŸä¹‹é—´åˆ†æå‡ºè¿™äº›å¯¼å‡ºçš„ä½œç”¨åŸŸå’Œå¯¼å…¥å˜é‡ä¹‹é—´çš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´ã€‚åªè¦çŸ¥é“å“ªäº›å¯¼å‡ºä½œç”¨åŸŸè¢«ä½¿ç”¨çš„åˆ°ï¼Œé‚£ä¹ˆå°±çŸ¥é“å“ªäº›å¯¼å…¥å˜é‡è¢«å¼•ç”¨ï¼Œé‚£äº›æ²¡æœ‰è¢«å¼•ç”¨ã€‚</p> <p>å¦ä¸€æ–¹é¢ï¼Œwebpack æœ¬èº«æ˜¯å¯ä»¥åˆ†æå‡ºæ¨¡å—ä¹‹é—´çš„å˜é‡å¼•ç”¨å…³ç³»çš„ï¼Œä» webpack æˆ‘å¯ä»¥å¾—çŸ¥ä¸€ä¸ªæ¨¡å—å“ªäº›å¯¼å‡ºå˜é‡æ˜¯è¢«ç”¨åˆ°çš„ï¼Œè¿™æ˜¯ webpack 4 çš„æ–° featureã€‚æ‰€ä»¥æˆ‘çš„æ’ä»¶ tap ä¸Šäº† webpack ç›¸åº”çš„ hookï¼Œè·å–è¿™ä¸ªæ¨¡å—ä¸­ä¼šè¢«å…¶ä»–æ¨¡å—å¼•ç”¨çš„å¯¼å‡ºå˜é‡ï¼Œè¿”å›ç»™ webpack å“ªäº›å¼•å…¥çš„å˜é‡è¢«ç”¨åˆ°ï¼Œè¿™æ · webpack å°±å¯ä»¥æ ¹æ®æˆ‘çš„æ’ä»¶çš„ä¿¡æ¯è¿›è¡Œæ›´å®Œå–„çš„ tree-shakingã€‚</p> <h3 id="edge-cases"><a href="#edge-cases" aria-hidden="true" class="header-anchor">#</a> Edge cases</h3> <p>å®é™…ä¸Šï¼ŒJavaScript çš„åˆ†ææœ‰å¾ˆå¤š Edge cases ä¼šå¯¼è‡´ä»£ç ä¸ä¼šè¢«æ¶ˆå»ï¼Œè¿™é‡Œåˆ—ä¸¾ä¸€äº›æ¯”è¾ƒå¸¸è§çš„ï¼š</p> <p>åŒæ—¶æä¾›ä¸€ä¸ª <a href="https://vincentdchan.github.io/webpack-deep-scope-demo/" target="_blank" rel="noopener noreferrer">Demo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> æ¥ç»™å¤§å®¶å°è¯•ã€‚</p> <h3 id="æ ¹ä½œç”¨åŸŸçš„å¼•ç”¨"><a href="#æ ¹ä½œç”¨åŸŸçš„å¼•ç”¨" aria-hidden="true" class="header-anchor">#</a> æ ¹ä½œç”¨åŸŸçš„å¼•ç”¨</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> isNull <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lodash-es'</span><span class="token punctuation">;</span>


<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">scope</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">isNull</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">scope</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>åœ¨æ ¹ä½œç”¨åŸŸå¼•ç”¨åˆ°çš„ä½œç”¨åŸŸä¸ä¼šè¢«æ¶ˆé™¤ã€‚</p> <h3 id="ç»™å˜é‡é‡æ–°èµ‹å€¼-ğŸ‘"><a href="#ç»™å˜é‡é‡æ–°èµ‹å€¼-ğŸ‘" aria-hidden="true" class="header-anchor">#</a> ç»™å˜é‡é‡æ–°èµ‹å€¼ ğŸ‘</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> isNull <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lodash-es'</span><span class="token punctuation">;</span>


<span class="token keyword">var</span> fun <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>


<span class="token function-variable function">fun</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">scope</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">isNull</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">export</span> <span class="token punctuation">{</span> fun <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>å› ä¸ºç¼ºå°‘<a href="https://en.wikipedia.org/wiki/Data-flow_analysis" target="_blank" rel="noopener noreferrer">æ•°æ®æµåˆ†æ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼Œå¯¹å˜é‡é‡æ–°èµ‹å€¼çš„ä½œç”¨åŸŸä¸ä¼šè¢«æ¶ˆå»ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå› ä¸ºå¯¹ <em>fun</em> å˜é‡è¿›è¡Œäº†é‡æ–°èµ‹å€¼ï¼Œæ‰€ä»¥ <em>isNull</em> æ— è®ºå¦‚ä½•éƒ½ä¼šè¢«å¼•å…¥ã€‚</p> <h3 id="çº¯å‡½æ•°è°ƒç”¨-ğŸ‘"><a href="#çº¯å‡½æ•°è°ƒç”¨-ğŸ‘" aria-hidden="true" class="header-anchor">#</a> çº¯å‡½æ•°è°ƒç”¨ ğŸ‘</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// copy from rambda/es/allPass.js</span>
<span class="token keyword">import</span> _curry1 <span class="token keyword">from</span> <span class="token string">'./internal/_curry1'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> curryN <span class="token keyword">from</span> <span class="token string">'./curryN'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> max <span class="token keyword">from</span> <span class="token string">'./max'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> pluck <span class="token keyword">from</span> <span class="token string">'./pluck'</span><span class="token punctuation">;</span>


<span class="token keyword">var</span> allPass <span class="token operator">=</span> <span class="token comment">/*#__PURE__*/</span><span class="token function">_curry1</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">allPass</span><span class="token punctuation">(</span>preds<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">curryN</span><span class="token punctuation">(</span><span class="token function">reduce</span><span class="token punctuation">(</span>max<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">pluck</span><span class="token punctuation">(</span><span class="token string">'length'</span><span class="token punctuation">,</span> preds<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> idx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> len <span class="token operator">=</span> preds<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>idx <span class="token operator">&lt;</span> len<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>preds<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      idx <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> allPass<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>å¦‚æœä¸€ä¸ªåŒ¿åå‡½æ•°è¢«åŒ…åœ¨ä¸€ä¸ªå‡½æ•°è°ƒç”¨ä¸­ï¼Œé‚£ä¹ˆå…¶å®è¿™ä¸ªæ’ä»¶æ˜¯æ— æ³•åˆ†æçš„ï¼Œåƒä¸Šé¢çš„ä¾‹å­ã€‚ä½†æ˜¯å¦‚æœåŠ ä¸Šäº† PURE æ³¨é‡Šçš„è¯ï¼Œè¿™ä¸ªæ’ä»¶ä¼šæŠŠè¿™ä¸ªå‡½æ•°è°ƒç”¨å½“ä½œä¸€ä¸ªç‹¬ç«‹çš„åŸŸï¼Œæ‰€ä»¥åœ¨ä¸Šè¿°çš„ä¾‹å­ä¸­ï¼Œtree-shaking æ˜¯ä¼šç”Ÿæ•ˆçš„ã€‚</p> <h3 id="å®é™…ä½¿ç”¨çš„è¿‡ç¨‹ä¸­åº”è¯¥æ³¨æ„ä»€ä¹ˆ"><a href="#å®é™…ä½¿ç”¨çš„è¿‡ç¨‹ä¸­åº”è¯¥æ³¨æ„ä»€ä¹ˆ" aria-hidden="true" class="header-anchor">#</a> å®é™…ä½¿ç”¨çš„è¿‡ç¨‹ä¸­åº”è¯¥æ³¨æ„ä»€ä¹ˆ</h3> <p>æ·±ä½œç”¨åŸŸåˆ†æåŸç†å¾ˆç®€å•ï¼Œå®ç°èµ·æ¥ä¹Ÿä¸å¤æ‚ï¼Œä½†æ˜¯çœŸçš„è¦ä½¿ç”¨å†å®é™…é¡¹ç›®çš„è¿‡ç¨‹ä¸­ï¼Œå´æœ‰å¾ˆå¤šè¦æ³¨æ„çš„åœ°æ–¹ï¼š</p> <p><strong>ä¸€ã€å¿…é¡»ä½¿ç”¨ ES6 çš„ import/export æ¨¡å—æœºåˆ¶ã€‚</strong></p> <p>å…¶å®æ•´ä¸ªæ·±ä½œç”¨åŸŸåˆ†æéƒ½æ˜¯åŸºäº ES6 æ¨¡å—å®Œæˆçš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ·±ä½œç”¨åŸŸåˆ†ææ— æ³•åˆ†æ CommonJS å’Œ AMD ç­‰ç­‰æ¨¡å—è§„èŒƒã€‚è¿™ä¸ªæ—¶å€™ï¼Œå°±è¦æ±‚é¡¹ç›®ä¸­å¼•ç”¨çš„æ¨¡å—éƒ½éµå¾ª ES6 çš„è§„èŒƒï¼Œæ¯”å¦‚ä½¿ç”¨ lodash-es ä»£æ›¿ lodashã€‚å¦å¤–å°±æ˜¯è¦æ³¨æ„ babel-loader å’Œ TypeScript çš„è®¾ç½®ï¼Œæ˜¯å¦ä¼šæŠŠä»£ç è½¬æ¢åˆ° ES5 è¯­æ³•ï¼Œå¯¼è‡´æ·±ä½œç”¨åŸŸåˆ†æå¤±æ•ˆã€‚</p> <p><strong>äºŒã€å­¦ä¼šä½¿ç”¨ PURE æ³¨é‡Šã€‚</strong></p> <p>ç”±äº JS è¯­æ³•çš„å¤æ‚ç¨‹åº¦ï¼Œwebpack æ²¡æœ‰æ‰“ç®—ç»™ JS å®ç°æ•°æ®æµåˆ†æï¼Œæ‰€ä»¥æ’ä»¶æ˜¯æ— æ³•çŸ¥é“ä¸€ä¸ªå‡½æ•°è°ƒç”¨æ˜¯å¦å…·æœ‰å‰¯ä½œç”¨çš„ã€‚æ‰€ä»¥å¯¹äºä¸€äº›å¯¼å‡ºæ¨¡å—ï¼Œå¦‚æœæ˜¯çº¯çš„å‡½æ•°è°ƒç”¨ï¼Œåˆ™éœ€è¦åŠ ä¸Š <code>/*@__PURE__*/</code>æ³¨é‡Šæ¥è¡¨æ˜è¿™ä¸ªå‡½æ•°æ˜¯ pure çš„ï¼Œè¿™æ˜¯ <a href="https://github.com/mishoo/UglifyJS2" target="_blank" rel="noopener noreferrer">Uglify<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ä½¿ç”¨çš„æ–¹æ³•ã€‚å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ç›¸å…³çš„ babel æ’ä»¶è¿›è¡Œæ‰¹é‡æ·»åŠ ã€‚</p> <h3 id="æ€»ç»“"><a href="#æ€»ç»“" aria-hidden="true" class="header-anchor">#</a> æ€»ç»“</h3> <p>å…¶å®æˆ‘è¿™æ’ä»¶çš„å®ç°æ˜¯å½’æ ¹äº ES6 ä¸­è‰¯å¥½çš„ import/export è¯­æ³•çš„è®¾è®¡çš„ã€‚ç›¸ä¿¡å¾ˆå¤šå‰ç«¯å¤§ä½¬éƒ½æåˆ°ï¼Œå°±æ˜¯æ¨¡å—çš„è®¾è®¡ä¸€å®šè¦åˆç†ã€‚tree shaking å†å¼ºå¤§å®ƒä¹Ÿåªæ˜¯ä¸€ä¸ªç¼–è¯‘å™¨çš„å·¥å…·ï¼Œå¦‚æœæ¨¡å—è®¾è®¡ä¸åˆç†ï¼Œå®ƒä¸€æ ·ä¼šåœ¨æ‰“åŒ…çš„æ—¶å€™å¼•å…¥å¾ˆå¤šæ— ç”¨çš„ä»£ç ã€‚ä¸€ä¸ªåˆç†è®¾è®¡çš„æ¨¡å—ä¸€å®šèƒ½å€ŸåŠ© tree shaking æœºåˆ¶åªå¼•å…¥å®ƒéœ€è¦çš„ä»£ç ã€‚</p> <h2 id="develoment-å’Œ-production-æ¨¡å¼çš„åŒºåˆ†æ‰“åŒ…"><a href="#develoment-å’Œ-production-æ¨¡å¼çš„åŒºåˆ†æ‰“åŒ…" aria-hidden="true" class="header-anchor">#</a> Develoment å’Œ Production æ¨¡å¼çš„åŒºåˆ†æ‰“åŒ…</h2> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/03-02%20Develoment%20%E5%92%8C%20Production%20%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%86%E6%89%93%E5%8C%85/03-02/lesson" target="_blank" rel="noopener noreferrer">å…¨éƒ¨ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Develoment  sourcemapè¯¦ç»†</p> <p>Production   sourcemapè¯¦ç»†  ä»£ç å‹ç¼©</p> <p>æ›´æ¢modeä¸æ–¹ä¾¿ï¼Œå¯ä»¥åˆ›å»ºä¸‰ä¸ªä¸ªé…ç½®æ–‡ä»¶ï¼Œwebpack.prod.js  ã€webpack.dev.jsä»¥åŠwebpack.common.js</p> <p>åˆ†åˆ«ä¸ºç”Ÿäº§ç¯å¢ƒé…ç½®æ–‡ä»¶ã€å¼€å‘ã€ä»¥åŠå…¬å…±é…ç½®æ–‡ä»¶</p> <p>å®‰è£…  <code>npm i webpack-merge -d</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.pord.js</span>
<span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.common.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> prodConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
	mode<span class="token punctuation">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
	devtool<span class="token punctuation">:</span> <span class="token string">'cheap-module-source-map'</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> prodConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.dev.js</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.common.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> devConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
	mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
	devtool<span class="token punctuation">:</span> <span class="token string">'cheap-module-eval-source-map'</span><span class="token punctuation">,</span>
	devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		contentBase<span class="token punctuation">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
		open<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		port<span class="token punctuation">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
		hot<span class="token punctuation">:</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		usedExports<span class="token punctuation">:</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> devConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.common.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		main<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> 
			test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span> 
			exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span> 
			loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			test<span class="token punctuation">:</span> <span class="token regex">/\.(jpg|png|gif)$/</span><span class="token punctuation">,</span>
			use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
				loader<span class="token punctuation">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
				options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
					name<span class="token punctuation">:</span> <span class="token string">'[name]_[hash].[ext]'</span><span class="token punctuation">,</span>
					outputPath<span class="token punctuation">:</span> <span class="token string">'images/'</span><span class="token punctuation">,</span>
					limit<span class="token punctuation">:</span> <span class="token number">10240</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span> 
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			test<span class="token punctuation">:</span> <span class="token regex">/\.(eot|ttf|svg)$/</span><span class="token punctuation">,</span>
			use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
				loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span>
			<span class="token punctuation">}</span> 
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
			use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
				<span class="token string">'style-loader'</span><span class="token punctuation">,</span> 
				<span class="token punctuation">{</span>
					loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
					options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
						importLoaders<span class="token punctuation">:</span> <span class="token number">2</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
				<span class="token string">'postcss-loader'</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
			use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
				<span class="token string">'style-loader'</span><span class="token punctuation">,</span>
				<span class="token string">'css-loader'</span><span class="token punctuation">,</span>
				<span class="token string">'postcss-loader'</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			template<span class="token punctuation">:</span> <span class="token string">'src/index.html'</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
		<span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'dist'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			root<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../'</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		filename<span class="token punctuation">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
		path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dist'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br></div></div><p>ä¿®æ”¹è¿è¡Œå‘½ä»¤</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;dev&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack-dev-server --config ./build/webpack.dev.js&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;build&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack --config ./build/webpack.prod.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="webpack-å’Œ-code-splitting"><a href="#webpack-å’Œ-code-splitting" aria-hidden="true" class="header-anchor">#</a> Webpack å’Œ Code Splitting</h2> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/03-03%20Webpack%20%E5%92%8C%20Code%20Splitting/03-03/lesson" target="_blank" rel="noopener noreferrer">å…¨éƒ¨ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>ä»£ç åˆ†å‰²</p> <p>ä¸¾ä¾‹</p> <p>å®‰è£… <code>npm i lodash --save</code></p> <p>ä½¿ç”¨</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">jion</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'***'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// æ­¤å¤„çœç•¥åä¸‡è¡Œä¸šåŠ¡é€»è¾‘</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="https://img.amazingtm.com/201903/10080938.png" alt=""></p> <p>è¿™æ ·ä¼šå¸¦æ¥ä¸€ä¸ªé—®é¢˜ æ‰“åŒ…æ–‡ä»¶ä¼šéå¸¸å¤§ï¼ŒåŠ è½½æ—¶é—´é•¿ï¼›ç¬¬äºŒä¸ªé—®é¢˜ï¼Œlodashæ–‡ä»¶ä¸€èˆ¬ä¸ä¼šå˜ï¼Œä½†æ˜¯ä¼šä¸€å—æ‰“åŒ…</p> <p>è§£å†³é—®é¢˜ï¼š</p> <p><img src="https://img.amazingtm.com/201903/11153853.png-sign" alt=""></p> <p>æ·»åŠ å…¥å£æ–‡ä»¶é…ç½®</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>	entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		main<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
        lodash<span class="token punctuation">:</span> <span class="token string">'./src/lodash.js'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token comment">// import _ from 'lodash';  åˆ é™¤</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">jion</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'***'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// æ­¤å¤„çœç•¥åä¸‡è¡Œä¸šåŠ¡é€»è¾‘</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// lodash.js</span>
 <span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span> 
 window<span class="token punctuation">.</span>_<span class="token operator">=</span>_
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä¸Šé¢çš„æ–¹æ³•æ˜¯æ‰‹åŠ¨ä¸å¤Ÿæ™ºèƒ½ webpackå¯ä»¥ç”¨æ’ä»¶è‡ªåŠ¨åˆ†å‰²ä»£ç </p> <p>æ¢å¤index.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">jion</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'***'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// æ­¤å¤„çœç•¥åä¸‡è¡Œä¸šåŠ¡é€»è¾‘</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>é…ç½®</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.common.js</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>      <span class="token comment">//ä»£ç åˆ†å‰²</span>
			chunks<span class="token punctuation">:</span> <span class="token string">'all'</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>è¿™æ ·å°±å®Œæˆäº†åŒæ­¥ä»£ç åˆ†å‰²</p> <h3 id="å¼‚æ­¥ä»£ç åˆ†å‰²"><a href="#å¼‚æ­¥ä»£ç åˆ†å‰²" aria-hidden="true" class="header-anchor">#</a> å¼‚æ­¥ä»£ç åˆ†å‰²</h3> <p>å®‰è£… å¼‚æ­¥å¼•å…¥è¯­æ³•è½¬æ¢å™¨ <code>npm i babel-plugin-dynamic-import-webpack -D</code></p> <p>é…ç½®babelrc</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
	presets<span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">[</span>
			<span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
				targets<span class="token operator">:</span> <span class="token punctuation">{</span>
					chrome<span class="token operator">:</span> <span class="token string">&quot;67&quot;</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				useBuiltIns<span class="token operator">:</span> 'usage'
			<span class="token punctuation">}</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;@babel/preset-react&quot;</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;dynamic-import-webpack&quot;</span><span class="token punctuation">]</span>  // æ·»åŠ 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>åŠ¨æ€å¯¼å…¥</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token keyword">function</span> <span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'lodash'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token punctuation">:</span> _ <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Dell'</span><span class="token punctuation">,</span> <span class="token string">'Lee'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> element<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>element <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ä»£ç åˆ†å‰²ï¼Œå’Œwebpackæ— å…³</span>
<span class="token comment">// webpackä¸­å®ç°ä»£ç åˆ†å‰²ï¼Œä¸¤ç§æ–¹å¼</span>
<span class="token comment">// 1. åŒæ­¥ä»£ç ï¼š åªéœ€è¦åœ¨webpack.common.jsä¸­åšoptimizationçš„é…ç½®å³å¯</span>
<span class="token comment">// 2. å¼‚æ­¥ä»£ç (import): å¼‚æ­¥ä»£ç ï¼Œæ— éœ€åšä»»ä½•é…ç½®ï¼Œä¼šè‡ªåŠ¨è¿›è¡Œä»£ç åˆ†å‰²ï¼Œæ”¾ç½®åˆ°æ–°çš„æ–‡ä»¶ä¸­</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="splitchunksplugin-é…ç½®å‚æ•°è¯¦è§£"><a href="#splitchunksplugin-é…ç½®å‚æ•°è¯¦è§£" aria-hidden="true" class="header-anchor">#</a> SplitChunksPlugin é…ç½®å‚æ•°è¯¦è§£</h2> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/03-04%20SplitChunksPlugin%20%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0%E8%AF%A6%E8%A7%A3/03-04/lesson" target="_blank" rel="noopener noreferrer">å…¨éƒ¨ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>ä»£ç åˆ†å‰²åº•å±‚ä½¿ç”¨SplitChunksPlugin</p> <p><a href="https://webpack.docschina.org/plugins/split-chunks-plugin/" target="_blank" rel="noopener noreferrer"><code>SplitChunksPlugin</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> æ’ä»¶å¯ä»¥å°†å…¬å…±çš„ä¾èµ–æ¨¡å—æå–åˆ°å·²æœ‰çš„ entry chunk ä¸­ï¼Œæˆ–è€…æå–åˆ°ä¸€ä¸ªæ–°ç”Ÿæˆçš„ chunkã€‚</p> <h3 id="æ›´æ”¹æ‰“åŒ…æ–‡ä»¶å"><a href="#æ›´æ”¹æ‰“åŒ…æ–‡ä»¶å" aria-hidden="true" class="header-anchor">#</a> æ›´æ”¹æ‰“åŒ…æ–‡ä»¶å</h3> <p>æ›´æ¢ä½¿ç”¨å®˜æ–¹å¼‚æ­¥å¼•å…¥<a href="https://babeljs.io/docs/en/babel-plugin-syntax-dynamic-import" target="_blank" rel="noopener noreferrer">è¯­æ³•è½¬æ¢å™¨<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install --save-dev @babel/plugin-syntax-dynamic-import
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>é…ç½®</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/plugin-syntax-dynamic-import&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä¿®æ”¹æ–‡ä»¶åå†™æ³•</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token comment">// index.js </span>
<span class="token keyword">function</span> <span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 	<span class="token keyword">return</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName:&quot;lodash&quot; */</span> <span class="token string">'lodash'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token punctuation">:</span> _ <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 		<span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Dell'</span><span class="token punctuation">,</span> <span class="token string">'Lee'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token keyword">return</span> element<span class="token punctuation">;</span>
 	<span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>

 <span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>element <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 	document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">//ä½¿ç”¨é­”æ³•æ³¨é‡Š  /* webpackChunkName:&quot;lodash&quot; */ 'lodash'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>è¿™æ ·æ‰“åŒ…çš„åå­—ä¸ºï¼š vendors~lodash.js</p> <p>é…ç½®<a href="https://webpack.js.org/plugins/split-chunks-plugin" target="_blank" rel="noopener noreferrer">split-chunks-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.common.js</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>      <span class="token comment">//ä»£ç åˆ†å‰²</span>
			chunks<span class="token punctuation">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
            cacheGroups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                vendors<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token keyword">default</span><span class="token punctuation">:</span><span class="token boolean">false</span>
            <span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>é…ç½®å®Œ æ‰“åŒ…åå­—ä¸º loadsh.js</p> <p>åŒæ­¥å¼‚æ­¥ä»£ç åˆ†å‰²éƒ½ä¼šè¢«splitChunksé…ç½®å½±å“</p> <p>å¦‚æœä¸é…ç½®ä¼šä½¿ç”¨é»˜è®¤é…ç½®</p> <div class="language-JS line-numbers-mode"><pre class="language-js"><code>splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ç­‰ä»·äº</p> <div class="language-JS line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.common.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      chunks<span class="token punctuation">:</span> <span class="token string">'async'</span><span class="token punctuation">,</span>   <span class="token comment">// åªå¯¹å¼‚æ­¥å¼•å…¥ä»£ç ç”Ÿæ•ˆ all ï¼šéƒ½åˆ†å‰²ã€‚åŒæ­¥ä¼šè¿›å…¥cacheGroupsæµç¨‹</span>
      minSize<span class="token punctuation">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>   <span class="token comment">//å¤§äº30kbæ‰åˆ†å‰² ï¼ŒåŒæ­¥ä»£ç å¾€ä¸‹èµ°cacheGroupsæµç¨‹</span>
      maxSize<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>       <span class="token comment">//äºŒæ¬¡ä»£ç åˆ†å‰²ä¸´ç•Œå€¼ï¼Œä¸€èˆ¬ä¸é…ç½®</span>
      minChunks<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>    <span class="token comment">//æœ€å°Chunkså¼•å…¥æ¬¡æ•°</span>
      maxAsyncRequests<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>  <span class="token comment">// æœ€å¤§å¹¶è¡Œè¯·æ±‚æ•°é‡</span>
      maxInitialRequests<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>  <span class="token comment">// å…¥å£å¤„æœ€å¤§å¹¶è¡Œè¯·æ±‚æ•°</span>
      automaticNameDelimiter<span class="token punctuation">:</span> <span class="token string">'~'</span><span class="token punctuation">,</span> <span class="token comment">// ç»„åˆæ–‡ä»¶è¿æ¥ç¬¦</span>
      name<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>   <span class="token comment">//cacheGroupsæ–‡ä»¶åæœ‰æ•ˆ</span>
      cacheGroups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        vendors<span class="token punctuation">:</span> <span class="token punctuation">{</span>                           <span class="token comment">// æ–‡ä»¶ç»„</span>
          test<span class="token punctuation">:</span> <span class="token regex">/[\\/]node_modules[\\/]/</span><span class="token punctuation">,</span>   <span class="token comment">// nodeæ¨¡å—</span>
          priority<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">10</span>ï¼Œ                   <span class="token comment">//ç»„åŒ¹é…ä¼˜å…ˆçº§</span>
          filename<span class="token punctuation">:</span> <span class="token string">'vendors.js'</span><span class="token punctuation">,</span>     
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>                          <span class="token comment">//ä¸å±äºnodeæ¨¡å—</span>
          minChunks<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
          priority<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
          reuseExistingChunk<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>       <span class="token comment">// å¿½ç•¥å·²æ‰“åŒ…æ–‡ä»¶</span>
          filename<span class="token punctuation">:</span> <span class="token string">'common.js'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>å®Œæ•´é…ç½®é˜…è¯»<a href="https://webpack.js.org/plugins/split-chunks-plugin" target="_blank" rel="noopener noreferrer">split-chunks-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="lazy-loading-æ‡’åŠ è½½ï¼Œchunk-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#lazy-loading-æ‡’åŠ è½½ï¼Œchunk-æ˜¯ä»€ä¹ˆï¼Ÿ" aria-hidden="true" class="header-anchor">#</a> Lazy Loading æ‡’åŠ è½½ï¼ŒChunk æ˜¯ä»€ä¹ˆï¼Ÿ</h2> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/03-05%20Lazy%20Loading%20%E6%87%92%E5%8A%A0%E8%BD%BD%EF%BC%8CChunk%20%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/03-05/lesson" target="_blank" rel="noopener noreferrer">å…¨éƒ¨ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>åŠ¨æ€å¯¼å…¥æ¨¡å—ï¼Œå¯¼å…¥å‡½æ•°æ‰§è¡Œä»¥åæ‰åŠ è½½</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// idex.js</span>
<span class="token keyword">function</span> <span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 	<span class="token keyword">return</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName:&quot;lodash&quot; */</span> <span class="token string">'lodash'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token punctuation">:</span> _ <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 		<span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Dell'</span><span class="token punctuation">,</span> <span class="token string">'Lee'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token keyword">return</span> element<span class="token punctuation">;</span>
 	<span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>


<span class="token comment">// ç­‰ä»·äºä¸Šé¢ asyncå†™æ³•</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token punctuation">:</span> _ <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName:&quot;lodash&quot; */</span> <span class="token string">'lodash'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Dell'</span><span class="token punctuation">,</span> <span class="token string">'Lee'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	<span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>element <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>Chunk æ˜¯ä»€ä¹ˆï¼Œæ‰“åŒ…åç”Ÿæˆ çš„æ–‡ä»¶ï¼Œæ¯ä¸ªéƒ½æ˜¯ä¸€ä¸ªchunk</p> <p>è®¸å¤šæ¡†æ¶å’Œç±»åº“å¯¹äºå¦‚ä½•ç”¨å®ƒä»¬è‡ªå·±çš„æ–¹å¼æ¥å®ç°ï¼ˆæ‡’åŠ è½½ï¼‰éƒ½æœ‰è‡ªå·±çš„å»ºè®®ã€‚è¿™é‡Œæœ‰ä¸€äº›ä¾‹å­ï¼š</p> <ul><li>React: <a href="https://reacttraining.com/react-router/web/guides/code-splitting" target="_blank" rel="noopener noreferrer">Code Splitting and Lazy Loading<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Vue: <a href="https://alexjoverm.github.io/2017/07/16/Lazy-load-in-Vue-using-Webpack-s-code-splitting/" target="_blank" rel="noopener noreferrer">Lazy Load in Vue using Webpack's code splitting<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>AngularJS: <a href="https://medium.com/@var_bin/angularjs-webpack-lazyload-bb7977f390dd" target="_blank" rel="noopener noreferrer">AngularJS + Webpack = lazyLoad<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> by <a href="https://twitter.com/var_bincom" target="_blank" rel="noopener noreferrer">@var_bincom<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p><a href="https://cn.vuejs.org/v2/guide/components-dynamic-async.html" target="_blank" rel="noopener noreferrer">vueåŠ¨æ€ç»„ä»¶ &amp; å¼‚æ­¥ç»„ä»¶<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="æ‰“åŒ…åˆ†æï¼Œpreloading-prefetching"><a href="#æ‰“åŒ…åˆ†æï¼Œpreloading-prefetching" aria-hidden="true" class="header-anchor">#</a> æ‰“åŒ…åˆ†æï¼ŒPreloading,  Prefetching</h2> <h3 id="æ‰“åŒ…åˆ†æ"><a href="#æ‰“åŒ…åˆ†æ" aria-hidden="true" class="header-anchor">#</a> æ‰“åŒ…åˆ†æ</h3> <p><a href="https://github.com/webpack/analyse" target="_blank" rel="noopener noreferrer">https://github.com/webpack/analyse<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>é…ç½®æ–¹æ³•</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>// package.json
<span class="token property">&quot;dev-build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --profile --json &gt; stats.json --config ./build/webpack.dev.js&quot;</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>æ ¹ç›®å½•ä¼šç”Ÿæˆstats.jsonæ‰“åŒ…åˆ†ææ–‡ä»¶</p> <p>è¿›å…¥<a href="http://webpack.github.io/analyse/" target="_blank" rel="noopener noreferrer">http://webpack.github.io/analyse/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>ä¸Šæ¬¡åˆ†ææ–‡ä»¶</p> <p>å…¶ä»–åˆ†æå·¥å…·<a href="https://webpack.js.org/guides/code-splitting#bundle-analysis" target="_blank" rel="noopener noreferrer">https://webpack.js.org/guides/code-splitting#bundle-analysis<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>ç”¨çš„è¾ƒå¤š<a href="https://github.com/webpack-contrib/webpack-bundle-analyzer" target="_blank" rel="noopener noreferrer">webpack-bundle-analyzer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="ä»£ç è¦†ç›–ç‡"><a href="#ä»£ç è¦†ç›–ç‡" aria-hidden="true" class="header-anchor">#</a> ä»£ç è¦†ç›–ç‡</h3> <p><a href="https://segmentfault.com/a/1190000009013738" target="_blank" rel="noopener noreferrer">Chrome DevTools ä»£ç è¦†ç›–ç‡åŠŸèƒ½è¯¦è§£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>å¿«æ·é”® crtl + shift +p  è¾“å…¥coverage</p> <p>Coverage é¡¾åæ€ä¹‰å°±æ˜¯ä»£ç è¦†ç›–ç‡çš„æ„æ€ã€‚Coverage åŠŸèƒ½ä½¿ç”¨åŠ¨æ€åˆ†æï¼ˆDynamic Analysisï¼‰æ³•æ¥æ”¶é›†ä»£ç è¿è¡Œæ—¶çš„è¦†ç›–ç‡ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿçª¥æ¢ä»–çš„ä»£ç åˆ°åº•æœ‰å¤šå¤§æ¯”ä¾‹åœ¨å‘å…‰å‘çƒ­ã€‚åŠ¨æ€åˆ†ææ˜¯æŒ‡åœ¨åº”ç”¨è¿è¡ŒçŠ¶æ€ä¸‹æ”¶é›†ä»£ç æ‰§è¡Œæ•°æ®çš„è¿‡ç¨‹ï¼Œæ¢å¥è¯è¯´ï¼Œè¦†ç›–ç‡æ•°æ®å°±æ˜¯åœ¨ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­é€šè¿‡æ ‡è®°æ”¶é›†åˆ°çš„ã€‚</p> <p>ä»£ç è¦†ç›–ç‡æ¯”ç¼“å­˜æ›´ä¸ºé‡è¦ï¼Œå› ä¸ºç¼“å­˜ç¬¬äºŒæ¬¡æ‰ä¼šç”¨åˆ°ï¼Œæé«˜ä»£ç è¦†ç›–ç‡ä¼šæé«˜é¦–æ¬¡åŠ è½½æ—¶é—´ã€‚</p> <p>æé«˜ä»£ç è¦†ç›–ç‡æˆ‘ä»¬éœ€è¦åŠ é¡µé¢åŠ è½½æ—¶ä¸éœ€è¦çš„ä»£ç åŠ¨æ€å¼•å…¥ï¼Œä¾‹å¦‚ç™»å½•æ¨¡å—ä»£ç ï¼Œç‚¹å‡»ç™»å½•æŒ‰é’®åæ‰ä¼šç”¨åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç”¨æˆ·ç‚¹å‡»æ—¶åŠ è½½ä»£ç ï¼Œä½†æ˜¯å¦‚æœç‚¹å‡»æ—¶æ‰åŠ è½½ç™»å½•ä»£ç ï¼Œå¯èƒ½å› ä¸ºç½‘ç»œå»¶è¿Ÿå¯¼è‡´å¡é¡¿ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨prefetchå’Œpreloadã€‚</p> <link rel="prefetch">æ˜¯ä¸€ç§å‘Šè¯‰æµè§ˆå™¨**è·å–ä¸€é¡¹å¯èƒ½è¢«**ä¸‹ä¸€é¡µè®¿é—®**æ‰€éœ€è¦çš„èµ„æº**æ–¹å¼ã€‚è¿™æ„å‘³ç€èµ„æºå°†ä»¥è¾ƒä½ä¼˜å…ˆçº§åœ°è·å–ï¼ˆå› ä¸ºæµè§ˆå™¨çŸ¥é“å½“å‰é¡µé¢æ‰€éœ€è¦çš„èµ„æºï¼Œè¦æ¯”æˆ‘ä»¬çŒœæµ‹åœ¨ä¸‹ä¸€é¡µè®¿é—®æ‰€éœ€èµ„æºæ›´é‡è¦ï¼‰ã€‚è¿™æ„å‘³ç€prefetchçš„ä¸»è¦ç”¨é€”æ˜¯åŠ é€Ÿä¸‹ä¸€é¡µè®¿é—®é€Ÿåº¦ï¼Œè€Œä¸æ˜¯å½“å‰é¡µé¢çš„é€Ÿåº¦ã€‚
<p>Preloadæ˜¯ä¸ºå½“å‰é¡µé¢æœåŠ¡çš„ï¼Œå®ƒæœ‰ä¸€ä¸ª as å±æ€§ï¼Œè¿™å¯ä»¥è®©æµè§ˆå™¨åšåˆ°å¾ˆå¤šsubresourceå’Œprefetchåšä¸åˆ°çš„äº‹æƒ…ï¼š</p> <ul><li><strong>æµè§ˆå™¨å¯ä»¥è®¾ç½®æ­£ç¡®çš„èµ„æºä¼˜å…ˆçº§</strong>ï¼Œä½¿å¾—èµ„æºå¯ä»¥è¢«æ­£ç¡®åœ°åŠ è½½ï¼Œé‡è¦çš„èµ„æºä¸å†ä¼šè¢«å»¶è¿Ÿï¼Œä¸å†è¢«ä¸é‡è¦çš„èµ„æºé˜»å¡ã€‚</li> <li>æµè§ˆå™¨ä¼šä¿è¯è¯·æ±‚å¯¹åº”æ­£ç¡®çš„å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆ<a href="http://www.html5rocks.com/en/tutorials/security/content-security-policy/" target="_blank" rel="noopener noreferrer">Content-Security-Policy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ï¼‰æŒ‡ä»¤ï¼Œä¸ä¼šå‘èµ·éæ³•è¯·æ±‚ã€‚</li> <li>æµè§ˆå™¨ä¼šåŸºäºèµ„æºç±»å‹å‘é€æ­£ç¡®çš„ Accept é¦–éƒ¨ã€‚ï¼ˆæ¯”å¦‚è·å–å›¾ç‰‡æ—¶æŒ‡å®šå¯¹â€œimage/webpâ€çš„æ”¯æŒï¼‰</li> <li>æµè§ˆå™¨çŸ¥é“èµ„æºçš„ç±»å‹ï¼Œæ‰€ä»¥å¯ä»¥ç¨åå†³å®šèµ„æºæ˜¯å¦åœ¨åç»­è¯·æ±‚ä¸­ä¿æŒå¯é‡ç”¨ã€‚</li></ul> <p>Preloadçš„å¦å¤–ä¸€ä¸ªä¸åŒæ˜¯ï¼Œå®ƒæœ‰onloadäº‹ä»¶ï¼ˆè‡³å°‘åœ¨Chromeä¸­ï¼Œå¯¹å¦å¤–ä¸¤ç§ rel å–å€¼å¹¶æ²¡ä½œç”¨ï¼‰ã€‚</p> <p>Preload<strong>ä¸é˜»å¡windowçš„onloadäº‹ä»¶</strong>ï¼Œé™¤éè¯¥èµ„æºæ˜¯è¢«ä¸€ä¸ªé˜»å¡è¯¥äº‹ä»¶çš„èµ„æºè¯·æ±‚çš„ã€‚</p> <p>å°†è¿™äº›ç‰¹æ€§ç»“åˆåœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬å¯ä»¥åšåˆ°ä¸€äº›æ–°çš„äº‹æƒ…ã€‚</p> <p>åŠ è½½è¾ƒæ™šå‘ç°çš„èµ„æº</p> <p>preloadæœ€åŸºæœ¬çš„ä½¿ç”¨æ–¹å¼æ˜¯<strong>æå‰åŠ è½½è¾ƒæ™šå‘ç°çš„èµ„æº</strong>ã€‚è™½ç„¶å¤§éƒ¨åˆ†åŸºäºæ ‡ç­¾çš„èµ„æºä¼šè¢«æµè§ˆå™¨å†…éƒ¨çš„é¢„åŠ è½½å™¨ï¼ˆ<a href="http://calendar.perfplanet.com/2013/big-bad-preloader/" target="_blank" rel="noopener noreferrer">preloader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼‰ææ—©å‘ç°ï¼Œä½†å¹¶éæ‰€æœ‰èµ„æºéƒ½æ˜¯åŸºäºæ ‡ç­¾çš„ã€‚æœ‰äº›èµ„æºæ˜¯éšè—åœ¨CSSå’ŒJavaScriptä¸­çš„ï¼Œæµè§ˆå™¨ä¸çŸ¥é“é¡µé¢å³å°†éœ€è¦è¿™äº›èµ„æºï¼Œè€Œç­‰åˆ°å‘ç°å®ƒä»¬æ—¶å·²ç»ä¸ºæ—¶å·²æ™šã€‚æ‰€ä»¥åœ¨æœ‰äº›æƒ…å†µï¼Œè¿™äº›èµ„æºå»¶ç¼“äº†é¦–å±æ¸²æŸ“ï¼Œæˆ–æ˜¯å»¶ç¼“äº†é¡µé¢å…³é”®éƒ¨åˆ†çš„åŠ è½½ã€‚</p> <p>æŸ¥çœ‹æœ¬ç«™å¯ä»¥çœ‹åˆ°bodyç»“æŸå‰çš„ä¸‰ä¸ªdeferè„šæœ¬åœ¨é¡µé¢headåšäº†preload</p> <p><img src="https://img.amazingtm.com/201903/11003137.png" alt=""></p> <p><img src="https://img.amazingtm.com/201903/11003254.png" alt=""></p> <p>è¿˜å¯ä»¥é…åˆ<a href="https://instant.page/" target="_blank" rel="noopener noreferrer">instant.page<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ï¼Œinstant.pageä½¿ç”¨<em>å³æ—¶é¢„åŠ è½½</em> - å®ƒåœ¨ç”¨æˆ·ç‚¹å‡»ä¹‹å‰<em>é¢„å…ˆ</em>åŠ è½½é¡µé¢ã€‚å› ä¸ºé¼ æ ‡æ‚¬åœå’Œç‚¹å‡»ä¹‹é—´æœ‰å‡ ç™¾æ¯«ç§’å»¶è¿Ÿï¼Œç§»åŠ¨è®¾å¤‡ä¸Šï¼Œæ‰‹æŒ‡è§¦æ‘¸åˆ°é‡Šæ”¾ä¹Ÿä¼šæœ‰å»¶è¿Ÿã€‚</p> <p>æˆ–è€…ä½¿ç”¨ <a href="GoogleChromeLabs/quicklink">GoogleChromeLabs/quicklink</a> è¿™ä¸ªé¡¹ç›®ï¼šå®ƒç”± Google å…¬å¸è‘—åå¼€å‘è€… Addy Osmani å‘èµ·ï¼Œå®ç°äº†ï¼š<strong>åœ¨ç©ºé—²æ—¶é—´é¢„è·å–é¡µé¢å¯è§†åŒºåŸŸå†…çš„é“¾æ¥ï¼ŒåŠ å¿«åç»­åŠ è½½é€Ÿåº¦ã€‚</strong></p> <p>æˆ‘å·²ç»å°†instant.pageå·²å‘å¸ƒåˆ°npm <a href="https://www.npmjs.com/package/click-prefetch" target="_blank" rel="noopener noreferrer">click-prefetch<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>click-prefetch npm æ¨¡å—ä½¿ç”¨</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i click-prefetch
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>vueåŠ¨æ€å¼•å…¥</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">import</span><span class="token punctuation">(</span>
      <span class="token comment">/* webpackPrefetch: true */</span>
      <span class="token comment">/* webpackChunkName:&quot;click-prefetch&quot;*/</span> 
    <span class="token string">'click-prefetch'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">default</span><span class="token punctuation">:</span> func<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>æ™®é€šå¼•å…¥</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token keyword">import</span>  clickPrefetch <span class="token keyword">from</span> <span class="token string">'click-prefetch'</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">clickPrefetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="é¢„å–-é¢„åŠ è½½æ¨¡å—-prefetch-preload-module"><a href="#é¢„å–-é¢„åŠ è½½æ¨¡å—-prefetch-preload-module" aria-hidden="true" class="header-anchor">#</a> é¢„å–/é¢„åŠ è½½æ¨¡å—(prefetch/preload module)</h3> <p>webpack v4.6.0+ æ·»åŠ äº†é¢„å–å’Œé¢„åŠ è½½çš„æ”¯æŒã€‚</p> <p>åœ¨å£°æ˜ import æ—¶ï¼Œä½¿ç”¨ä¸‹é¢è¿™äº›å†…ç½®æŒ‡ä»¤ï¼Œå¯ä»¥è®© webpack è¾“å‡º &quot;resource hint(èµ„æºæç¤º)&quot;ï¼Œæ¥å‘ŠçŸ¥æµè§ˆå™¨ï¼š</p> <ul><li>prefetch(é¢„å–)ï¼šå°†æ¥æŸäº›å¯¼èˆªä¸‹å¯èƒ½éœ€è¦çš„èµ„æº</li> <li>preload(é¢„åŠ è½½)ï¼šå½“å‰å¯¼èˆªä¸‹å¯èƒ½éœ€è¦èµ„æº</li></ul> <p>ä¸‹é¢è¿™ä¸ª prefetch çš„ç®€å•ç¤ºä¾‹ä¸­ï¼Œæœ‰ä¸€ä¸ª <code>HomePage</code> ç»„ä»¶ï¼Œå…¶å†…éƒ¨æ¸²æŸ“ä¸€ä¸ª <code>LoginButton</code> ç»„ä»¶ï¼Œç„¶ååœ¨ç‚¹å‡»åæŒ‰éœ€åŠ è½½ <code>LoginModal</code> ç»„ä»¶ã€‚</p> <p><strong>LoginButton.js</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//...</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackPrefetch: true */</span> <span class="token string">'LoginModal'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>è¿™ä¼šç”Ÿæˆ <code>&lt;link rel=&quot;prefetch&quot; href=&quot;login-modal-chunk.js&quot;&gt;</code> å¹¶è¿½åŠ åˆ°é¡µé¢å¤´éƒ¨ï¼ŒæŒ‡ç¤ºç€æµè§ˆå™¨åœ¨é—²ç½®æ—¶é—´é¢„å– <code>login-modal-chunk.js</code> æ–‡ä»¶ã€‚</p> <blockquote><p>åªè¦çˆ¶ chunk å®ŒæˆåŠ è½½ï¼Œwebpack å°±ä¼šæ·»åŠ  prefetch hint(é¢„å–æç¤º)ã€‚</p></blockquote> <p>ä¸ prefetch æŒ‡ä»¤ç›¸æ¯”ï¼Œpreload æŒ‡ä»¤æœ‰è®¸å¤šä¸åŒä¹‹å¤„ï¼š</p> <ul><li>preload chunk ä¼šåœ¨çˆ¶ chunk åŠ è½½æ—¶ï¼Œä»¥å¹¶è¡Œæ–¹å¼å¼€å§‹åŠ è½½ã€‚prefetch chunk ä¼šåœ¨çˆ¶ chunk åŠ è½½ç»“æŸåå¼€å§‹åŠ è½½ã€‚</li> <li>preload chunk å…·æœ‰ä¸­ç­‰ä¼˜å…ˆçº§ï¼Œå¹¶ç«‹å³ä¸‹è½½ã€‚prefetch chunk åœ¨æµè§ˆå™¨é—²ç½®æ—¶ä¸‹è½½ã€‚</li> <li>preload chunk ä¼šåœ¨çˆ¶ chunk ä¸­ç«‹å³è¯·æ±‚ï¼Œç”¨äºå½“ä¸‹æ—¶åˆ»ã€‚prefetch chunk ä¼šç”¨äºæœªæ¥çš„æŸä¸ªæ—¶åˆ»ã€‚</li> <li>æµè§ˆå™¨æ”¯æŒç¨‹åº¦ä¸åŒã€‚</li></ul> <p>ä¸‹é¢è¿™ä¸ªç®€å•çš„ preload ç¤ºä¾‹ä¸­ï¼Œæœ‰ä¸€ä¸ª <code>Component</code>ï¼Œä¾èµ–äºä¸€ä¸ªè¾ƒå¤§çš„ libraryï¼Œæ‰€ä»¥åº”è¯¥å°†å…¶åˆ†ç¦»åˆ°ä¸€ä¸ªç‹¬ç«‹çš„ chunk ä¸­ã€‚</p> <p>æˆ‘ä»¬å‡æƒ³è¿™é‡Œçš„å›¾è¡¨ç»„ä»¶ <code>ChartComponent</code> ç»„ä»¶éœ€è¦ä¾èµ–ä½“ç§¯å·¨å¤§çš„ <code>ChartingLibrary</code> åº“ã€‚å®ƒä¼šåœ¨æ¸²æŸ“æ—¶æ˜¾ç¤ºä¸€ä¸ª <code>LoadingIndicator(åŠ è½½è¿›åº¦æ¡)</code> ç»„ä»¶ï¼Œç„¶åç«‹å³æŒ‰éœ€å¯¼å…¥ <code>ChartingLibrary</code>ï¼š</p> <p><strong>ChartComponent.js</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//...</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackPreload: true */</span> <span class="token string">'ChartingLibrary'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>åœ¨é¡µé¢ä¸­ä½¿ç”¨ <code>ChartComponent</code> æ—¶ï¼Œåœ¨è¯·æ±‚ ChartComponent.js çš„åŒæ—¶ï¼Œè¿˜ä¼šé€šè¿‡ <code>&lt;link rel=&quot;preload&quot;&gt;</code> è¯·æ±‚ charting-library-chunkã€‚å‡å®š page-chunk ä½“ç§¯å¾ˆå°ï¼Œå¾ˆå¿«å°±è¢«åŠ è½½å¥½ï¼Œé¡µé¢æ­¤æ—¶å°±ä¼šæ˜¾ç¤º <code>LoadingIndicator(åŠ è½½è¿›åº¦æ¡)</code> ï¼Œç­‰åˆ° <code>charting-library-chunk</code> è¯·æ±‚å®Œæˆï¼ŒLoadingIndicator ç»„ä»¶æ‰æ¶ˆå¤±ã€‚å¯åŠ¨ä»…éœ€è¦å¾ˆå°‘çš„åŠ è½½æ—¶é—´ï¼Œå› ä¸ºåªè¿›è¡Œå•æ¬¡å¾€è¿”ï¼Œè€Œä¸æ˜¯ä¸¤æ¬¡å¾€è¿”ã€‚å°¤å…¶æ˜¯åœ¨é«˜å»¶è¿Ÿç¯å¢ƒä¸‹ã€‚</p> <h3 id="ä»£ç æ¼”ç¤º"><a href="#ä»£ç æ¼”ç¤º" aria-hidden="true" class="header-anchor">#</a> ä»£ç æ¼”ç¤º</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackPrefetch: true */</span> <span class="token string">'./click.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">default</span><span class="token punctuation">:</span> func<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// click.js</span>
<span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'Dell Lee'</span><span class="token punctuation">;</span>
	document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> handleClick<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>åŠ¨æ€å¼•å…¥click.js</p> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/03-06%20%E6%89%93%E5%8C%85%E5%88%86%E6%9E%90%EF%BC%8CPreloading%2C%20%20Prefetching/03-06/lesson" target="_blank" rel="noopener noreferrer">å…¨éƒ¨ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://webpack.docschina.org/api/module-methods/#import-" target="_blank" rel="noopener noreferrer">importæ–‡æ¡£åŒ…å«é­”æ³•æ³¨é‡Š<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>å‚è€ƒæ–‡ç« </p> <p><a href="http://www.alloyteam.com/2016/05/preload-what-is-it-good-for-part1/" target="_blank" rel="noopener noreferrer">Preloadæœ‰ä»€ä¹ˆå¥½å¤„<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://juejin.im/post/5a372d956fb9a045204c4ff1" target="_blank" rel="noopener noreferrer">Code Splitting with Vue.js And Webpack<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://cn.vuejs.org/v2/guide/components-dynamic-async.html#%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">å¼‚æ­¥ç»„ä»¶<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="cssæ–‡ä»¶çš„ä»£ç åˆ†å‰²"><a href="#cssæ–‡ä»¶çš„ä»£ç åˆ†å‰²" aria-hidden="true" class="header-anchor">#</a> cssæ–‡ä»¶çš„ä»£ç åˆ†å‰²</h2> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/03-07%20CSS%20%E6%96%87%E4%BB%B6%E7%9A%84%E4%BB%A3%E7%A0%81%E5%88%86%E5%89%B2/03-07/lesson" target="_blank" rel="noopener noreferrer">å…¨éƒ¨ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>å°çŸ¥è¯†</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>	output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		filename<span class="token punctuation">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>                  <span class="token comment">// å…¥å£æ–‡ä»¶å</span>
		chunkFilename<span class="token punctuation">:</span> <span class="token string">'[name].chunk.js'</span><span class="token punctuation">,</span>       <span class="token comment">// chunkæ–‡ä»¶å</span>
		path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dist'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="minicssextractplugin"><a href="#minicssextractplugin" aria-hidden="true" class="header-anchor">#</a> MiniCssExtractPlugin</h3> <p>cssåˆ†å‰²æ’ä»¶
webpacké»˜è®¤ä¸æ‰“åŒ…cssæ–‡ä»¶ï¼Œä½¿ç”¨css in js</p> <p>MiniCssExtractPlugin æš‚ä¸æ”¯æŒHRMå› æ­¤è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨</p> <p>å¦å¤–å‹ç¼©csséœ€è¦<a href="https://github.com/NMFR/optimize-css-assets-webpack-plugin" target="_blank" rel="noopener noreferrer">Optimize CSS Assets Webpack Plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>å®‰è£…</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev mini-css-extract-plugin
<span class="token function">npm</span> <span class="token function">install</span> --save-dev optimize-css-assets-webpack-plugin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä¿®æ”¹ç”Ÿäº§ç¯å¢ƒé…ç½®</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// æ·»åŠ æ’ä»¶</span>
<span class="token keyword">const</span> OptimizeCSSAssetsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;optimize-css-assets-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ·»åŠ æ’ä»¶</span>
<span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.common.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">const</span> prodConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
	mode<span class="token punctuation">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
	devtool<span class="token punctuation">:</span> <span class="token string">'cheap-module-source-map'</span><span class="token punctuation">,</span>
	module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		rules<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
			test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
			use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
				MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>    <span class="token comment">//ä¿®æ”¹loader</span>
				<span class="token punctuation">{</span>
					loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
					options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
						importLoaders<span class="token punctuation">:</span> <span class="token number">2</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
				<span class="token string">'postcss-loader'</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
			use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
				MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>   <span class="token comment">//ä¿®æ”¹loader</span>
				<span class="token string">'css-loader'</span><span class="token punctuation">,</span>
				<span class="token string">'postcss-loader'</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">OptimizeCSSAssetsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span>  <span class="token comment">//å®ä¾‹åŒ–å‹ç¼©æ’ä»¶</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>                     <span class="token comment">// å®ä¾‹åŒ–æ’ä»¶</span>
			filename<span class="token punctuation">:</span> <span class="token string">'[name].css'</span><span class="token punctuation">,</span>                    <span class="token comment">//ç›´æ¥å¼•å…¥é¡µé¢çš„cssåå­—</span>
			chunkFilename<span class="token punctuation">:</span> <span class="token string">'[name].chunk.css'</span>          <span class="token comment">//</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> prodConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><p>ä¿®æ”¹å¼€å‘ç¯å¢ƒé…ç½® ï¼Œæ·»åŠ cssloaderé…ç½®</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.common.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> devConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
	mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
	devtool<span class="token punctuation">:</span> <span class="token string">'cheap-module-eval-source-map'</span><span class="token punctuation">,</span>
	devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		contentBase<span class="token punctuation">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
		open<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		port<span class="token punctuation">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
		hot<span class="token punctuation">:</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
			test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
			use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
				<span class="token string">'style-loader'</span><span class="token punctuation">,</span> 
				<span class="token punctuation">{</span>
					loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
					options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
						importLoaders<span class="token punctuation">:</span> <span class="token number">2</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
				<span class="token string">'postcss-loader'</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
			use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
				<span class="token string">'style-loader'</span><span class="token punctuation">,</span>
				<span class="token string">'css-loader'</span><span class="token punctuation">,</span>
				<span class="token string">'postcss-loader'</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> devConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><p>ä¿®æ”¹å…¬å…±é…ç½®  åˆ é™¤cssé…ç½®</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		main<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> 
			test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span> 
			exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span> 
			loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			test<span class="token punctuation">:</span> <span class="token regex">/\.(jpg|png|gif)$/</span><span class="token punctuation">,</span>
			use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
				loader<span class="token punctuation">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
				options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
					name<span class="token punctuation">:</span> <span class="token string">'[name]_[hash].[ext]'</span><span class="token punctuation">,</span>
					outputPath<span class="token punctuation">:</span> <span class="token string">'images/'</span><span class="token punctuation">,</span>
					limit<span class="token punctuation">:</span> <span class="token number">10240</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span> 
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			test<span class="token punctuation">:</span> <span class="token regex">/\.(eot|ttf|svg)$/</span><span class="token punctuation">,</span>
			use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
				loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span>
			<span class="token punctuation">}</span> 
		<span class="token punctuation">}</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			template<span class="token punctuation">:</span> <span class="token string">'src/index.html'</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
		<span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'dist'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			root<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../'</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		usedExports<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      chunks<span class="token punctuation">:</span> <span class="token string">'all'</span>
    <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		filename<span class="token punctuation">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
		chunkFilename<span class="token punctuation">:</span> <span class="token string">'[name].chunk.js'</span><span class="token punctuation">,</span>
		path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dist'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><p>å› ä¸ºå¼€å¯tree shakingï¼Œè¦é…ç½®package.json ï¼Œé˜²æ­¢åˆ é™¤css</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token string">&quot;sideEffects&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;*.css&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>é«˜çº§ç‰¹æ€§ï¼ŒæŸ¥çœ‹<a href="https://webpack.js.org/plugins/mini-css-extract-plugin" target="_blank" rel="noopener noreferrer">æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>ä½¿ç”¨é¢„åŠ è½½æˆ–å†…è”CSS</p> <p>åœ¨å•ä¸ªæ–‡ä»¶ä¸­æå–æ‰€æœ‰CSS</p> <p>åª’ä½“æŸ¥è¯¢æ’ä»¶</p> <p>å¦‚æœæ‚¨æƒ³ä»æå–çš„CSSä¸­æå–åª’ä½“æŸ¥è¯¢ï¼ˆå› æ­¤ç§»åŠ¨ç”¨æˆ·ä¸å†éœ€è¦åŠ è½½æ¡Œé¢æˆ–å¹³æ¿ç”µè„‘ç‰¹å®šçš„CSSï¼‰ï¼Œæ‚¨åº”è¯¥ä½¿ç”¨ä»¥ä¸‹æ’ä»¶ä¹‹ä¸€ï¼š</p> <ul><li><a href="https://github.com/SassNinja/media-query-plugin" target="_blank" rel="noopener noreferrer">åª’ä½“æŸ¥è¯¢æ’ä»¶<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/mike-diamond/media-query-splitting-plugin" target="_blank" rel="noopener noreferrer">åª’ä½“æŸ¥è¯¢æ‹†åˆ†æ’ä»¶<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="webpackä¸æµè§ˆå™¨ç¼“å­˜"><a href="#webpackä¸æµè§ˆå™¨ç¼“å­˜" aria-hidden="true" class="header-anchor">#</a> webpackä¸æµè§ˆå™¨ç¼“å­˜</h2> <p>å°çŸ¥è¯†ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>performance<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">//å…³é—­æ€§èƒ½è­¦å‘Š ï¼Œè¶…å‡º200kbæ§åˆ¶å°ä¼šè­¦å‘Š</span>
 cacheGroups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      	vendors<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      		test<span class="token punctuation">:</span> <span class="token regex">/[\\/]node_modules[\\/]/</span><span class="token punctuation">,</span>
      		priority<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>
      		name<span class="token punctuation">:</span> <span class="token string">'vendors'</span><span class="token punctuation">,</span>                     <span class="token comment">//ä¿®æ”¹nodeæ¨¡å—æ‰“åŒ…æ–‡ä»¶å</span>
      	<span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>æ‰“åŒ…åçš„æœåŠ¡å™¨æ–‡ä»¶ä¼šåœ¨ç”¨æˆ·æµè§ˆå™¨ç”Ÿäº§ç¼“å­˜ï¼Œå› æ­¤è¦ä¿®æ”¹ç”Ÿäº§ç¯å¢ƒoutputï¼Œæ ¹æ®å†…å®¹äº§ç”Ÿhashå€¼ï¼Œå†…å®¹ä¸å˜å°±ä¸ä¼šå˜</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		filename<span class="token punctuation">:</span> <span class="token string">'[name].[contenthash].js'</span><span class="token punctuation">,</span>
		chunkFilename<span class="token punctuation">:</span> <span class="token string">'[name].[contenthash].js'</span>
	<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>è¿™æ ·ä»£ç å˜åŒ–é‡æ–°ä¸Šçº¿ï¼Œç”¨æˆ·åªéœ€è¦ä¸‹è½½å˜æ›´æ‰“ä»£ç éƒ¨åˆ†å³å¯</p> <p>è€ç‰ˆæœ¬webpackéœ€è¦é¢å¤–é…ç½®</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>	optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		runtimeChunk<span class="token punctuation">:</span> <span class="token punctuation">{</span>
			name<span class="token punctuation">:</span> <span class="token string">'runtime'</span>  
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>å› ä¸ºè€ç‰ˆæœ¬webpackå¤„ç†ä¸šåŠ¡ä»£ç å’Œåº“ä»£ç å…³ç³»çš„manifestä»£ç å¯èƒ½ä¼šå˜åŒ–ï¼Œé…ç½®runtimeChunkä¼šæŠŠè¿™éƒ¨åˆ†ä»£ç æŠ½ç¦»å‡ºæ¥</p> <h2 id="shimming"><a href="#shimming" aria-hidden="true" class="header-anchor">#</a> shimming</h2> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/03-09%20Shimming%20%E7%9A%84%E4%BD%9C%E7%94%A8/03-09/lesson" target="_blank" rel="noopener noreferrer">å…¨éƒ¨ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>å«ç‰‡</p> <p>æ¨¡å—åŒ–å„æ¨¡å—ä¹‹é—´çš„å˜é‡ä¸èƒ½äº’ç›¸ä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ProvidePluginæ’ä»¶è‡ªåŠ¨åŠ è½½ï¼Œè€Œä¸å¿…æ¨¡å—<code>import</code>æˆ–<code>require</code>å®ƒä»¬æ— å¤„ä¸åœ¨ã€‚</p> <p>é…ç½®plugin</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  identifier<span class="token punctuation">:</span> <span class="token string">'module1'</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>è¦ä¹ˆ</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  identifier<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'module1'</span><span class="token punctuation">,</span> <span class="token string">'property1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æ— è®ºä½•æ—¶<code>identifier</code>åœ¨æ¨¡å—ä¸­é‡åˆ°è‡ªç”±å˜é‡ï¼Œ<code>module</code>éƒ½ä¼šè‡ªåŠ¨åŠ è½½ï¼Œå¹¶<code>identifier</code>ç”¨åŠ è½½çš„å¯¼å‡ºå¡«å……<code>module</code>ï¼ˆæˆ–è€…<code>property</code>ä¸ºäº†æ”¯æŒå‘½åå¯¼å‡ºï¼‰ã€‚</p> <blockquote><p>è¦å¯¼å…¥ES2015æ¨¡å—çš„é»˜è®¤å¯¼å‡ºï¼Œå¿…é¡»æŒ‡å®šæ¨¡å—çš„é»˜è®¤å±æ€§ã€‚</p></blockquote> <p>æ¨¡å—ä¸­çš„thisé»˜è®¤ä¸ºè¿™ä¸ªæ¨¡å—ï¼Œè¦æƒ³æ”¹æˆwindowå¯ä»¥ä½¿ç”¨æ’ä»¶</p> <p>å®‰è£…</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i imports-loader -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>é…ç½®</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.common.js</span>
		rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> 
			test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span> 
			exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
			use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
				loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
				loader<span class="token punctuation">:</span> <span class="token string">'imports-loader?this=&gt;window'</span>   <span class="token comment">//æ·»åŠ loader</span>
			<span class="token punctuation">}</span><span class="token punctuation">]</span>
		<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ä½œä¸š</p> <p>é˜…è¯»<a href="https://webpack.js.org/guides" target="_blank" rel="noopener noreferrer">æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="ç¯å¢ƒå˜é‡çš„ä½¿ç”¨"><a href="#ç¯å¢ƒå˜é‡çš„ä½¿ç”¨" aria-hidden="true" class="header-anchor">#</a> ç¯å¢ƒå˜é‡çš„ä½¿ç”¨</h2> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/03-10%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/03-10/lesson" target="_blank" rel="noopener noreferrer">å…¨éƒ¨ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>ä½¿ç”¨ç¯å¢ƒå˜é‡ä¿®æ”¹</p> <p>å¯ä»¥é…ç½®ç¯å¢ƒå˜é‡ä½¿ç”¨ä¸åŒé…ç½®æ–‡ä»¶</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>// package.json
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev-build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config ./build/webpack.common.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server --config ./build/webpack.common.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --env.production --config ./build/webpack.common.js&quot;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.common.js</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>env <span class="token operator">&amp;&amp;</span> env<span class="token punctuation">.</span>production<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> prodConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> devConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>æƒ³è¦æ¶ˆé™¤ <a href="https://webpack.docschina.org/guides/development" target="_blank" rel="noopener noreferrer">å¼€å‘ç¯å¢ƒ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> å’Œ <a href="https://webpack.docschina.org/guides/production" target="_blank" rel="noopener noreferrer">ç”Ÿäº§ç¯å¢ƒ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ä¹‹é—´çš„ <code>webpack.config.js</code> å·®å¼‚ï¼Œä½ å¯èƒ½éœ€è¦ç¯å¢ƒå˜é‡(environment variable)ã€‚</p> <p>webpack å‘½ä»¤è¡Œ <a href="https://webpack.docschina.org/api/cli/#environment-options" target="_blank" rel="noopener noreferrer">ç¯å¢ƒé…ç½®<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> çš„ <code>--env</code> å‚æ•°ï¼Œå¯ä»¥å…è®¸ä½ ä¼ å…¥ä»»æ„æ•°é‡çš„ç¯å¢ƒå˜é‡ã€‚è€Œåœ¨ <code>webpack.config.js</code> ä¸­å¯ä»¥è®¿é—®åˆ°è¿™äº›ç¯å¢ƒå˜é‡ã€‚ä¾‹å¦‚ï¼Œ<code>--env.production</code> æˆ– <code>--env.NODE_ENV=local</code>ï¼ˆ<code>NODE_ENV</code> é€šå¸¸çº¦å®šç”¨äºå®šä¹‰ç¯å¢ƒç±»å‹ï¼ŒæŸ¥çœ‹ <a href="https://dzone.com/articles/what-you-should-know-about-node-env" target="_blank" rel="noopener noreferrer">è¿™é‡Œ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼‰ã€‚</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>webpack --env.NODE_ENV<span class="token operator">=</span>local --env.production --progress
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>å¦‚æœè®¾ç½® <code>env</code> å˜é‡ï¼Œå´æ²¡æœ‰èµ‹å€¼ï¼Œ<code>--env.production</code> é»˜è®¤è¡¨ç¤ºå°† <code>--env.production</code> è®¾ç½®ä¸º <code>true</code>ã€‚è¿˜æœ‰è®¸å¤šå…¶ä»–å¯ä»¥ä½¿ç”¨çš„è¯­æ³•ã€‚æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ <a href="https://webpack.docschina.org/api/cli/#environment-options" target="_blank" rel="noopener noreferrer">webpack CLI<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> æ–‡æ¡£ã€‚</p></blockquote> <p>å¯¹äºæˆ‘ä»¬çš„ webpack é…ç½®ï¼Œæœ‰ä¸€ä¸ªå¿…é¡»è¦ä¿®æ”¹ä¹‹å¤„ã€‚é€šå¸¸ï¼Œ<code>module.exports</code> æŒ‡å‘é…ç½®å¯¹è±¡ã€‚è¦ä½¿ç”¨ <code>env</code> å˜é‡ï¼Œä½ å¿…é¡»å°† <code>module.exports</code> è½¬æ¢æˆä¸€ä¸ªå‡½æ•°ï¼š</p> <p><strong>webpack.config.js</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> env <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Use env.&lt;YOUR VARIABLE&gt; here:</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'NODE_ENV: '</span><span class="token punctuation">,</span> env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'local'</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Production: '</span><span class="token punctuation">,</span> env<span class="token punctuation">.</span>production<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
      path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>vue-cliç­‰é»˜è®¤é…ç½®äº†ç¯å¢ƒå˜é‡</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// vue.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  baseUrl<span class="token punctuation">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span> <span class="token operator">?</span> <span class="token string">'./'</span> <span class="token punctuation">:</span> <span class="token string">'/'</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="libraryçš„æ‰“åŒ…"><a href="#libraryçš„æ‰“åŒ…" aria-hidden="true" class="header-anchor">#</a> libraryçš„æ‰“åŒ…</h2> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/04-01%20Library%E7%9A%84%E6%89%93%E5%8C%85/04-01/library" target="_blank" rel="noopener noreferrer">å…¨éƒ¨ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>æ‰“åŒ…åº“æ­¥éª¤ï¼š</p> <p>åˆ›å»ºæ–‡ä»¶å¤¹ library</p> <p>åˆå§‹åŒ– npm init</p> <p>åˆ›å»ºåº“æ–‡ä»¶</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> math <span class="token keyword">from</span> <span class="token string">'./math'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> string <span class="token keyword">from</span> <span class="token string">'./string'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span> math<span class="token punctuation">,</span> string <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// math.js</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">minus</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">multiply</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> a <span class="token operator">*</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">division</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> a <span class="token operator">/</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// string.js</span>
<span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">join</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>å®‰è£…webpack</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i webpack webpack-cli -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>åˆ›å»ºwebpacké…ç½®æ–‡ä»¶</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	mode<span class="token punctuation">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
	entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
	externals<span class="token punctuation">:</span> <span class="token string">'lodash'</span><span class="token punctuation">,</span>        <span class="token comment">// è§ä¸‹æ–‡</span>
	output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		filename<span class="token punctuation">:</span> <span class="token string">'library.js'</span><span class="token punctuation">,</span>
		library<span class="token punctuation">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span>     <span class="token comment">// æ”¯æŒscrpitå¼•å…¥ï¼Œå…¨å±€å˜é‡æŒ‚åˆ°root</span>
		libraryTarget<span class="token punctuation">:</span> <span class="token string">'umd'</span>   <span class="token comment">//æ”¯æŒ es commonjsç­‰æ¨¡å—å¼•å…¥è¯­æ³•</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>å…¶ä»–ç»„åˆé…ç½®</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>		library<span class="token punctuation">:</span> <span class="token string">'library'</span><span class="token punctuation">,</span>     <span class="token comment">// æ”¯æŒscrpitå¼•å…¥ï¼Œå…¨å±€å˜é‡æŒ‚åˆ°this</span>
		libraryTarget<span class="token punctuation">:</span> <span class="token string">'this'</span>   <span class="token comment">//ä¸æ”¯æŒ es common.js require.jsç­‰æ¨¡å—å¼•å…¥è¯­æ³•</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>		library<span class="token punctuation">:</span> <span class="token string">'library'</span><span class="token punctuation">,</span>     <span class="token comment">// æ”¯æŒscrpitå¼•å…¥ï¼Œå…¨å±€å˜é‡æŒ‚åˆ°window æµè§ˆå™¨ç¯å¢ƒ</span>
		libraryTarget<span class="token punctuation">:</span> <span class="token string">'window'</span>   <span class="token comment">//ä¸æ”¯æŒ es common.js require.jsç­‰æ¨¡å—å¼•å…¥è¯­æ³•</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>		library<span class="token punctuation">:</span> <span class="token string">'library'</span><span class="token punctuation">,</span>     <span class="token comment">// æ”¯æŒscrpitå¼•å…¥ï¼Œå…¨å±€å˜é‡æŒ‚åˆ°global nodeç¯å¢ƒ</span>
		libraryTarget<span class="token punctuation">:</span> <span class="token string">'global'</span>   <span class="token comment">//ä¸æ”¯æŒ es common.js require.jsç­‰æ¨¡å—å¼•å…¥è¯­æ³•</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>es10è§„èŒƒè§„å®šglobalThisä¹Ÿå¯ä»¥ä½¿ç”¨</p> <h3 id="åº“å¼•ç”¨å…¶ä»–åº“æ€ä¹ˆåŠ"><a href="#åº“å¼•ç”¨å…¶ä»–åº“æ€ä¹ˆåŠ" aria-hidden="true" class="header-anchor">#</a> åº“å¼•ç”¨å…¶ä»–åº“æ€ä¹ˆåŠ</h3> <p>ä¾‹å¦‚åº”ç”¨äº†lodashé…ç½®</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>externals<span class="token punctuation">:</span> <span class="token string">'lodash'</span><span class="token punctuation">,</span>        
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>externals</code> é…ç½®é€‰é¡¹æä¾›äº†ã€Œä»è¾“å‡ºçš„ bundle ä¸­æ’é™¤ä¾èµ–ã€çš„æ–¹æ³•ã€‚ç›¸åï¼Œæ‰€åˆ›å»ºçš„ bundle ä¾èµ–äºé‚£äº›å­˜åœ¨äºç”¨æˆ·ç¯å¢ƒ(consumer's environment)ä¸­çš„ä¾èµ–ã€‚æ­¤åŠŸèƒ½é€šå¸¸å¯¹ <strong>library å¼€å‘äººå‘˜</strong>æ¥è¯´æ˜¯æœ€æœ‰ç”¨çš„ï¼Œç„¶è€Œä¹Ÿä¼šæœ‰å„ç§å„æ ·çš„åº”ç”¨ç¨‹åºç”¨åˆ°å®ƒã€‚</p> <blockquote><p><strong>ç”¨æˆ·(consumer)</strong>ï¼Œåœ¨è¿™é‡Œæ˜¯æŒ‡ï¼Œå¼•ç”¨äº†ã€Œä½¿ç”¨ webpack æ‰“åŒ…çš„ libraryã€çš„æ‰€æœ‰ç»ˆç«¯ç”¨æˆ·çš„åº”ç”¨ç¨‹åº(end user application)ã€‚</p></blockquote> <h3 id="externals"><a href="#externals" aria-hidden="true" class="header-anchor">#</a> <code>externals</code></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>string` `object` `function` `regex
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>é˜²æ­¢</strong>å°†æŸäº› <code>import</code> çš„åŒ…(package)<strong>æ‰“åŒ…</strong>åˆ° bundle ä¸­ï¼Œè€Œæ˜¯åœ¨è¿è¡Œæ—¶(runtime)å†å»ä»å¤–éƒ¨è·å–è¿™äº›<em>æ‰©å±•ä¾èµ–(external dependencies)</em>ã€‚</p> <p>ä¾‹å¦‚ï¼Œä» CDN å¼•å…¥ <a href="https://jquery.com/" target="_blank" rel="noopener noreferrer">jQuery<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼Œè€Œä¸æ˜¯æŠŠå®ƒæ‰“åŒ…ï¼š</p> <p><strong>index.html</strong></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span>
  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://code.jquery.com/jquery-3.1.0.js<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">integrity</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk=<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>anonymous<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>webpack.config.js</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  externals<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    jquery<span class="token punctuation">:</span> <span class="token string">'jQuery'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>è¿™æ ·å°±å‰¥ç¦»äº†é‚£äº›ä¸éœ€è¦æ”¹åŠ¨çš„ä¾èµ–æ¨¡å—ï¼Œæ¢å¥è¯ï¼Œä¸‹é¢å±•ç¤ºçš„ä»£ç è¿˜å¯ä»¥æ­£å¸¸è¿è¡Œï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">'jquery'</span><span class="token punctuation">;</span>

<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.my-element'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å…·æœ‰å¤–éƒ¨ä¾èµ–(external dependency)çš„ bundle å¯ä»¥åœ¨å„ç§æ¨¡å—ä¸Šä¸‹æ–‡(module context)ä¸­ä½¿ç”¨ï¼Œä¾‹å¦‚ <a href="https://webpack.docschina.org/concepts/modules" target="_blank" rel="noopener noreferrer">CommonJS, AMD, å…¨å±€å˜é‡å’Œ ES2015 æ¨¡å—<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚å¤–éƒ¨ library å¯èƒ½æ˜¯ä»¥ä¸‹ä»»ä½•ä¸€ç§å½¢å¼ï¼š</p> <ul><li><strong>root</strong>ï¼šå¯ä»¥é€šè¿‡ä¸€ä¸ªå…¨å±€å˜é‡è®¿é—® libraryï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡ script æ ‡ç­¾ï¼‰ã€‚</li> <li><strong>commonjs</strong>ï¼šå¯ä»¥å°† library ä½œä¸ºä¸€ä¸ª CommonJS æ¨¡å—è®¿é—®ã€‚</li> <li><strong>commonjs2</strong>ï¼šå’Œä¸Šé¢çš„ç±»ä¼¼ï¼Œä½†å¯¼å‡ºçš„æ˜¯ <code>module.exports.default</code>.</li> <li><strong>amd</strong>ï¼šç±»ä¼¼äº <code>commonjs</code>ï¼Œä½†ä½¿ç”¨ AMD æ¨¡å—ç³»ç»Ÿã€‚</li></ul> <p>å¯ä»¥æ¥å—å„ç§è¯­æ³•â€¦â€¦</p> <p><a href="https://webpack.docschina.org/configuration/externals/" target="_blank" rel="noopener noreferrer">å®Œæ•´é…ç½®æŸ¥çœ‹æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="å¦‚ä½•è®©åˆ«äººä½¿ç”¨åº“"><a href="#å¦‚ä½•è®©åˆ«äººä½¿ç”¨åº“" aria-hidden="true" class="header-anchor">#</a> å¦‚ä½•è®©åˆ«äººä½¿ç”¨åº“</h3> <p>ä¿®æ”¹mainä¸ºæ‰“åŒ…ç”Ÿçš„æ–‡ä»¶</p> <div class="language-JSON line-numbers-mode"><pre class="language-json"><code>// package.json
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./dist/library.js&quot;</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>æœ€åæ˜¯å‘å¸ƒ</p> <p>æŸ¥çœ‹æœ¬ç«™<a href="/Frontend-Knowledge-Base/frontend/node/node.html#npm">å‘å¸ƒæ•™ç¨‹</a></p> <h2 id="pwa-çš„æ‰“åŒ…é…ç½®"><a href="#pwa-çš„æ‰“åŒ…é…ç½®" aria-hidden="true" class="header-anchor">#</a> PWA çš„æ‰“åŒ…é…ç½®</h2> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/04-02%20PWA%20%E7%9A%84%E6%89%93%E5%8C%85%E9%85%8D%E7%BD%AE/04-02/lesson" target="_blank" rel="noopener noreferrer">å…¨éƒ¨ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>å®‰è£… http-server æ¨¡æ‹ŸæœåŠ¡å™¨</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i http-server -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä¿®æ”¹package.json</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code> <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http-server dist&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server --config ./build/webpack.dev.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config ./build/webpack.prod.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æ‰“åŒ…åè¿è¡Œ <code>npm run start</code> ä¼šåœ¨distæ–‡ä»¶å¤¹ä¸‹æ¨¡æ‹Ÿä¸€å°æœåŠ¡å™¨</p> <p>æ‰“å¼€127.0.0.1å¯ä»¥è®¿é—®</p> <p>å¦‚æœæˆ‘ä»¬ æŒ‰<code>ctrl +c</code>åœæ­¢æœåŠ¡å™¨ï¼Œç½‘é¡µå°±ä¸èƒ½è®¿é—®äº†</p> <p>ä½†æ˜¯pwaå³ä½¿æœåŠ¡å™¨æŒ‚æ‰ï¼Œæœ¬åœ°é¡µé¢ç¼“å­˜è¿˜èƒ½è®¿é—®</p> <p>å®ç°è¿™ç§æŠ€æœ¯å¯ä»¥ä½¿ç”¨æ’ä»¶ ï¼Œåº•å±‚å®ç°æ˜¯serviceworker</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i workbox-webpack-plugin -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>é…ç½®ç”Ÿäº§ç¯å¢ƒå³å¯ï¼Œæœ¬åœ°å¼€å‘ä¸ç”¨pwa</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> OptimizeCSSAssetsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;optimize-css-assets-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> WorkboxPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'workbox-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å¼•å…¥æ’ä»¶</span>
<span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.common.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> prodConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
	mode<span class="token punctuation">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
	devtool<span class="token punctuation">:</span> <span class="token string">'cheap-module-source-map'</span><span class="token punctuation">,</span>
	module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		rules<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
			test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
			use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
				MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> 
				<span class="token punctuation">{</span>
					loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
					options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
						importLoaders<span class="token punctuation">:</span> <span class="token number">2</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
				<span class="token string">'postcss-loader'</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
			use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
				MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
				<span class="token string">'css-loader'</span><span class="token punctuation">,</span>
				<span class="token string">'postcss-loader'</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">OptimizeCSSAssetsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			filename<span class="token punctuation">:</span> <span class="token string">'[name].css'</span><span class="token punctuation">,</span>
			chunkFilename<span class="token punctuation">:</span> <span class="token string">'[name].chunk.css'</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token keyword">new</span> <span class="token class-name">WorkboxPlugin<span class="token punctuation">.</span>GenerateSW</span><span class="token punctuation">(</span><span class="token punctuation">{</span>     <span class="token comment">// å®ä¾‹åŒ–æ’ä»¶</span>
			clientsClaim<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            
			skipWaiting<span class="token punctuation">:</span> <span class="token boolean">true</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		filename<span class="token punctuation">:</span> <span class="token string">'[name].[contenthash].js'</span><span class="token punctuation">,</span>
		chunkFilename<span class="token punctuation">:</span> <span class="token string">'[name].[contenthash].js'</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> prodConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><p>é…ç½®æˆåŠŸï¼Œè¿è¡Œnpm run buildæ‰“åŒ…</p> <p>ä¼šå‘ç°æ‰“åŒ…æ–‡ä»¶ å¤šäº†service-worker å’Œprecache-manifest</p> <p>å¯ä»¥ç†è§£ä¸ºå¦ç±»çš„ç¼“å­˜</p> <p>æ­¤æ—¶pwaè¿˜ä¸èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œéœ€è¦åœ¨ä¸šåŠ¡ä»£ç ä¸­å¯ç”¨</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'serviceWorker'</span> <span class="token keyword">in</span> navigator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		navigator<span class="token punctuation">.</span>serviceWorker<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'/service-worker.js'</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>registration <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'service-worker registed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'service-worker register error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>é‡æ–°æ‰“åŒ…</p> <p>å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨npm run start</p> <p>å†å…³æ‰æœåŠ¡å™¨ï¼Œå‘ç°ç½‘ç«™è¿˜èƒ½è®¿é—®</p> <p>pwaé…ç½®è¿˜æœ‰å¾ˆå¤šå¯ä»¥è‡ªè¡ŒæŸ¥çœ‹æ–‡æ¡£</p> <p>æœ¬ç«™å·²é…ç½®PWAï¼Œæ‚¨å¯ä»¥å…³æ‰ç½‘ç»œæµ‹è¯•ï¼Œä¾ç„¶å¯ä»¥è®¿é—®</p> <p><a href="https://lavas.baidu.com/pwa" target="_blank" rel="noopener noreferrer">pwa<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="typescript-çš„æ‰“åŒ…é…ç½®"><a href="#typescript-çš„æ‰“åŒ…é…ç½®" aria-hidden="true" class="header-anchor">#</a> TypeScript çš„æ‰“åŒ…é…ç½®</h2> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/04-03%20TypeScript%20%E7%9A%84%E6%89%93%E5%8C%85%E9%85%8D%E7%BD%AE/type-script/type-script" target="_blank" rel="noopener noreferrer">å…¨éƒ¨ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>tsä»£ç </p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Greeter</span> <span class="token punctuation">{</span>
  greeting<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>greeting <span class="token operator">=</span> message<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token keyword">return</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;Hello,&quot;</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>greeting<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> greeter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Greeter</span><span class="token punctuation">(</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>greeter<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>å®‰è£… ts-loader typrscript</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i ts-loader typescript -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	mode<span class="token punctuation">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
	entry<span class="token punctuation">:</span> <span class="token string">'./src/index.tsx'</span><span class="token punctuation">,</span>   <span class="token comment">//tsæ–‡ä»¶å…¥å£</span>
	module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
			test<span class="token punctuation">:</span> <span class="token regex">/\.tsx?$/</span><span class="token punctuation">,</span>
			use<span class="token punctuation">:</span> <span class="token string">'ts-loader'</span><span class="token punctuation">,</span>      <span class="token comment">// é…ç½®loader</span>
			exclude<span class="token punctuation">:</span> <span class="token operator">/</span>node_modules<span class="token operator">/</span>    <span class="token comment">// å¼•å…¥æ–‡ä»¶æ¥è‡ªnodeæ¨¡å—ä¸å¤„ç†</span>
		<span class="token punctuation">}</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
		path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>tsconfig.json</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;compilerOpitons&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;outDir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./dist&quot;</span><span class="token punctuation">,</span>  //è¾“å‡ºç›®å½•
		<span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es6&quot;</span><span class="token punctuation">,</span>     //æ¨¡å—å¼•å…¥æ–¹å¼
		<span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es5&quot;</span><span class="token punctuation">,</span>    // è½¬ä¸ºä»€ä¹ˆå½¢å¼
		<span class="token property">&quot;allowJs&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    // å…è®¸å¼•å…¥jsæ¨¡å—æ–‡ä»¶
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>è¯†åˆ«loadshæ–¹æ³•é”™è¯¯è°ƒç”¨è¿˜éœ€è¦å®‰è£…</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i @type/lodash -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å¼•å…¥ç›¸åº”åº“éƒ½æœ‰å®‰è£…typeå·¥å…·</p> <p><a href="https://github.com/DefinitelyTyped/DefinitelyTyped" target="_blank" rel="noopener noreferrer">https://github.com/DefinitelyTyped/DefinitelyTyped<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>ä½¿ç”¨å·¥å…·<a href="https://microsoft.github.io/TypeSearch/" target="_blank" rel="noopener noreferrer">æœç´¢<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="ä½¿ç”¨-webpackdevserver-å®ç°è¯·æ±‚è½¬å‘"><a href="#ä½¿ç”¨-webpackdevserver-å®ç°è¯·æ±‚è½¬å‘" aria-hidden="true" class="header-anchor">#</a> ä½¿ç”¨ WebpackDevServer å®ç°è¯·æ±‚è½¬å‘</h2> <p>ä½¿ç”¨æ­¤å¤„ä»£ç è¿›è¡Œ<a href="https://github.com/jinjun1994/example/tree/master/webpack4/02-11%20Webpack%20%E5%AE%9E%E7%8E%B0%E5%AF%B9React%E6%A1%86%E6%9E%B6%E4%BB%A3%E7%A0%81%E7%9A%84%E6%89%93%E5%8C%85/02-11/lesson" target="_blank" rel="noopener noreferrer">æ¼”ç¤º<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/04-04%20%E4%BD%BF%E7%94%A8%20WebpackDevServer%20%E5%AE%9E%E7%8E%B0%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91/04-04/lesson" target="_blank" rel="noopener noreferrer">å®Œæˆåä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>å®‰è£…</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i axios -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å¼•å…¥æ¨¡å—ä½¿ç”¨</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDom <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span><span class="token punctuation">;</span>                   <span class="token comment">//å¼•å…¥</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>

	<span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                         <span class="token comment">//å‘é€getè¯·æ±‚</span>
		axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/react/api/header.json'</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Hello World<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

ReactDom<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>å¼€å‘ç¯å¢ƒä¸ç”Ÿäº§ç¯å¢ƒæ¥å£ä¸ä¸€æ ·</p> <p>æ¥å£ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œé…ç½®<a href="https://webpack.js.org/configuration/dev-server#devserverproxy" target="_blank" rel="noopener noreferrer">devserver.prox<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>è¿›è¡Œæ•°æ®è½¬å‘</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		contentBase<span class="token punctuation">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
		open<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		port<span class="token punctuation">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
		hot<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		hotOnly<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>
			<span class="token string">'/react/api'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
				target<span class="token punctuation">:</span> <span class="token string">'https://www.dell-lee.com'</span><span class="token punctuation">,</span>     <span class="token comment">//è½¬å‘åˆ°æ­¤åœ°å€</span>
				secure<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>                         <span class="token comment">// è¯·æ±‚httpséœ€è¦é…ç½®ï¼Œhttpä¸éœ€è¦</span>
				pathRewrite<span class="token punctuation">:</span> <span class="token punctuation">{</span>
					<span class="token string">'header.json'</span><span class="token punctuation">:</span> <span class="token string">'demo.json'</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				changeOrigin<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
				headers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
					host<span class="token punctuation">:</span> <span class="token string">'www.dell-lee.com'</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>å¦‚æœçœŸå®æ¥å£ä¸ºheader.jsonï¼Œå‡æ•°æ®ä¸ºdemo.jsonï¼Œé˜²æ­¢ä¸Šçº¿åå‡ºé”™ï¼Œä¸è¦å°†å‡æ•°æ®æ¥å£å†™åˆ°ä¸šåŠ¡ä»£ç ï¼Œé˜²æ­¢å‡ºé”™ï¼Œå¯ä»¥é…ç½®pathwriteï¼Œè¿™æ ·çœŸå®æ¥å£å¯ç”¨ä¹‹ååˆ é™¤æ­¤è¡Œé…ç½®å³å¯ã€‚devserveåªåœ¨å¼€å‘ç¯å¢ƒä¸‹æœ‰æ•ˆ</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>pathRewrite<span class="token punctuation">:</span> <span class="token punctuation">{</span>
					<span class="token string">'header.json'</span><span class="token punctuation">:</span> <span class="token string">'demo.json'</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>devServer.proxy</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>object` `[object, function]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å¦‚æœä½ æœ‰å•ç‹¬çš„åç«¯å¼€å‘æœåŠ¡å™¨ APIï¼Œå¹¶ä¸”å¸Œæœ›åœ¨åŒåŸŸåä¸‹å‘é€ API è¯·æ±‚ ï¼Œé‚£ä¹ˆä»£ç†æŸäº› URL ä¼šå¾ˆæœ‰ç”¨ã€‚</p> <p>dev-server ä½¿ç”¨äº†éå¸¸å¼ºå¤§çš„ <a href="https://github.com/chimurai/http-proxy-middleware" target="_blank" rel="noopener noreferrer">http-proxy-middleware<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> åŒ…ã€‚æ›´å¤šé«˜çº§ç”¨æ³•ï¼Œè¯·æŸ¥é˜…å…¶ <a href="https://github.com/chimurai/http-proxy-middleware#options" target="_blank" rel="noopener noreferrer">æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚Note that some of <code>http-proxy-middleware</code>'s features do not require a <code>target</code> key, e.g. its <code>router</code> feature, but you will still need to include a <code>target</code> key in your config here, otherwise <code>webpack-dev-server</code> won't pass it along to <code>http-proxy-middleware</code>).</p> <p>åœ¨ <code>localhost:3000</code> ä¸Šæœ‰åç«¯æœåŠ¡çš„è¯ï¼Œä½ å¯ä»¥è¿™æ ·å¯ç”¨ä»£ç†ï¼š</p> <p><strong>webpack.config.js</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token string">'http://localhost:3000'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>è¯·æ±‚åˆ° <code>/api/users</code> ç°åœ¨ä¼šè¢«ä»£ç†åˆ°è¯·æ±‚ <code>http://localhost:3000/api/users</code>ã€‚</p> <p>å¦‚æœä½ ä¸æƒ³å§‹ç»ˆä¼ é€’ <code>/api</code> ï¼Œåˆ™éœ€è¦é‡å†™è·¯å¾„ï¼š</p> <p><strong>webpack.config.js</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">:</span> <span class="token string">'http://localhost:3000'</span><span class="token punctuation">,</span>
        pathRewrite<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'^/api'</span> <span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸æ¥å—è¿è¡Œåœ¨ HTTPS ä¸Šï¼Œä¸”ä½¿ç”¨äº†æ— æ•ˆè¯ä¹¦çš„åç«¯æœåŠ¡å™¨ã€‚å¦‚æœä½ æƒ³è¦æ¥å—ï¼Œä¿®æ”¹é…ç½®å¦‚ä¸‹ï¼š</p> <p><strong>webpack.config.js</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">:</span> <span class="token string">'https://other-server.example.com'</span><span class="token punctuation">,</span>
        secure<span class="token punctuation">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>æœ‰æ—¶ä½ ä¸æƒ³ä»£ç†æ‰€æœ‰çš„è¯·æ±‚ã€‚å¯ä»¥åŸºäºä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ç»•è¿‡ä»£ç†ã€‚</p> <p>åœ¨å‡½æ•°ä¸­ä½ å¯ä»¥è®¿é—®è¯·æ±‚ä½“ã€å“åº”ä½“å’Œä»£ç†é€‰é¡¹ã€‚å¿…é¡»è¿”å› <code>false</code> æˆ–è·¯å¾„ï¼Œæ¥è·³è¿‡ä»£ç†è¯·æ±‚ã€‚</p> <p>ä¾‹å¦‚ï¼šå¯¹äºæµè§ˆå™¨è¯·æ±‚ï¼Œä½ æƒ³è¦æä¾›ä¸€ä¸ª HTML é¡µé¢ï¼Œä½†æ˜¯å¯¹äº API è¯·æ±‚åˆ™ä¿æŒä»£ç†ã€‚ä½ å¯ä»¥è¿™æ ·åšï¼š</p> <p><strong>webpack.config.js</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">:</span> <span class="token string">'http://localhost:3000'</span><span class="token punctuation">,</span>
        bypass<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> proxyOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>accept<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'html'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Skipping proxy for browser request.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token string">'/index.html'</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>å¦‚æœä½ æƒ³è¦ä»£ç†å¤šä¸ªè·¯å¾„ç‰¹å®šåˆ°åŒä¸€ä¸ª target ä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ç”±ä¸€ä¸ªæˆ–å¤šä¸ªã€Œå…·æœ‰ <code>context</code> å±æ€§çš„å¯¹è±¡ã€æ„æˆçš„æ•°ç»„ï¼š</p> <p><strong>webpack.config.js</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    proxy<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      context<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'/auth'</span><span class="token punctuation">,</span> <span class="token string">'/api'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      target<span class="token punctuation">:</span> <span class="token string">'http://localhost:3000'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>æ³¨æ„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ ¹è¯·æ±‚ä¸ä¼šè¢«ä»£ç†ã€‚è¦å¯ç”¨æ ¹ä»£ç†ï¼Œåº”è¯¥å°† <code>devServer.index</code> é€‰é¡¹æŒ‡å®šä¸º falsy å€¼ï¼š</p> <p><strong>webpack.config.js</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    index<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// specify to enable root proxying</span>
    host<span class="token punctuation">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span>
    contentBase<span class="token punctuation">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span>
    proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      context<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      target<span class="token punctuation">:</span> <span class="token string">'http://localhost:1234'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>ä¸»æœºå¤´çš„originä¿æŒé»˜è®¤è¿›è¡Œä»£ç†æ—¶ï¼Œå¯ä»¥è®¾ç½®<code>changeOrigin</code>ä»¥<code>true</code>è¦†ç›–æ­¤è¡Œä¸ºã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¾‹å¦‚ä½¿ç”¨<a href="https://en.wikipedia.org/wiki/Virtual_hosting#Name-based" target="_blank" rel="noopener noreferrer">åŸºäºåç§°çš„è™šæ‹Ÿæ‰˜ç®¡ç«™ç‚¹<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>éå¸¸æœ‰ç”¨ã€‚æ¥å£å¯¹originåšäº†é™åˆ¶çš„è¯å¯ä»¥åŠ è¿™ä¸ª</p> <p><strong>webpack.config.js</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token string">'http://localhost:3000'</span><span class="token punctuation">,</span>
      changeOrigin<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>å®Œæ•´é…ç½®ï¼š</p> <p><a href="https://github.com/chimurai/http-proxy-middleware" target="_blank" rel="noopener noreferrer">https://github.com/chimurai/http-proxy-middleware<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="webpackdevserver-è§£å†³å•é¡µé¢åº”ç”¨è·¯ç”±é—®é¢˜"><a href="#webpackdevserver-è§£å†³å•é¡µé¢åº”ç”¨è·¯ç”±é—®é¢˜" aria-hidden="true" class="header-anchor">#</a> WebpackDevServer è§£å†³å•é¡µé¢åº”ç”¨è·¯ç”±é—®é¢˜</h2> <p><a href="https://github.com/jinjun1994/example/tree/master/webpack4/04-05%20WebpackDevServer%20%E8%A7%A3%E5%86%B3%E5%8D%95%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8%E8%B7%AF%E7%94%B1%E9%97%AE%E9%A2%98/04-05/lesson" target="_blank" rel="noopener noreferrer">å…¨éƒ¨ä»£ç <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>é¦–å…ˆä¹¦å†™ä»£ç </p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">/</span> index<span class="token punctuation">.</span>js
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter<span class="token punctuation">,</span> Route <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDom <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'./home.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> List <span class="token keyword">from</span> <span class="token string">'./list.js'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>
			<span class="token operator">&lt;</span>BrowserRouter<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/'</span> exact component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/list'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>List<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>BrowserRouter<span class="token operator">&gt;</span>
		<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

ReactDom<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// list.js</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">List</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>ListPage<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> List<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// home.js</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>HomePage<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Home<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>è®¿é—®/listä¼šä¸å­˜åœ¨ï¼Œå› ä¸ºé¡µé¢ä¸å­˜åœ¨ï¼Œåªæœ‰index.html</p> <p>é…ç½®<a href="https://webpack.js.org/configuration/dev-server#devserverhistoryapifallback" target="_blank" rel="noopener noreferrer">devServer.historyApiFallback<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>å³å¯</p> <p><strong>webpack.config.js</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    historyApiFallback<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>åŸç†æ˜¯å°†è¯·æ±‚éƒ½è½¬æ¢ä¸ºå¯¹æ ¹è·¯å¾„çš„è¯·æ±‚ï¼Œå°±è®¿é—®åˆ°äº†index.html</p> <h3 id="devserver-historyapifallback"><a href="#devserver-historyapifallback" aria-hidden="true" class="header-anchor">#</a> <code>devServer.historyApiFallback</code></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>boolean` `object
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å½“ä½¿ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/API/History" target="_blank" rel="noopener noreferrer">HTML5 History API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> æ—¶ï¼Œä»»æ„çš„ <code>404</code> å“åº”éƒ½å¯èƒ½éœ€è¦è¢«æ›¿ä»£ä¸º <code>index.html</code>ã€‚<code>devServer.historyApiFallback</code> é»˜è®¤ç¦ç”¨ã€‚é€šè¿‡ä¼ å…¥ä»¥ä¸‹å¯ç”¨ï¼š</p> <p><strong>webpack.config.js</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    historyApiFallback<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>é€šè¿‡ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œæ¯”å¦‚ä½¿ç”¨ <code>rewrites</code> è¿™ä¸ªé€‰é¡¹ï¼Œæ­¤è¡Œä¸ºå¯è¿›ä¸€æ­¥åœ°æ§åˆ¶ï¼š</p> <p><strong>webpack.config.js</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    historyApiFallback<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      rewrites<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token regex">/^\/$/</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">'/views/landing.html'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token regex">/^\/subpage/</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">'/views/subpage.html'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token regex">/./</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">'/views/404.html'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>historyApiFallback: true  ç­‰ä»·äº {from: /.*/, to: '/index.html'}</p> <p>å½“è·¯å¾„ä¸­ä½¿ç”¨ç‚¹(dot)ï¼ˆå¸¸è§äº Angularï¼‰ï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨ <code>disableDotRule</code>ï¼š</p> <p><strong>webpack.config.js</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    historyApiFallback<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      disableDotRule<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>CLI ç”¨æ³•</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>webpack-dev-server --history-api-fallback
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æ›´å¤šé€‰é¡¹å’Œä¿¡æ¯ï¼ŒæŸ¥çœ‹ <a href="https://github.com/bripkens/connect-history-api-fallback" target="_blank" rel="noopener noreferrer">connect-history-api-fallback<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> æ–‡æ¡£ã€‚</p> <p>å¯ä»¥ä½¿ç”¨å‡½æ•°æ¥æ›´å¥½åœ°æ§åˆ¶é‡å†™è¿‡ç¨‹ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹åˆ—è¡¨æ˜¾ç¤ºäº†å¦‚ä½•å°†è¯·æ±‚<code>/libs/jquery/jquery.1.12.0.min.js</code>ç­‰è·¯ç”±åˆ°<code>./bower_components/libs/jquery/jquery.1.12.0.min.js</code>ã€‚å¦‚æœæ‚¨åœ¨URLè·¯å¾„ä¸­æœ‰APIç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ­¤åŠŸèƒ½ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>history({
  rewrites: [
    {
      from: /^\/libs\/.*$/,
      to: function(context) {
        return '/bower_components' + context.parsedUrl.pathname;
      }
    }
  ]
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>The functionå§‹ç»ˆä½¿ç”¨å…·æœ‰ä»¥ä¸‹å±æ€§çš„ä¸Šä¸‹æ–‡å¯¹è±¡è°ƒç”¨è¯¥å‡½æ•°ï¼š</p> <ul><li><strong>parsedUrl</strong>ï¼šæœ‰å…³<a href="https://nodejs.org/api/url.html#url_url_parse_urlstr_parsequerystring_slashesdenotehost" target="_blank" rel="noopener noreferrer">URLæ¨¡å—<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> æä¾›çš„<a href="https://nodejs.org/api/url.html#url_url_parse_urlstr_parsequerystring_slashesdenotehost" target="_blank" rel="noopener noreferrer">URLçš„ä¿¡æ¯<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><code>url.parse</code>ã€‚</li> <li><strong>match</strong>ï¼šç”±æä¾›çš„åŒ¹é…ç»“æœæ•°ç»„<code>String.match(...)</code>ã€‚</li> <li><strong>request</strong>ï¼šHTTPè¯·æ±‚å¯¹è±¡ã€‚</li></ul> <p>åªèƒ½å¼€å‘ç¯å¢ƒï¼Œç”Ÿäº§ç¯å¢ƒéœ€è¦åç«¯é…ç½®nginx</p> <h2 id="eslint-åœ¨-webpack-ä¸­çš„é…ç½®"><a href="#eslint-åœ¨-webpack-ä¸­çš„é…ç½®" aria-hidden="true" class="header-anchor">#</a> EsLint åœ¨ Webpack ä¸­çš„é…ç½®</h2> <p>è§„èŒƒé¡¹ç›®ä»£ç </p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i eslint -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>é…ç½®è§„èŒƒ</p> <p>npx eslint --init</p> <p>å¯ä»¥é€‰æ‹©è§„èŒƒ</p> <p>é€‰æ‹© ues a popular style guide</p> <p>å†é€‰æ‹© Airbnb</p> <p>é€‰æ‹©æ˜¯å¦ä½¿ç”¨reactï¼š yes</p> <p>é€‰æ‹©é…ç½®æ–‡ä»¶æ ¼å¼  JavaScript</p> <p>é€‰æ‹©æ˜¯å¦å®‰è£…ä¾èµ– ï¼šæ˜¯</p> <p>é…ç½®ï¼ˆ<a href="https://eslint.org/docs/user-guide/configuring" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼‰</p> <p>å®‰è£… è§£æå™¨ nm i babel-eslint</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token string">&quot;extends&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;airbnb&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;parser&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;babel-eslint&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// æ›´æ¢è§£æå™¨ </span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>é…ç½®å®Œæˆ</p> <p>ä½¿ç”¨ï¼š</p> <p>æ–¹æ³•ä¸€npx eslint src æ£€æµ‹srcç›®å½•ä¸‹ä»£ç è§„èŒƒé”™è¯¯</p> <p>æ–¹æ³•äºŒ</p> <p>ä½¿ç”¨vscodeç¼–è¾‘å™¨ å®‰è£… eslintæ’ä»¶(å¯èƒ½éœ€è¦ç§‘å­¦ä¸Šç½‘å®‰è£…ï¼Œä¸ç„¶å®¹æ˜“å‡ºé”™)ï¼Œè¿™ç§æ–¹æ³•ä¸éœ€è¦ä½¿ç”¨webpack</p> <p>ä¼šæ ¹æ®é…ç½®æç¤ºé”™è¯¯ï¼Œå¦‚ä¸‹å›¾</p> <p><img src="https://img.amazingtm.com/201903/12051831.png-sign" alt=""></p> <p>ä¾‹å¦‚ ä¼šæç¤ºæ— çŠ¶æ€ç»„ä»¶ä¸éœ€è¦ç”¨classå†™æ³•ï¼Œåº”è¯¥å†™æˆå‡½æ•°</p> <p><img src="https://img.amazingtm.com/201903/12051935.png-sign" alt=""></p> <p>å¦‚æœä¸æƒ³éµå¾ªæ­¤æ¡è§„èŒƒï¼Œå¯ä»¥å°†é”™è¯¯æç¤ºåé¢çš„è§„åˆ™åå¤åˆ¶åˆ°é…ç½®æ–‡ä»¶è®¾ç½®ä¸º0ï¼Œå³å…³é—­</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token string">&quot;extends&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;airbnb&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;parser&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;babel-eslint&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;rules&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;react/prefer-stateless-function&quot;</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>   <span class="token comment">// å…³é—­</span>
    <span class="token string">&quot;react/jsx-filename-extension&quot;</span><span class="token punctuation">:</span> <span class="token number">0</span>       <span class="token comment">// å…³é—­åªèƒ½åœ¨jsxæ–‡ä»¶å†™jsx</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  globals<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">:</span> <span class="token boolean">false</span>                      <span class="token comment">// é…ç½®documentå…¨å±€å˜é‡ä¸å…è®¸è¢«è¦†ç›–</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>å¦‚æœæ’ä»¶å®‰è£…ä¸äº†ã€‚å‘½ä»¤è¡Œåˆå¾ˆéº»çƒ¦ã€‚</p> <p>è¿™æ ·æˆ‘ä»¬å¯ä»¥å’Œwebpackç»“åˆ</p> <p>å®‰è£…</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>eslint-loader
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>é…ç½®</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> 
			test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span> 
			exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span> 
			use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'babel-loader'</span><span class="token punctuation">,</span> <span class="token string">'eslint-loader'</span><span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>è¿™æ ·æ‰“åŒ…çš„æ—¶å€™ä¼šæç¤ºé—®é¢˜</p> <p><img src="https://img.amazingtm.com/201903/12053203.png-sign" alt=""></p> <p>è¿™æ ·ä»åœ¨å‘½ä»¤è¡Œï¼Œçœ‹èµ·æ¥ä¸æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		overlay<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>è¿™æ ·å°±ä¼šåœ¨æµè§ˆå™¨å¼¹å‡ºé”™è¯¯</p> <p><img src="https://img.amazingtm.com/201903/12053440.png-sign" alt=""></p> <p>è¿™æ ·æ”¹æ‰é”™è¯¯ï¼Œæç¤ºä¼šå³æ—¶æ¶ˆå¤±</p> <p>æ›´å¤šé…ç½®é¡¹æŸ¥çœ‹æ–‡æ¡£<a href="https://webpack.js.org/loaders/eslint-loader" target="_blank" rel="noopener noreferrer">eslint-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="fixï¼ˆé»˜è®¤å€¼ï¼šfalseï¼‰"><a href="#fixï¼ˆé»˜è®¤å€¼ï¼šfalseï¼‰" aria-hidden="true" class="header-anchor">#</a> <code>fix</code>ï¼ˆé»˜è®¤å€¼ï¼šfalseï¼‰</h4> <p>æ­¤é€‰é¡¹å°†å¯ç”¨ <a href="http://eslint.org/docs/user-guide/command-line-interface#fix" target="_blank" rel="noopener noreferrer">ESLintè‡ªåŠ¨ä¿®å¤åŠŸèƒ½<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚</p> <p><strong>æ³¨æ„ï¼šæ­¤é€‰é¡¹å°†æ›´æ”¹æºæ–‡ä»¶ã€‚</strong></p> <h4 id="cacheï¼ˆé»˜è®¤å€¼ï¼šfalseï¼‰"><a href="#cacheï¼ˆé»˜è®¤å€¼ï¼šfalseï¼‰" aria-hidden="true" class="header-anchor">#</a> <code>cache</code>ï¼ˆé»˜è®¤å€¼ï¼šfalseï¼‰</h4> <p>æ­¤é€‰é¡¹å°†å¯ç”¨å°†lintingç»“æœç¼“å­˜åˆ°æ–‡ä»¶ä¸­ã€‚è¿™å¯¹äºå‡å°‘å®Œæ•´æ„å»ºæ—¶çš„æ‰æ¯›æ—¶é—´ç‰¹åˆ«æœ‰ç”¨ã€‚</p> <p>è¿™å¯ä»¥æ˜¯<code>boolean</code>å€¼æˆ–ç¼“å­˜ç›®å½•è·¯å¾„ï¼ˆä¾‹å¦‚:) <code>'./.eslint-loader-cache'</code>ã€‚</p> <p>å¦‚æœ<code>cache: true</code>ä½¿ç”¨ï¼Œåˆ™å°†ç¼“å­˜æ–‡ä»¶å†™å…¥<code>./node_modules/.cache</code>ç›®å½•ã€‚è¿™æ˜¯æ¨èç”¨æ³•</p> <p>ä¸ºäº†å®‰å…¨èµ·è§ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>enforce: &quot;pre&quot;</code>sectionæ£€æŸ¥æºæ–‡ä»¶ï¼Œè€Œä¸æ˜¯ç”±å…¶ä»–åŠ è½½å™¨ä¿®æ”¹ï¼ˆå¦‚<code>babel-loader</code>ï¼‰ã€‚å¼ºåˆ¶eslint-loaderæœ€å…ˆæ‰§è¡Œ</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        enforce<span class="token punctuation">:</span> <span class="token string">&quot;pre&quot;</span><span class="token punctuation">,</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">&quot;eslint-loader&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">&quot;babel-loader&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>æ¨èé…ç½®</p> <p>çœŸå®é¡¹ç›®ä¸ç”¨eslint -loader,é™ä½æ‰“åŒ…æ—¶é—´ï¼Œä½¿ç”¨git hooké’©å­ï¼Œæäº¤ä»£ç æ—¶ï¼Œè‡ªåŠ¨è¿è¡Œeslint srcã€‚å‡ºé”™ç¦æ­¢æäº¤</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/jinjun1994/Frontend-Knowledge-Base/edit/master/frontend/frontend-engineering/webpack.md" target="_blank" rel="noopener noreferrer">å¸®åŠ©æˆ‘ä»¬æ”¹å–„æ­¤é¡µé¢ï¼</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2020/6/8 ä¸Šåˆ11:34:51</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/Frontend-Knowledge-Base/frontend/frontend-engineering/frontend-engineering.html" class="prev">
          å‰ç«¯å·¥ç¨‹åŒ–
        </a></span> <span class="next"><a href="/Frontend-Knowledge-Base/frontend/graphics/graphics.html">
          å‰ç«¯å›¾å½¢å­¦
        </a>
        â†’
      </span></p></div> </main> <div class="page"><section class="page-edit"><h3 style="display:;"><a href="javascript:;"></a>
      è¯„ è®ºï¼š
    </h3> <div id="vcomments"></div></section></div></div><div class="global-ui"><!----></div></div>
    <script src="/Frontend-Knowledge-Base/assets/js/app.be30c89b.js" defer></script><script src="/Frontend-Knowledge-Base/assets/js/4.d5d74749.js" defer></script><script src="/Frontend-Knowledge-Base/assets/js/66.c9dc87d6.js" defer></script><script src="/Frontend-Knowledge-Base/assets/js/9.1a9c75bd.js" defer></script>
  </body>
</html>
